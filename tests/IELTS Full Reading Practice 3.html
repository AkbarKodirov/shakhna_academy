<!DOCTYPE html>
<!-- saved from url=(0068)file:///D:/downloads/Mock%20reading%20for%20Intensive%20Masters.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Full Reading Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            line-height: 1.4;
            font-size: 16px;
        }



        .header {
            background-color: #ffffff;
            padding: 12px 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            height: 60px;
        }

        .ielts-logo {
            display: none;
        }

        .test-info {
            display: flex;
            align-items: center;
            gap: 30px;
            font-size: 14px;
            color: #333;
        }

        .audio-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
        }

        .audio-icon {
            width: 16px;
            height: 16px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg>') no-repeat center;
        }

        .header-icons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .telegram-link {
            color: #0088cc;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .telegram-link:hover {
            text-decoration: underline;
        }

        .telegram-link::before {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: currentColor;
            -webkit-mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-1.37.2-1.64l16.56-6.4c.75-.29 1.4.22 1.2.94l-2.67 12.61c-.22.95-1.13 1.18-1.78.73l-4.5-3.32l-2.23 2.15c-.47.44-1.29.21-1.48-.37z"/></svg>');
            mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-1.37.2-1.64l16.56-6.4c.75-.29 1.4.22 1.2.94l-2.67 12.61c-.22.95-1.13 1.18-1.78.73l-4.5-3.32l-2.23 2.15c-.47.44-1.29.21-1.48-.37z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
        }

        #volume-slider {
            -webkit-appearance: none;
            width: 80px;
            height: 4px;
            background: #ddd;
            outline: none;
            border-radius: 2px;
            cursor: pointer;
        }

        #volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #333;
            cursor: pointer;
        }

        #volume-slider::-moz-range-thumb {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #333;
            cursor: pointer;
            border: none;
        }

        .icon {
            width: 20px;
            height: 20px;
            cursor: pointer;
            opacity: 0.7;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .icon:hover {
            opacity: 1;
        }
        
        #play-pause-btn {
            background: none;
            border: none;
            padding: 0;
        }

        .main-container {
            margin-top: 60px;
            display: flex;
            flex-direction: column;
            background: #ffffff;
            height: calc(100vh - 60px); /* Full height minus header */
        }

        .panels-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .passage-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
        }

        /* Passage Content */
        .text-center {
            text-align: center;
        }
        .reading-passage h4 {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
       
        .reading-passage p {
            margin-bottom: 1.2em;
        }

        .question ul li label {
            display: block;
            margin-top: 8px;
            cursor: pointer;
        }

        .questions-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
            border-left: 1px solid #e0e0e0;
        }

        .resizer {
            width: 10px;
            cursor: col-resize;
            background-color: #f0f0f0;
            background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="30" viewBox="0 0 10 30"><path d="M4 11h2v2H4zM4 15h2v2H4zM4 19h2v2H4z" fill="%23888"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
            flex-shrink: 0;
            flex-grow: 0;
        }

        /* Left Panel */
        .left-panel {
            width: 100%;
            padding: 20px;
        }

        /* Right Panel */
        .right-panel {
            display: none;
            width: 50%;
            padding: 20px;
            position: relative;
        }

        .help-button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 20px;
        }

        .help-button:hover {
            background: #357abd;
        }

        .section-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .people-section {
            margin-bottom: 30px;
        }

        .people-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #ccc;
        }

        .people-table th {
            text-align: left;
            padding: 10px;
            font-weight: bold;
            border: 1px solid #ddd;
        }

        .people-table td {
            padding: 8px 10px;
            border: 1px solid #ddd;
        }

        .person-name {
            font-size: 16px;
        }

        .question-number {
            background: white;
            border: 1px solid #4a90e2;
            padding: 4px 8px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 14px;
            color: #4a90e2;
            min-width: 30px;
            text-align: center;
        }

        .assigned-responsibility {
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 14px;
            border: 1px solid #ddd;
        }

        .responsibilities-section {
            margin-bottom: 30px;
        }

        .responsibility-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .responsibility-item {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            text-align: center;
            transition: all 0.2s;
        }

        .responsibility-item:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .responsibility-item.dragging {
            opacity: 0.5;
        }

        .questions-section {
            margin-bottom: 20px;
        }

        .question-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .instruction {
            margin-bottom: 20px;
            font-size: 16px;
            color: #666;
        }

        /* Map Styles */
        .map-container {
            position: relative;
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }

        .map-svg {
            border: 2px solid #333;
            background: white;
        }

        .map-room {
            fill: #f9f9f9;
            stroke: #333;
            stroke-width: 1;
        }

        .map-text {
            font-family: Arial, sans-serif;
            font-size: 13px;
            text-anchor: middle;
            fill: #333;
        }

        .map-number {
            font-family: Arial, sans-serif;
            font-size: 16px;
            font-weight: bold;
            text-anchor: middle;
            fill: #333;
        }

        .room-labels {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .room-label {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            text-align: center;
            transition: all 0.2s;
        }

        .room-label:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .room-label.dragging {
            opacity: 0.5;
        }

        /* Navigation Arrows */
        .nav-arrows {
            position: fixed;
            bottom: 100px;
            right: 20px;
            display: flex;
            gap: 5px;
            z-index: 101;
        }

        .nav-arrow {
            width: 50px;
            height: 50px;
            background: #333;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
        }

        .nav-arrow:hover {
            background: #555;
        }

        .nav-arrow:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Bottom Navigation - Exact Match */
        .nav-row {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #ffffff;
        
            padding: 0;
            display: flex;
            align-items: center;
            height: 80px;
            z-index: 100;
        }

        .footer__questionWrapper___1tZ46 {
            display: flex;
            align-items: center;
            margin-right: 20px;
        }


        .footer__questionNo___3WNct {
            background: none;
            border: none;
            padding: 10px 15px;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: background-color 0.2s;
        }

        .footer__questionNo___3WNct:hover {
            background-color: #f8f9fa;
        }

        .section-prefix {
            font-size: 16px;
        }

        .sectionNr {
            font-size: 16px;
            font-weight: bold;
        }

        .attemptedCount {
            font-size: 14px;
            color: #666;
            margin-left: 5px;
            font-weight: 400; /* Normal weight */
        }

        @media (max-width: 768px) {
            .attemptedCount {
                display: none;
            }
        }

        .footer__questionWrapper___1tZ46.selected .attemptedCount {
            display: none;
        }

        .footer__subquestionWrapper___9GgoP {
            display: none;
            gap: 2px;
            margin-left: 10px;
        }

        .footer__questionWrapper___1tZ46.selected .footer__subquestionWrapper___9GgoP {
            display: flex;
        }

        .subQuestion {
            width: 32px;
            height: 32px;
            border: 1px solid #ccc;
            background: white;
            color: #333;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            border-radius: 2px;
        }

        .subQuestion.answered {
            background-color: #e9ecef;
            border-color: #ddd;
        }
        .subQuestion.correct {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }
        .subQuestion.incorrect {
            background-color: #dc3545;
            color: white;
            border-color: #dc3545;
        }

        .subQuestion:hover {
            background-color: #f0f0f0;
            border-color: #999;
        }

        .subQuestion.active {
            background-color: #4a90e2;
            color: white;
            border-color: #4a90e2;
        }

        .subQuestion.completed {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .footer__deliverButton___3FM07 {
            margin-left: auto;
            margin-right: 20px;
            background-color: #f0f0f0;
            color: #333;
            border: 1px solid #ccc;
            padding: 12px 20px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s, border-color 0.2s;
            min-width: 170px;
            justify-content: center;
        }

        .footer__deliverButton___3FM07:hover {
            background-color: #e0e0e0;
            border-color: #bbb;
        }

        .footer__deliverButton___3FM07:disabled {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
            border-color: #ddd;
        }

        .fa-check::before {
            content: "✓";
        }

        .hidden {
            display: none !important;
        }

        /* Context Menu */
        .context-menu {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
            min-width: 140px;
        }

        .context-menu-item {
            padding: 12px 16px;
            cursor: pointer;
            font-size: 16px;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .context-menu-item:hover {
            background-color: #f8f9fa;
        }

        .context-menu-item:last-child {
            border-bottom: none;
        }

        .highlight {
            background-color: #ffff00;
        }

        .comment-highlight {
            background-color: #90EE90;
            position: relative;
            cursor: help;
        }

        .comment-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            white-space: nowrap;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .comment-highlight:hover .comment-tooltip {
            opacity: 1;
        }

        .question {
            margin-bottom: 40px;
        }
        .question p {
            margin-bottom: 10px;
        }
        .question ul, .question .people-table {
            margin-top: 0;
        }
        .question-prompt {
            margin-bottom: 20px;
        }
        .question ul {
            list-style: none;
            padding-left: 0;
        }
        .question ul li {
            margin-bottom: 5px;
        }
        .answer-input {
            border: 1px solid #888;
            border-radius: 4px;
            background-color: #fff;
            padding: 2px 5px;
            font-size: 16px;
            text-align: center;
            margin-right: 4px;
            margin-left: 4px;
            transition: border-color 0.3s, box-shadow 0.3s;
            height: 28px; /* Standard height */
            width: 150px; /* Standard width */
        }
        .answer-input.active-input {
            border-color: #4a90e2;
            box-shadow: 0 0 3px 1px rgba(74, 144, 226, 0.5);
        }
        .answer-input::placeholder {
            color: #999;
            font-weight: bold;
            text-align: center;
        }
        .answer-input.correct {
            border-color: #28a745;
            background-color: #e9f7ef;
        }
        .answer-input.incorrect {
            border-color: #dc3545;
            background-color: #f8d7da;
            color: #721c24;
        }
        .answer-input {
    z-index: 10;
    position: relative;
    pointer-events: auto;
}
        .drag-drop-container {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            align-items: flex-start;
        }
        .recommendations-box {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
            min-height: 200px;
        }
        .drag-item {
            background: white;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            transition: all 0.2s;
            user-select: none;
        }
        .drag-item:hover {
            background: #e9ecef;
        }
        .drag-item.dragging {
            opacity: 0.5;
        }
        .drag-item.selected {
            border-color: #4a90e2;
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.5);
        }
        .drop-zone {
            border: 2px dashed #aaa;
            border-radius: 4px;
            width: 50%;
            margin-top: 19px;
            margin-bottom: 5px;
            transition: background-color 0.2s, border-color 0.2s;
            padding: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .drop-zone.drag-over {
            background-color: #e6f4ff;
            border-color: #4a90e2;
        }
        .drop-zone.correct {
            background-color: #e9f7ef;
            border-color: #28a745;
            border-style: solid;
        }
        .drop-zone.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            border-style: solid;
        }
        .drop-zone.disabled {
            pointer-events: none;
        }
        .drop-zone .drag-item {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            padding: 2px;
        }
        .drag-options-container {
            margin-top: 10px;
        }
        .drag-options-container .drag-item {
            display: block;
            width: fit-content;
            font-size: 15px;
            padding: 0.5px 10px;
            margin-bottom: 5px;
        }
        .drag-options-container .drag-item:last-child {
            margin-bottom: 0;
        }
        .q-number {
            color: #888;
            font-size: 14px;
            font-weight: bold;
        }
        .questions-container {
            width: 100%;
        }
        audio {
            width: 100%;
            margin-bottom: 20px;
        }
        .part-header {
            background-color: #f1f2ec;
            padding: 15px 20px;
            border: 1px solid #e0e0e0;
            text-align: left;
            margin: 10px 20px;
            border-radius: 5px;
        }
        .part-header p {
            margin: 0;
        }
        .part-header p:first-child {
            margin-bottom: 5px;
        }

        .question li.correct {
            color: #155724;
            font-weight: bold;
        }
        .question li.incorrect {
            color: #721c24;
        }
        .question li.correct::before {
            content: '✔ ';
            color: #28a745;
        }
        .question li.incorrect::before {
            content: '✖ ';
            color: #dc3545;
        }

        .example-box {
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .timer-container {
            display: flex;
            position: relative;
            cursor: default;
            color: #333;
            font-size: 16px;
            font-weight: 500;
            align-items: center;
        }
        .timer-container .timer-tooltip {
            display: none;
        }

        .timer-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 15px;
        }

        .timer-controls button {
            background: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 50%;
            padding: 0;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        .timer-controls button:hover {
            background: #e0e0e0;
        }

        .timer-controls button svg {
            width: 20px;
            height: 20px;
            fill: #333;
        }

        .audio-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(40, 40, 40, 0.9);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }
        .audio-modal-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            max-width: 500px;
            padding: 20px;
        }
        .audio-modal-content p {
            font-size: 16px;
            line-height: 1.5;
            color: #eee;
        }
        .audio-modal-icon {
            margin-bottom: 20px;
        }
        .modal-play-btn {
            background-color: #000;
            color: white;
            border: 1px solid white;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }
        .modal-play-btn:hover {
            background-color: #333;
        }
        #goto-widget {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #goto-input {
            width: 80px;
            padding: 4px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #goto-btn {
            padding: 4px 10px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Styles for TRUE/FALSE/NOT GIVEN questions */
        .tf-question {
            margin-bottom: 25px;
            padding: 10px 0px;
            border-radius: 4px;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .tf-question-line {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 5px 0px;
            border-radius: 4px;
        }
        .tf-question-number, .question-number-box {
            border: 2px solid #ccc;
            padding: 2px 8px;
            margin-right: 10px;
            border-radius: 3px;
            font-weight: bold;
            transition: border-color 0.3s;
            display: inline-block;
        }
        .tf-question-text {
            padding-top: 3px;
        }
        .tf-options {
            padding-left: 5px;
        }
        .tf-option {
            display: block;
            margin-bottom: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        .tf-option input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        .tf-question.correct .tf-question-line {
            background-color: #e9f7ef;
        }
        .tf-question.incorrect .tf-question-line {
            background-color: #f8d7da;
        }
        .matching-question-container {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        .matching-options-bank {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .matching-questions {
            flex: 1.5;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .matching-question-item {
            display: flex;
            align-items: center;
            gap: 15px;

            border: 2px solid transparent;
            border-radius: 4px;
            transition: border-color 0.3s;
        }
        .matching-question-item > span {
            flex: 1;
        }
        .matching-question-item.correct {
            background-color: #e9f7ef;
            border-color: #28a745 !important;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .matching-question-item .drop-zone {
            width: 200px;
            flex-shrink: 0;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #aaa;
        }
        .matching-options-bank .drag-item {
            font-size: 15px;
            text-align: center;
            border: 1px solid #ccc;
            background: #f9f9f9;
        }

        .questions-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
            border-left: 1px solid #e0e0e0;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .summary-completion-container {
            margin-top: 20px;
        }
        .summary-text p {
            line-height: 2.5;
            font-size: 16px;
        }
        .summary-drop-zone {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            vertical-align: middle;
            max-width:200px;
            height: 25px;
            border: 2px dashed #999;
            border-radius: 4px;
            margin: 0 5px;
            padding: 0 5px;
            transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s;
            color: #aaa;
            font-weight: bold;
        }
        .summary-drop-zone.filled {
            border-color: #4a90e2;
        }
        .summary-drop-zone.active-input {
             border-color: #4a90e2;
             box-shadow: none;
        }
        .summary-drop-zone .drag-item {
            font-size: 15px;
            font-weight: bold;
            background-color: transparent;
            border: none;
            padding: 0;
            text-align: center;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .summary-options-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .summary-options-bank .drag-item {
            flex-grow: 1;
            min-width: 100px;
            text-align: center;
        }
        .multi-choice-question {
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 4px;
            border: 3px solid transparent;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .multi-choice-option {
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .multi-choice-option label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 16px;
        }
        .multi-choice-option input[type="checkbox"],
        .multi-choice-option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.3);
            accent-color: #4a90e2;
        }
        .multi-choice-option.correct {
            background-color: #e9f7ef;
        }
        .multi-choice-option.incorrect {
            background-color: #f8d7da;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .matching-question-item .drop-zone.filled {
            border-color: #4a90e2;
        }
        .matching-question-item .drop-zone {
            width: 200px;
            height: 40px;
        }
        .paragraph-matching-question {
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 12px;
        }
        .paragraph-matching-question .answer-input {
            width: 80px;
            flex-shrink: 0;
        }

        .matching-form-container {
            margin-top: 20px;
        }
        .matching-form-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        .matching-form-label {
            width: 180px;
            flex-shrink: 0;
        }

        /* Results Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .modal-overlay.hidden {
            display: none;
        }
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .modal-close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #888;
        }
        .modal-content h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #333;
        }
        .results-summary {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        .results-details-container {
            overflow-y: auto;
            padding-right: 10px; /* For scrollbar */
        }
        .result-row {
            display: grid;
            grid-template-columns: 40px 1fr 1fr;
            gap: 15px;
            padding: 8px 5px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 15px;
        }
        .result-row.incorrect {
            background-color: #f8d7da;
        }
        .result-row .q-num {
            font-weight: bold;
        }
        .result-row .user-ans {
            color: #555;
        }
        .result-row .correct-ans {
            color: #155724;
            font-weight: 500;
        }
        .correct-answer-display {
            font-weight: bold;
            color: #28a745;
            margin-left: 10px;
            font-size: 14px;
        }
        .correct-answer-highlight, .tf-option.correct-answer-highlight, .multi-choice-option.correct-answer-highlight {
            background-color: #d4edda !important;
            border: 1px solid #c3e6cb !important;
            border-radius: 4px;
            padding: 4px;
        }
        .correct-answer-highlight {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
        }
        .centered-title {
    text-align: center;
    font-size: 50px;
    font-weight: bold;
    margin-bottom: 15px;
}
    </style>
</head>
<body>
    <div class="header">
        <div style="margin-bottom: 15px;">
    <label for="studentName"><strong>Enter Your Name:</strong></label>
    <input type="text" id="studentName" placeholder="Your name here" style="padding: 5px; width: 250px;">
</div>
        <div class="timer-container">
            <span class="timer-display">61:50</span>
            <div class="timer-controls">
                <button id="timer-toggle-btn" title="Pause/Resume Timer"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg></button>
                <button id="timer-reset-btn" title="Reset Timer">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"></path></svg>
                </button>
            </div>
        </div>
        <a href="https://t.me/shakhnozanorova" target="_blank" class="telegram-link">
            Shakhna Academy
        </a>

        
    </div>

    <div class="main-container" id="main-container">
        <div id="passage-header-container">
            <div id="part-header-1" class="part-header">
                <p><strong>Part 1</strong></p>
                <p>Read the text and answer <strong>Questions 1-13.</strong></p>
            </div>
            <div id="part-header-2" class="part-header hidden">
                <p><strong>Part 2</strong></p>
                <p>Read the text and answer <strong>Questions 14-26.</strong></p>
            </div>
            <div id="part-header-3" class="part-header hidden">
                <p><strong>Part 3</strong></p>
                <p>Read the text and answer <strong>Questions 27-40.</strong></p>
            </div>
        </div>
        <div class="panels-container">
            <div class="passage-panel" id="passage-panel">
             <div class="passage-panel" id="passage-panel">
  <div id="passage-text-1" class="reading-passage">
    <h2 class="text-center">Historical Impact of the California Gold Rush</h2>
    <p>The California Gold Rush of 1849—1855 radically transformed California and the USA. It prompted one of the largest migrations in US history, with hundreds of thousands of migrants across the USA and the globe traveling to California to find gold in the foothills of the Sierra Nevada mountains. This led to the establishment of boomtowns, rapid economic growth and prosperity, as well as the improvement of transport links. The significant increase in population and infrastructure allowed California to qualify for statehood in 1850, only a few years after the USA bought the territory from Mexico as part of the Treaty of Guadalupe Hidalgo.</p>
    
    <p>For all its significance, the onset of the Gold Rush originated from a seemingly insignificant event. In January 1848, James Marshall, a carpenter, was building a sawmill for John Sutter at Sutter's Fort, a trade and agricultural colony, when he spotted something shiny in the American River. Not sure of what he had found, he collected the apparent gold flecks and ran some rudimentary tests on them including biting them and hitting them with a hammer. When their appearance did not change, Marshall realized they were genuine gold and quickly notified John Sutter. Sensing that the discovery would negatively impact his business and bring a large number of people to his land, Sutter told his employees to keep the gold a secret. However, news of the discovery quickly got out and spread across the region. Soon, gold seekers arrived at Sutter's Fort, and just as Sutter had feared, his employees all left to look for gold.</p>
    
    <p>Within a few months, news of the gold discovery expanded beyond the region, with the Baltimore Sun becoming the first US newspaper to report on it in late summer. In the autumn, the New York Herald ran a subsequent story on the gold discovery and by December, President Polk announced to Congress that significant amounts of gold were being discovered in California. The year 1849 prompted a massive migration to California from many parts of the USA as well as places as far away as China, Chile, and France. The migrants, dubbed the "forty-niners" for the year of their trip, flocked to cities such as San Francisco and present-day Sacramento, which were experiencing rapid development. The population of San Francisco, for example, exploded from 500 in 1847 to more than 150,000 in 1852.</p>
    
    <p>With the massive influx of migrants, California underwent a radical transformation in a very short amount of time. It changed from a sparsely populated region to a territory with enough people to constitute a state. At the time, the population of California was still predominantly Mexican; however, the arrival of many US migrants quickly reshaped the local demographics. The newcomers often wanted to keep in touch with family around the USA and pushed for the development of new communication and transportation links. So the famed Pony Express was created to send mail and parcels from California to the Midwest within a two-week period using ponies, while a mail delivery service, the California Star Express, connected California with Missouri.</p>
    
    <p>Although the Gold Rush allowed some of the early miners to become rich, it was the ensuing economic development that sprang up around gold mining that would result in the greatest profits; the merchants who aimed to satisfy the needs of gold prospectors would ultimately become very wealthy. Not only did the Gold Rush lead to an explosion in the manufacturing of mining machinery and equipment for hydraulic operations, it also saw more of the leather goods and clothes that miners required being produced.</p>
    
    <p>The rapid development of agriculture—thanks to heightened demand and the availability of more sophisticated tools—was another major outcome of the Gold Rush. In fact, many who did not succeed in mining turned to California's "green gold," taking full advantage of the territory's favorable climate to produce massive amounts of fruits, vegetables, and grains to feed the expanding mining communities.</p>
    
    <p>The fervor surrounding the Gold Rush led to a revolution in transportation. At the time, California was relatively isolated, but improvements were made to the road network and the number of steamships being constructed increased. San Francisco, which experienced the largest economic boom at the time, saw its rapid modernization and economic development rewarded when it was chosen as the site for the western terminus for the first transcontinental railway, linking the east coast of the USA with California.</p>
    
    <p>The Gold Rush was not beneficial to all, however. It led to increased violence against Native Americans, while immigrants, who had come to California in the hope of making their fortunes, often experienced intense discrimination. Some Americans were convinced that immigrants were taking revenue and employment opportunities away from Americans and argued for restrictions on immigration and a tax on all foreign miners working in California. The Gold Rush also had a severe environmental impact. Rivers became clogged with sediment; forests were cut down; biodiversity was compromised, and soil was polluted with chemicals from the mining process.</p>
    
    <p>Despite these drawbacks, the Gold Rush had a lasting positive impact. It propelled significant industrial and agricultural development and helped shape California's future by turning it into an economic powerhouse.</p>
  </div>
</div>


          <div id="passage-text-2" class="reading-passage hidden">
  <h2 class="text-center">Saturn Spectacular</h2>
  <p style="text-align: center; font-style: italic;">Solving the puzzles of the ringed planet</p>

  <p><strong>A</strong> In 1610 the Italian astronomer Galileo pointed his crude telescope at the planet Saturn and was dumbfounded by what he saw: "The planet Saturn is not alone, but is composed of three, which almost touch each other, and never move or change with respect to one another." Even more surprising, the two bulging planets on either side of the main planet had disappeared when he looked again a few months later. Eventually, the frustrated Galileo decided never to look at Saturn again. Now, of course, we have much better telescopes, and we know that Galileo was looking at the planet's unique set of wide, thin rings. Seen broadside, they resembled companion planets through Galileo's weak lenses; later, seen edge-on, they shrank to nothingness. But nearly 500 years after Galileo's observations, Saturn still teases astronomers. Saturn's magnificent rings, for example, consist of trillions of pieces of ice, some no bigger than a speck of dust. The ring particles are so small that they could be expected to scatter and fall into the planet, yet they are still there. Scientists are unsure about the origin of the rings, their exact chemical composition, and why they behave in the way that they do.</p>

  <p><strong>B</strong> However, as spectacular as Saturn's rings are, the fuzzy orange ball of Saturn's giant moon Titan is even more interesting. Although it is larger than the planet Mercury, Titan probably resembles other large moons in the Solar System. It is a rock covered with ice and dirt. However, it has something no other moon has: a substantial atmosphere whose pressure is 50% greater than Earth's. Even more intriguing, Titan's atmosphere consists mainly of nitrogen (the primary component of our own air), mixed with carbon-based compounds. Cloaked in this atmosphere, Titan's surface may resemble the surface chemistry of the early Earth, but astronomers cannot see through the moon's maddeningly opaque orange fog.</p>

  <p><strong>C</strong> All sorts of Earth-like chemical interactions could happen on Titan. Scientists hesitate to speak of the possibility of life when they speak of Titan, but it is a distant possibility. Living on Titan would be no walk in the park. From the vantage point of the Saturn system, the sun is a rather dim bulb. Titan is therefore a very cold place. Surface temperatures average about -300 degrees Fahrenheit. At those temperatures, water is a rock and would flow only from volcanoes. Although Titan is half water, there is nowhere to get a drink. In addition, there is no oxygen in Titan's atmosphere—it is all locked up in water ice. The only hope for life as we know it, and it is an exceedingly slim one, is that water mixed with ammonia may get warm enough deep below the surface to liquefy. If so, life could possibly eke out an underground living much like the hardy microbes that surround Earth's hydrothermal vents (deep cracks on the seabed through which boiling water and hot gases escape).</p>

  <p><strong>D</strong> Titan could contain information on the prebiotic chemistry that led to life on Earth and perhaps elsewhere in the Universe. The bitterly cold temperatures that make Titan so forbidding for life in some ways make it more intriguing. Titan's chilly climate keeps things in a state of preservation, so that it can hang on to most of the substances that it has acquired during its 4.5 billion years in the Solar System. The organic reactions that may have established the starting conditions for life on the early Earth are long gone, erased by our planet's high-speed chemical and geologic evolution. On Titan, similar reactions may still be sitting in deep storage.</p>

  <p><strong>E</strong> Measured against its showy rings and haze-obscured moon, Saturn itself seems downright ordinary. Yet the 75,000-mile-wide planet—the second largest in the Solar System—holds some serious interest of its own. Like the planet Jupiter, Saturn is a gas giant: a relatively small ball of rock surrounded by a vast envelope of helium, hydrogen, and various hydrogen compounds. Saturn is only half as dense as Jupiter, even less dense than water. It releases less heat than Jupiter, but, given its smaller size, scientists are not sure why it radiates any heat at all. Saturn's storms are, surprisingly, more powerful than Jupiter's, and its jet streams are much faster. The planet looks blander, however, because a thick haze of ammonia crystals obscures the colorful banding seen so easily on Jupiter.</p>

  <p><strong>F</strong> Scientists hope that studying these differences will reveal how giant planets form, how weather systems work under different conditions, and what planets around other stars might be like. A recent spacecraft that investigated Saturn and Titan (the Cassini-Huygens probe) has produced results that Galileo would have dearly appreciated back in 1610: photographs that finally show Saturn with crystalline clarity. After all the data from Cassini-Huygens has been interpreted, even though that might take 40 years, all questions on these topics may have been answered once and for all.</p>
</div>


              <div id="passage-text-3" class="reading-passage hidden">
  <h2 class="text-center">Book Review</h2>
  <p style="text-align: center; font-style: italic;">
    False Prophets: The Gurus Who Created Modern Management and Why Their Ideas Are Bad for Business Today
    by James Hoopes
  </p>

  <p>James Hoopes is a historian who has written numerous books on business management. One of his best-known works is <em>False Prophets</em>, which covers the phenomenon of 'business management gurus' in the USA that started towards the end of the 19th century and has continued to the present. First and foremost, this book is a series of biographical sketches of the key business management thinkers, from Frederick Taylor (the 19th-century industrialist who created scientific management theory) to Peter Drucker (the academic accredited with founding modern management in the 1950s). However, the book also reads as a series of reviews or critiques of the various business management theories advanced by those gurus. This is where Hoopes' credibility wanes; he's prone to unsupported generalizations and seems to have his own agenda, ultimately promoting a theory of the proper role of management that is both ill-defined and also outside the scope of his biographical treatments.</p>

  <p>Hoopes traces the division of management theory into two broad schools: top-down, which emphasizes the power of the manager and concentrates on convincing (or forcing) workers to do what they don't want to do, and bottom-up, in which managers believe that the workers are the ones with the control and the best a manager can do is persuade them. Frederick Taylor, who pioneered a top-down style in the 1870s, is heavily criticized for embodying all the worst qualities of the bullying boss in his quest to improve efficiency. </p> 
  <p>Many of the management thinkers in the early part of the 20th century were also looking at how to improve efficiency. The husband and wife team Frank and Lillian Gilbreth and Henry Gantt (who advocated bonus pay, rather than threats, as a motivational tool) either tried to soften Taylor's tactics or disdained them altogether, while trying to combine efficient processes with consideration for the workers. Then there's Mary Parker Follett, the influential political theorist and philosopher. Along with Lillian Gilbreth, Follett represented a pioneering female voice in American business. Maybe more than any other business management guru, she added new, substantive theories, which are still reflected in management practice today.</p>

  <p>Looking across all the biographical sketches, we see that many of the gurus have a similar background, which allowed them to promote their management theories. Taylor and Frank Gilbreth each had inventions that helped give them the success and notoriety that in turn allowed them to advocate what were separate management theories (often, not surprisingly, theories that they in turn used to promote adoption of their inventions, with all the associated personal gain that entailed). Taylor and Follett undoubtedly leveraged their upper-class upbringings to ingratiate themselves with business owners.</p>

  <p>There is limited coverage of the more modern management theories. The history of W. Edwards Deming's public service for the U.S. government in the 1940s before he became a business guru is welcome, because many books about Deming omit or minimize that phase of his life. Hoopes sometimes gushes over Peter Drucker, who, along with Follett, is clearly one of his favorites of the gurus. What seems lacking in the biographical sketches, though, are detailed treatments of the most recent theories put forward by significant gurus such as Tom Peters and Jim Collins.</p>

  <p>Hoopes, refreshingly, does not try to hide his opinions about these people and pretend to be neutral: his biases are evident from the start. Hoopes labels Taylor "the demon," but he does not automatically give support to more humane management thinkers, either. Thus Elton Mayo, whose psychological approach to management inspired much of the bottom-up theories in the mid-20th century, is even more heavily criticized than Taylor. The Mayo chapter is one of the best, in part because Mayo's disciples gathered so much data that Hoopes can pick it apart and demonstrate with specificity how Mayo proffered theories that contradicted his own research findings.</p>

  <p>Hoopes' biographical approach—each guru gets his or her own chapter—has its pros and cons. On the one hand, the biographical details sometimes get in the way of the analysis: it remains an open question whether Hoopes dislikes Taylor and favors Mary Parker Follett for their different approaches to management theory, or because Taylor was a bully and Follett a nice person. But Hoopes' prose is clear and remarkably free of academic pretensions; he presents complicated ideas simply, but without condescension.</p>

  <p>So, let us turn to the more problematic part of Hoopes' book: the critiques of the management gurus' theories. It might help to break down the key theses that Hoopes advances, to better pinpoint where he goes wrong. Bottom-up management, he argues, is even worse than top-down; rather than limiting the potential abuses of managerial power, it cloaks such abuses in a false morality. He also argues that Americans believe in sociopolitical democracy but that most workplaces lack such democracy. He claims that top-down workplace hierarchies produce better results than democratic organization structures and concludes that people need to accept that top-down management power is necessary to some degree, though its importance is overstated by the management gurus. </p> 
  <p>Basically, this book sets out these theories, but it never gets around to proving (or disproving) most of them. It would be possible to make evidence-based analyses of each of these points but Hoopes does not even attempt to do so. Instead, he merely draws his own personal conclusions based on the anecdotes and observations contained in his biographical sketches.</p>
</div>


</div>
            <div class="resizer" id="resizer"></div>
            <div class="questions-panel" id="questions-panel">
                <div id="questions-1" class="question-set">
  <div class="questions-container">

    <!-- Questions 1–7: True / False / Not Given -->
    <div class="question" data-q-start="1" data-q-end="7">
      <div class="question-prompt">
        <p><strong>Questions 1–7</strong>: True / False / Not Given</p>
        <p>Do the following statements agree with the information given in Reading Passage 1?</p>
        <p>Write:</p>
        <ul>
          <li><strong>TRUE</strong> – if the statement agrees with the information</li>
          <li><strong>FALSE</strong> – if the statement contradicts the information</li>
          <li><strong>NOT GIVEN</strong> – if there is no information on this</li>
        </ul>
      </div>

      <div class="tf-question" data-q-start="1" data-q-end="1">
        <div class="tf-question-line"><span class="tf-question-number">1</span>
          <span class="tf-question-text">Few other migrations in the USA have been equal in size to that of the California Gold Rush.</span>
        </div>
        <div class="tf-options">
          <label class="tf-option"><input type="radio" name="q1" value="TRUE"> TRUE</label>
          <label class="tf-option"><input type="radio" name="q1" value="FALSE"> FALSE</label>
          <label class="tf-option"><input type="radio" name="q1" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question" data-q-start="2" data-q-end="2">
        <div class="tf-question-line"><span class="tf-question-number">2</span>
          <span class="tf-question-text">The population growth caused by the Gold Rush was a key factor in California becoming a state.</span>
        </div>
        <div class="tf-options">
          <label class="tf-option"><input type="radio" name="q2" value="TRUE"> TRUE</label>
          <label class="tf-option"><input type="radio" name="q2" value="FALSE"> FALSE</label>
          <label class="tf-option"><input type="radio" name="q2" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question" data-q-start="3" data-q-end="3">
        <div class="tf-question-line"><span class="tf-question-number">3</span>
          <span class="tf-question-text">It took a long time for the USA and Mexico to agree on a figure for the purchase of California.</span>
        </div>
        <div class="tf-options">
          <label class="tf-option"><input type="radio" name="q3" value="TRUE"> TRUE</label>
          <label class="tf-option"><input type="radio" name="q3" value="FALSE"> FALSE</label>
          <label class="tf-option"><input type="radio" name="q3" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question" data-q-start="4" data-q-end="4">
        <div class="tf-question-line"><span class="tf-question-number">4</span>
          <span class="tf-question-text">When gold was discovered, John Sutter was confident his staff would continue working for him.</span>
        </div>
        <div class="tf-options">
          <label class="tf-option"><input type="radio" name="q4" value="TRUE"> TRUE</label>
          <label class="tf-option"><input type="radio" name="q4" value="FALSE"> FALSE</label>
          <label class="tf-option"><input type="radio" name="q4" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question" data-q-start="5" data-q-end="5">
        <div class="tf-question-line"><span class="tf-question-number">5</span>
          <span class="tf-question-text">The New York Herald article gave details about the areas of California where gold had been found.</span>
        </div>
        <div class="tf-options">
          <label class="tf-option"><input type="radio" name="q5" value="TRUE"> TRUE</label>
          <label class="tf-option"><input type="radio" name="q5" value="FALSE"> FALSE</label>
          <label class="tf-option"><input type="radio" name="q5" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question" data-q-start="6" data-q-end="6">
        <div class="tf-question-line"><span class="tf-question-number">6</span>
          <span class="tf-question-text">The Pony Express was in operation in California before the Gold Rush.</span>
        </div>
        <div class="tf-options">
          <label class="tf-option"><input type="radio" name="q6" value="TRUE"> TRUE</label>
          <label class="tf-option"><input type="radio" name="q6" value="FALSE"> FALSE</label>
          <label class="tf-option"><input type="radio" name="q6" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question" data-q-start="7" data-q-end="7">
        <div class="tf-question-line"><span class="tf-question-number">7</span>
          <span class="tf-question-text">A large number of the people who failed to find gold became farmers.</span>
        </div>
        <div class="tf-options">
          <label class="tf-option"><input type="radio" name="q7" value="TRUE"> TRUE</label>
          <label class="tf-option"><input type="radio" name="q7" value="FALSE"> FALSE</label>
          <label class="tf-option"><input type="radio" name="q7" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>
    </div>

    <!-- Questions 8–13: Notes Completion -->
   <div class="question" data-q-start="8" data-q-end="13">
  <div class="question-prompt">
    <p><strong>Questions 8–13</strong>: Notes Completion</p>
    <p>Complete the notes below using <strong>ONE WORD ONLY</strong> from the passage.</p>
    <div style="text-align: center;"><strong>The California Gold Rush</strong></div>
    <p><strong>The first discovery of gold</strong></p>
    <p>- James Marshall was working on the construction of a <input type="text" class="answer-input" id="q8" placeholder="8"> when he found flecks of gold.</p>
    <p>- Marshall bit on the gold flecks and used a <input type="text" class="answer-input" id="q9" placeholder="9"> to check they were real.</p>
    <p>- John Sutter wanted the discovery to be a <input type="text" class="answer-input" id="q10" placeholder="10">.</p>
    <p>- The news soon spread.</p>
    <p><strong>1849</strong></p>
    <p>- Many people went to California in search of gold.</p>
    <p>- The population of California grew rapidly.</p>
    <p><strong>The Impact of the Gold Rush</strong></p>
    <p>- The largest <input type="text" class="answer-input" id="q11" placeholder="11"> were achieved by machine manufacturers and businesses supplying miners with items of clothing and products made from <input type="text" class="answer-input" id="q12" placeholder="12">.</p>
    <p>- The people supplying miners with food benefited from the area's <input type="text" class="answer-input" id="q13" placeholder="13">.</p>
  </div>
</div>


  </div>
</div>

               <div id="questions-2" class="question-set hidden">
  <div class="questions-container">

    <!-- List of Headings -->
    <div class="question" data-q-start="14" data-q-end="19">
      <div class="question-prompt">
        <p><strong>Questions 14–19</strong>: List of Headings</p>
        <p>Reading Passage 2 has six paragraphs, A–F.<br>
        Choose the correct heading for each paragraph from the list of headings below.<br>
        Write the correct number, <b>i–vii</b>, in boxes <b>14–19</b> on your answer sheet.</p>
      </div>

      <table border="1" cellpadding="8" cellspacing="0" style="border-collapse: collapse; margin-bottom: 15px;">
        <tr><td><b>i.</b> Comparing two planets</td></tr>
        <tr><td><b>ii.</b> A surprisingly small moon</td></tr>
        <tr><td><b>iii.</b> A longstanding puzzle</td></tr>
        <tr><td><b>iv.</b> Saturn’s fascinating moon</td></tr>
        <tr><td><b>v.</b> The importance of Titan’s gravity</td></tr>
        <tr><td><b>vi.</b> Expectations of possible solutions</td></tr>
        <tr><td><b>vii.</b> The problems for life on Titan</td></tr>
      </table>

      <div class="paragraph-matching-questions">
        <div style="display: flex; align-items: center; margin-bottom: 10px;">
          <input type="text" class="answer-input" id="q14" placeholder="14" style="width: 60px; margin-right: 15px;">
          <span>Paragraph A</span>
        </div>
        <div style="display: flex; align-items: center; margin-bottom: 10px;">
          <input type="text" class="answer-input" id="q15" placeholder="15" style="width: 60px; margin-right: 15px;">
          <span>Paragraph B</span>
        </div>
        <div style="display: flex; align-items: center; margin-bottom: 10px;">
          <input type="text" class="answer-input" id="q16" placeholder="16" style="width: 60px; margin-right: 15px;">
          <span>Paragraph C</span>
        </div>
        <div style="display: flex; align-items: center; margin-bottom: 10px;">
          <input type="text" class="answer-input" id="q17" placeholder="17" style="width: 60px; margin-right: 15px;">
          <span>Paragraph D</span>
        </div>
        <div style="display: flex; align-items: center; margin-bottom: 10px;">
          <input type="text" class="answer-input" id="q18" placeholder="18" style="width: 60px; margin-right: 15px;">
          <span>Paragraph E</span>
        </div>
        <div style="display: flex; align-items: center; margin-bottom: 10px;">
          <input type="text" class="answer-input" id="q19" placeholder="19" style="width: 60px; margin-right: 15px;">
          <span>Paragraph F</span>
        </div>
      </div>
    </div>

    <!-- Multiple Choice -->
    <div class="question" data-q-start="20" data-q-end="23">
  <div class="question-prompt">
    <p><strong>Questions 20–23</strong>: Multiple Choice</p>
    <p>Choose the correct letter, <strong>A, B, C, or D</strong>.</p>

    <!-- Question 20 -->
    <p><strong>20.</strong> What was the main reason many people moved to California in 1849?</p>
    <div class="multi-choice-options">
      <label><input type="radio" name="q20" value="A"> A To buy land cheaply</label><br>
      <label><input type="radio" name="q20" value="B"> B To search for gold</label><br>
      <label><input type="radio" name="q20" value="C"> C To start businesses</label><br>
      <label><input type="radio" name="q20" value="D"> D To work on construction projects</label>
    </div>

    <!-- Question 21 -->
    <p><strong>21.</strong> What did John Sutter want to happen after Marshall’s discovery?</p>
    <div class="multi-choice-options">
      <label><input type="radio" name="q21" value="A"> A He wanted to spread the news quickly</label><br>
      <label><input type="radio" name="q21" value="B"> B He wanted to keep it secret</label><br>
      <label><input type="radio" name="q21" value="C"> C He wanted to sell the land</label><br>
      <label><input type="radio" name="q21" value="D"> D He wanted to hire more workers</label>
    </div>

    <!-- Question 22 -->
    <p><strong>22.</strong> Which group made the largest profits during the Gold Rush?</p>
    <div class="multi-choice-options">
      <label><input type="radio" name="q22" value="A"> A The miners</label><br>
      <label><input type="radio" name="q22" value="B"> B The machine manufacturers</label><br>
      <label><input type="radio" name="q22" value="C"> C The transport companies</label><br>
      <label><input type="radio" name="q22" value="D"> D The local farmers</label>
    </div>

    <!-- Question 23 -->
    <p><strong>23.</strong> Why did food suppliers benefit during the Gold Rush?</p>
    <div class="multi-choice-options">
      <label><input type="radio" name="q23" value="A"> A Because food was cheap to produce</label><br>
      <label><input type="radio" name="q23" value="B"> B Because of the region’s fertile soil</label><br>
      <label><input type="radio" name="q23" value="C"> C Because miners paid with gold</label><br>
      <label><input type="radio" name="q23" value="D"> D Because they imported food from abroad</label>
    </div>
  </div>
</div>


    <!-- Summary Completion -->
    <div class="question" data-q-start="24" data-q-end="26">
      <div class="question-prompt">
        <p><strong>Questions 24–26</strong>: Summary Completion</p>
        <p>Complete the summary below.<br>
        Choose <b>ONE WORD ONLY</b> from the passage for each answer.<br>
        Write your answers in boxes <b>24–26</b> on your answer sheet.</p>
      </div>

      <p><b>The Cassini-Huygens Probe</b></p>
      <ul style="list-style: none; padding-left: 0;">
        <li><b>24</b> The Cassini-Huygens probe has produced clearer <input type="text" class="answer-input" id="q24" placeholder="24"> of Saturn.</li>
        <li><b>25</b> However, it may take up to <input type="text" class="answer-input" id="q25" placeholder="25"> before all the data from the probe has been analysed.</li>
        <li><b>26</b> It is expected that this data will assist in the investigation of the way <input type="text" class="answer-input" id="q26" placeholder="26"> function, and the nature of other planets and stars.</li>
      </ul>
    </div>

  </div>
</div>

               <div id="questions-3" class="question-set hidden">
  <div class="questions-container">

    <!-- Questions 27–30 -->
    <div class="question" data-q-start="27" data-q-end="30">
      <div class="question-prompt">
        <p><strong>Questions 27–30</strong><br>
          Choose the correct letter, <b>A</b>, <b>B</b>, <b>C</b>, or <b>D</b>.<br>
          Write the correct letter in boxes <b>27–30</b> on your answer sheet.
        </p>
      </div>

      <div class="multi-choice-question">
        <p><b>27.</b> What is the reviewer doing in the first paragraph?</p>
        <div class="multi-choice-options">
          <label><input type="radio" name="q27" value="A"> A defining terms used in the book</label><br>
          <label><input type="radio" name="q27" value="B"> B outlining the approach taken by Hoopes</label><br>
          <label><input type="radio" name="q27" value="C"> C comparing different management theories</label><br>
          <label><input type="radio" name="q27" value="D"> D summarising Hoopes' key ideas</label>
        </div>
      </div>

      <div class="multi-choice-question">
        <p><b>28.</b> The reviewer uses the phrase 'credibility wanes' in the first paragraph to suggest that Hoopes</p>
        <div class="multi-choice-options">
          <label><input type="radio" name="q28" value="A"> A over-simplifies management theories</label><br>
          <label><input type="radio" name="q28" value="B"> B is relying on evidence which is out of date</label><br>
          <label><input type="radio" name="q28" value="C"> C is not qualified to discuss management theory</label><br>
          <label><input type="radio" name="q28" value="D"> D does not provide adequate evidence to validate his arguments</label>
        </div>
      </div>

      <div class="multi-choice-question">
        <p><b>29.</b> How did the Gilbreths and Henry Gantt differ from Frederick Taylor?</p>
        <div class="multi-choice-options">
          <label><input type="radio" name="q29" value="A"> A They placed less emphasis on motivation</label><br>
          <label><input type="radio" name="q29" value="B"> B They were less convinced by the need for worker productivity</label><br>
          <label><input type="radio" name="q29" value="C"> C They had a more sympathetic approach to the workers</label><br>
          <label><input type="radio" name="q29" value="D"> D They defined efficiency in a different way</label>
        </div>
      </div>

      <div class="multi-choice-question">
        <p><b>30.</b> The reviewer claims that Mary Parker Follett</p>
        <div class="multi-choice-options">
          <label><input type="radio" name="q30" value="A"> A was the best-known female management theorist of her generation</label><br>
          <label><input type="radio" name="q30" value="B"> B put forward a greater number of theories than her male counterparts</label><br>
          <label><input type="radio" name="q30" value="C"> C made a significant contribution to the development of management theory</label><br>
          <label><input type="radio" name="q30" value="D"> D was responsible for promoting the rights of women in the workplace</label>
        </div>
      </div>
    </div>

    <!-- Questions 31–35 -->
    <div class="question" data-q-start="31" data-q-end="35">
      <div class="question-prompt">
        <p><strong>Questions 31–35</strong><br>
          Do the following statements agree with the claims of the writer in Reading Passage?<br>
          In boxes <b>31–35</b> on your answer sheet, write:
        </p>
        <ul style="list-style: none; padding-left: 0;">
          <li><b>YES</b> – if the statement agrees with the claims of the writer</li>
          <li><b>NO</b> – if the statement contradicts the claims of the writer</li>
          <li><b>NOT GIVEN</b> – if it is impossible to say what the writer thinks about this</li>
        </ul>
      </div>

      <div class="tf-question">
        <div class="tf-question-line"><span class="tf-question-number">31</span> Hoopes should have made an effort to present less biased opinions of the gurus described.</div>
        <div class="tf-options">
          <label><input type="radio" name="q31" value="YES"> YES</label>
          <label><input type="radio" name="q31" value="NO"> NO</label>
          <label><input type="radio" name="q31" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question">
        <div class="tf-question-line"><span class="tf-question-number">32</span> Hoopes devotes less attention to the gurus he dislikes, such as Taylor.</div>
        <div class="tf-options">
          <label><input type="radio" name="q32" value="YES"> YES</label>
          <label><input type="radio" name="q32" value="NO"> NO</label>
          <label><input type="radio" name="q32" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question">
        <div class="tf-question-line"><span class="tf-question-number">33</span> Hoopes exposes the limitations of Mayo's arguments.</div>
        <div class="tf-options">
          <label><input type="radio" name="q33" value="YES"> YES</label>
          <label><input type="radio" name="q33" value="NO"> NO</label>
          <label><input type="radio" name="q33" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question">
        <div class="tf-question-line"><span class="tf-question-number">34</span> Hoopes' view of Mayo is in line with that of other management commentators.</div>
        <div class="tf-options">
          <label><input type="radio" name="q34" value="YES"> YES</label>
          <label><input type="radio" name="q34" value="NO"> NO</label>
          <label><input type="radio" name="q34" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question">
        <div class="tf-question-line"><span class="tf-question-number">35</span> It is unclear why Hoopes prefers Follett to Taylor.</div>
        <div class="tf-options">
          <label><input type="radio" name="q35" value="YES"> YES</label>
          <label><input type="radio" name="q35" value="NO"> NO</label>
          <label><input type="radio" name="q35" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>
    </div>

    <!-- Questions 36–40 -->
    <div class="question" data-q-start="36" data-q-end="40">
      <div class="question-prompt">
        <p><strong>Questions 36–40</strong><br>
          Complete the summary using the list of words, <b>A–I</b>, below.<br>
          Write the correct letter, <b>A–I</b>, in boxes <b>36–40</b> on your answer sheet.
        </p>

        <p><b>Top-down and bottom-up management theory</b></p>

        <p>
          Hoopes is critical of both top-down and bottom-up management theories. He believes that while the bottom-up approach claims to be more humane and principled, it is actually just as 
          <input type="text" class="answer-input" id="q36" placeholder="36" style="width: 60px; display: inline-block;"> 
          as top-down management. In his view, very few working environments are genuinely 
          <input type="text" class="answer-input" id="q37" placeholder="37" style="width: 60px; display: inline-block;">, 
          and while top-down systems are ultimately more 
          <input type="text" class="answer-input" id="q38" placeholder="38" style="width: 60px; display: inline-block;"> 
          in terms of results, top-down management power is not as 
          <input type="text" class="answer-input" id="q39" placeholder="39" style="width: 60px; display: inline-block;"> 
          as the gurus maintain. Unfortunately, the information which Hoopes presents to support these views is entirely 
          <input type="text" class="answer-input" id="q40" placeholder="40" style="width: 60px; display: inline-block;">, 
          and he fails to offer any evidence-based analysis.
        </p>

        <p>
          <b>Word List:</b>  
          A misleading &nbsp;&nbsp;  
          B abusive &nbsp;&nbsp;  
          C significant &nbsp;&nbsp;  
          D successful &nbsp;&nbsp;  
          E democratic &nbsp;&nbsp;  
          F impractical &nbsp;&nbsp;  
          G detailed &nbsp;&nbsp;  
          H positive &nbsp;&nbsp;  
          I subjective
        </p>
      </div>
    </div>

  </div>
</div>


            </div>
        </div>
    </div>

    <!-- Navigation Arrows -->
    <div class="nav-arrows">
        <button class="nav-arrow" onclick="previousQuestion()" id="prevBtn">‹</button>
        <button class="nav-arrow" onclick="nextQuestion()" id="nextBtn">›</button>
    </div>

    <!-- Bottom Navigation -->
    <nav class="nav-row perScorableItem" aria-label="Questions">
        <div class="footer__questionWrapper___1tZ46 multiple selected" role="tablist">
            <button role="tab" class="footer__questionNo___3WNct" onclick="switchToPart(1)">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">1</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 13</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(1)"><span class="sr-only">Question 1</span><span aria-hidden="true">1</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(2)"><span class="sr-only">Question 2</span><span aria-hidden="true">2</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(3)"><span class="sr-only">Question 3</span><span aria-hidden="true">3</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(4)"><span class="sr-only">Question 4</span><span aria-hidden="true">4</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(5)"><span class="sr-only">Question 5</span><span aria-hidden="true">5</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(6)"><span class="sr-only">Question 6</span><span aria-hidden="true">6</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(7)"><span class="sr-only">Question 7</span><span aria-hidden="true">7</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(8)"><span class="sr-only">Question 8</span><span aria-hidden="true">8</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(9)"><span class="sr-only">Question 9</span><span aria-hidden="true">9</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(10)"><span class="sr-only">Question 10</span><span aria-hidden="true">10</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(11)"><span class="sr-only">Question 11</span><span aria-hidden="true">11</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(12)"><span class="sr-only">Question 12</span><span aria-hidden="true">12</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(13)"><span class="sr-only">Question 13</span><span aria-hidden="true">13</span></button>
            </div>
        </div>
        
        <div class="footer__questionWrapper___1tZ46 multiple" role="tablist">
            <button role="tab" class="footer__questionNo___3WNct" onclick="switchToPart(2)">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">2</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 13</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(14)"><span class="sr-only">Question 14</span><span aria-hidden="true">14</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(15)"><span class="sr-only">Question 15</span><span aria-hidden="true">15</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(16)"><span class="sr-only">Question 16</span><span aria-hidden="true">16</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(17)"><span class="sr-only">Question 17</span><span aria-hidden="true">17</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(18)"><span class="sr-only">Question 18</span><span aria-hidden="true">18</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(19)"><span class="sr-only">Question 19</span><span aria-hidden="true">19</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(20)"><span class="sr-only">Question 20</span><span aria-hidden="true">20</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(21)"><span class="sr-only">Question 21</span><span aria-hidden="true">21</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(22)"><span class="sr-only">Question 22</span><span aria-hidden="true">22</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(23)"><span class="sr-only">Question 23</span><span aria-hidden="true">23</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(24)"><span class="sr-only">Question 24</span><span aria-hidden="true">24</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(25)"><span class="sr-only">Question 25</span><span aria-hidden="true">25</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(26)"><span class="sr-only">Question 26</span><span aria-hidden="true">26</span></button>
            </div>
        </div>
        
        <div class="footer__questionWrapper___1tZ46 multiple" role="tablist">
            <button role="tab" class="footer__questionNo___3WNct" onclick="switchToPart(3)">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">3</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 14</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(27)"><span class="sr-only">Question 27</span><span aria-hidden="true">27</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(28)"><span class="sr-only">Question 28</span><span aria-hidden="true">28</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(29)"><span class="sr-only">Question 29</span><span aria-hidden="true">29</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(30)"><span class="sr-only">Question 30</span><span aria-hidden="true">30</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(31)"><span class="sr-only">Question 31</span><span aria-hidden="true">31</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(32)"><span class="sr-only">Question 32</span><span aria-hidden="true">32</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(33)"><span class="sr-only">Question 33</span><span aria-hidden="true">33</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(34)"><span class="sr-only">Question 34</span><span aria-hidden="true">34</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(35)"><span class="sr-only">Question 35</span><span aria-hidden="true">35</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(36)"><span class="sr-only">Question 36</span><span aria-hidden="true">36</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(37)"><span class="sr-only">Question 37</span><span aria-hidden="true">37</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(38)"><span class="sr-only">Question 38</span><span aria-hidden="true">38</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(39)"><span class="sr-only">Question 39</span><span aria-hidden="true">39</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(40)"><span class="sr-only">Question 40</span><span aria-hidden="true">40</span></button>
            </div>
        </div>
        
        <button id="deliver-button" aria-label="Review your answers" class="footer__deliverButton___3FM07">
            <i class="fa fa fa-check" aria-hidden="true"></i>
            <span>Check Answers</span>
        </button>
    </nav>

    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu">
        <div id="menu-highlight" class="context-menu-item" onclick="highlightText()">
            Highlight
        </div>
        <div id="menu-note" class="context-menu-item" onclick="addNote()">
            Note
        </div>
        <div id="menu-clear" class="context-menu-item" onclick="clearHighlight()">
            Clear
        </div>
        <div id="menu-clear-all" class="context-menu-item" onclick="clearAllHighlights()">
            Clear All
        </div>
    </div>

   <div id="results-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <button class="modal-close-btn" onclick="closeResultsModal()">×</button>
        <div id="results-header"></div> <!-- This will show {Name} Your Results -->
        <div class="results-summary">
            <p>Score: <span id="results-score"></span> / 40</p>
            <p>IELTS Band: <span id="results-band"></span></p>
        </div>
        <div id="results-details" class="results-details-container"></div>
    </div>
</div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- STATE VARIABLES ---
        let currentPassage = 1;
        let currentQuestion = 1;
        let selectedRange = null;
        let timeInSeconds = 3600;
        let timerInterval;
        let draggedItem = null;
        let activeQuestionElement = null;
        let selectedDragItem = null;

        // --- DOM ELEMENTS ---
        const timerDisplay = document.querySelector('.timer-display');
        const timerToggleButton = document.getElementById('timer-toggle-btn');
        const timerResetButton = document.getElementById('timer-reset-btn');
        const deliverButton = document.getElementById('deliver-button');
        const resizer = document.getElementById('resizer');
        const passagePanel = document.getElementById('passage-panel');
        const questionsPanel = document.getElementById('questions-panel');
        const contextMenu = document.getElementById('contextMenu');

        // --- ICON SVGs ---
        const playIcon = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M8 5v14l11-7L8 5z"/></svg>';
        const pauseIcon = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>';

        // --- ANSWERS ---
      const correctAnswers = { 
'1':'TRUE','2':'TRUE','3':'NOT GIVEN','4':'FALSE','5':'NOT GIVEN','6':'FALSE','7':'TRUE',
'8':'sawmill','9':'hammer','10':'secret','11':'profits','12':'leather','13':'climate',
'14':'III','15':'IV','16':'VII','17':'VIII','18':'I','19':'VI',
'20':'C','21':'D','22':'C','23':'C','24':'photographs','25':'40 years','26':'weather systems',
'27':'B','28':'D','29':'C','30':'C','31':'NOT GIVEN','32':'NO','33':'YES','34':'NOT GIVEN','35':'YES',
'36':'B','37':'E','38':'D','39':'C','40':'I' 
};



        // --- INITIALIZATION ---
        function initialize() {
            startTimer();
            initializeDragAndDrop();
            setupCheckboxLimits();
            setupExampleHeading();
            switchToPart(1); // Also calls goToQuestion(1) and updateNavigation
            
            document.body.addEventListener('input', updateAllIndicators);
            document.body.addEventListener('change', updateAllIndicators);
            deliverButton.addEventListener('click', checkAnswers);
            timerToggleButton.addEventListener('click', toggleTimer);
            timerResetButton.addEventListener('click', resetTimer);

            // Add click listeners to question containers for navigation
            document.querySelectorAll('[data-q-start]').forEach(el => {
                el.addEventListener('click', () => {
                    const qNum = parseInt(el.dataset.qStart, 10);
                    if (currentQuestion !== qNum) {
                        goToQuestion(qNum);
                    }
                });
            });

            resizer.addEventListener('mousedown', initResize, false);
            initializeContextMenu();
        }

        // --- CORE TEST LOGIC ---

        function checkAnswers() {
            // Disable all inputs to prevent changes
            const allInputs = document.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                input.disabled = true;
            });

            // Disable submit button
            deliverButton.disabled = true;
            deliverButton.style.cursor = 'not-allowed';
            
            clearInterval(timerInterval);
            let score = 0;
            const studentName = document.getElementById('studentName')?.value.trim() || "No Name Given";
            const totalQuestions = 40;
            const resultsDetailsContainer = document.getElementById('results-details');
            resultsDetailsContainer.innerHTML = '';

            document.querySelectorAll('.correct, .incorrect, .correct-answer-highlight').forEach(el => {
                el.classList.remove('correct', 'incorrect', 'correct-answer-highlight');
            });
            document.querySelectorAll('.correct-answer-display').forEach(el => el.remove());

            for (let i = 1; i <= totalQuestions; i++) {
                const questionKey = String(i);
                const correctAnswer = correctAnswers[questionKey];
                let userAnswer = '';
                let isCorrect = false;
                
                let userAnswerDisplay = 'Not Answered';
                const correctAnswerText = Array.isArray(correctAnswer) ? correctAnswer.join(' / ') : correctAnswer;

                const textInput = document.getElementById(`q${i}`);
                const radioGroup = document.querySelectorAll(`input[name="q${i}"][type="radio"]`);
                
                // Handle Text and Select Inputs
                if (textInput && (textInput.tagName === 'INPUT' || textInput.tagName === 'SELECT')) {
                    const element = textInput.closest('.matching-form-row') || textInput;
                    userAnswer = textInput.value.trim();
                    userAnswerDisplay = userAnswer || 'Not Answered';

                    if (textInput.tagName === 'SELECT') {
                        isCorrect = userAnswer === correctAnswer;
                    } else {
                        isCorrect = Array.isArray(correctAnswer) ?
                            correctAnswer.some(ans => userAnswer.toLowerCase() === ans.toLowerCase()) :
                            userAnswer.toLowerCase() === correctAnswer.toLowerCase();
                    }
                    
                    if (isCorrect) {
                        score++;
                        element.classList.add('correct');
                    } else {
                        element.classList.add('incorrect');
                        const correctAnswerSpan = document.createElement('span');
                        correctAnswerSpan.className = 'correct-answer-display';
                        correctAnswerSpan.innerHTML = `&nbsp;➜&nbsp;<span class="correct-answer-highlight">${correctAnswerText}</span>`;
                        textInput.parentNode.insertBefore(correctAnswerSpan, textInput.nextSibling);
                    }
                }
                // Handle Radio Button Inputs (T/F, MCQs)
                else if (radioGroup.length > 0) {
                    const questionContainer = radioGroup[0].closest('.tf-question') || radioGroup[0].closest('.multi-choice-question');
                    const checkedRadio = document.querySelector(`input[name="q${i}"]:checked`);

                    if (checkedRadio) {
                        userAnswer = checkedRadio.value;
                        userAnswerDisplay = userAnswer;
                        isCorrect = userAnswer === correctAnswer;

                        const userLabel = checkedRadio.closest('.tf-option, .multi-choice-option');
                        if (userLabel) {
                            userLabel.classList.add(isCorrect ? 'correct' : 'incorrect');
                        }
                    }

                    if (isCorrect) {
                        score++;
                    } else {
                        if (questionContainer){
                            const correctOptionEl = questionContainer.querySelector(`input[value="${correctAnswerText}"]`);
                            if (correctOptionEl) {
                                const correctLabel = correctOptionEl.closest('.tf-option, .multi-choice-option');
                                if (correctLabel) {
                                    correctLabel.classList.add('correct-answer-highlight');
                                }
                            }
                        }
                    }
                }
                // Handle Checkbox Groups (e.g., questions 21-22)
                else if (i === 21 || i === 22) {
                    // For questions 21-22, check if the user selected the correct combination
                    const checkedBoxes = document.querySelectorAll('input[name="q21-22"]:checked');
                    const userAnswers = Array.from(checkedBoxes).map(cb => cb.value).sort();
                    const correctAnswers21_22 = ['B', 'D']; // The correct answers for questions 21-22
                    
                    if (i === 21) {
                        // Only check once for the pair
                        userAnswerDisplay = userAnswers.length > 0 ? userAnswers.join(', ') : 'Not Answered';
                        isCorrect = userAnswers.length === 2 && 
                                   userAnswers.every(ans => correctAnswers21_22.includes(ans)) &&
                                   correctAnswers21_22.every(ans => userAnswers.includes(ans));
                        
                        if (isCorrect) {
                            score += 2; // Both questions are correct
                            // Mark both questions as correct in nav
                            const nav21 = document.querySelector(`.subQuestion[onclick="goToQuestion(21)"]`);
                            const nav22 = document.querySelector(`.subQuestion[onclick="goToQuestion(22)"]`);
                            if (nav21) nav21.classList.add('correct');
                            if (nav22) nav22.classList.add('correct');
                        } else {
                            // Mark both as incorrect in nav
                            const nav21 = document.querySelector(`.subQuestion[onclick="goToQuestion(21)"]`);
                            const nav22 = document.querySelector(`.subQuestion[onclick="goToQuestion(22)"]`);
                            if (nav21) nav21.classList.add('incorrect');
                            if (nav22) nav22.classList.add('incorrect');
                        }
                        
                        // Visual feedback on checkboxes
                        checkedBoxes.forEach(cb => {
                            const option = cb.closest('.multi-choice-option');
                            if (correctAnswers21_22.includes(cb.value)) {
                                option.classList.add('correct');
                            } else {
                                option.classList.add('incorrect');
                            }
                        });
                        
                        // Show correct answers if user got it wrong
                        if (!isCorrect) {
                            correctAnswers21_22.forEach(correctVal => {
                                const correctCheckbox = document.querySelector(`input[name="q21-22"][value="${correctVal}"]`);
                                if (correctCheckbox && !correctCheckbox.checked) {
                                    correctCheckbox.closest('.multi-choice-option').classList.add('correct-answer-highlight');
                                }
                            });
                        }
                    } else if (i === 22) {
                        // Skip individual processing for question 22 since it's handled with 21
                        userAnswerDisplay = 'See Q21';
                        const nav21 = document.querySelector(`.subQuestion[onclick="goToQuestion(21)"]`);
                        isCorrect = nav21 && nav21.classList.contains('correct');
                        continue; // Skip the rest of processing for Q22
                    }
                }
                 
                // For showing results in the modal
                 const resultRow = `
                    <div class="result-row ${isCorrect ? '' : 'incorrect'}">
                        <span class="q-num">${i}</span>
                        <span class="user-ans">${userAnswerDisplay}</span>
                        <span class="correct-ans">${correctAnswerText}</span>
                    </div>`;
                resultsDetailsContainer.innerHTML += resultRow;
                
                // Update nav button color
                const navButton = document.querySelector(`.subQuestion[onclick="goToQuestion(${i})"]`);
                if (navButton) {
                    navButton.classList.remove('answered', 'active');
                    navButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
            }

 const bandScore = calculateBandScore(score);
document.getElementById('results-header').innerHTML = `<strong>${studentName}</strong> — Your Results<br>
You scored ${score} out of 40 (Band ${bandScore}).`;

document.getElementById('results-modal').classList.remove('hidden');

        }

        function calculateBandScore(score) {
            if (score >= 39) return '9.0';
            const mapping = {
                40: 9.0, 39: 9.0, 38: 8.5, 37: 8.5, 36: 8.0, 35: 8.0, 34: 7.5,
                33: 7.5, 32: 7.0, 31: 7.0, 30: 7.0, 29: 6.5, 28: 6.5, 27: 6.5,
                26: 6.0, 25: 6.0, 24: 6.0, 23: 5.5, 22: 5.5, 21: 5.5, 20: 5.5,
                19: 5.0, 18: 5.0, 17: 5.0, 16: 5.0, 15: 5.0, 14: 4.5, 13: 4.5,
                12: 4.0, 11: 4.0, 10: 4.0, 9: 3.5, 8: 3.5, 7: 3.0, 6: 3.0,
                5: 2.5, 4: 2.5
            };
            if (score <= 0) return 0.0;
            if (score === 1) return 1.0;
            if (score <= 3) return 2.0;
            if (score <= 5) return 2.5;
            return mapping[score] || 0.0;
        }

        function getUserAnswer(qNum) {
            const textInput = document.getElementById(`q${qNum}`);
            const radioInput = document.querySelector(`input[name="q${qNum}"]:checked`);
            const dropZone = document.querySelector(`.drop-zone[data-q-start="${qNum}"]`);

            if (textInput) { // Handles <input type="text"> and <select>
                return { value: textInput.value, text: textInput.value || 'N/A' };
            }
            if (radioInput) {
                return { value: radioInput.value, text: radioInput.value };
            }
            if (dropZone) {
                const droppedItem = dropZone.querySelector('.drag-item');
                return { 
                    value: droppedItem ? droppedItem.dataset.value : null, 
                    text: droppedItem ? droppedItem.textContent.trim() : 'N/A' 
                };
            }
            return { value: null, text: 'N/A' };
        }

        function displayCorrectAnswer(qNum, correctAnswer) {
            // Handle multi-choice group questions (e.g., 38-40)
            if (qNum >= 38 && qNum <= 40) {
                 const correctAnswersArr = Array.isArray(correctAnswer) ? correctAnswer : [correctAnswer];
                 correctAnswersArr.forEach(ansValue => {
                    const correctInput = document.querySelector(`input[name="q38-40"][value="${ansValue}"]`);
                    correctInput?.closest('.multi-choice-option')?.classList.add('correct-answer-highlight');
                 });
                 return;
            }

            // Handle radio button questions by highlighting the correct label
            const correctRadioInput = document.querySelector(`input[name="q${qNum}"][value="${correctAnswer}"]`);
            if (correctRadioInput) {
                const parentOption = correctRadioInput.closest('.tf-option, .multi-choice-option');
                if (parentOption) {
                    parentOption.classList.add('correct-answer-highlight');
                    return;
                }
            }

            // Handle text inputs, select dropdowns, and others by showing the answer next to them
            const inputEl = document.getElementById(`q${qNum}`);
            if (inputEl) {
                const displaySpan = document.createElement('span');
                displaySpan.className = 'correct-answer-display';
                displaySpan.textContent = ` ✓ ${correctAnswer}`;
                inputEl.insertAdjacentElement('afterend', displaySpan);
                return; // Done
            }
            
            // Fallback for questions identified by a container (e.g., some T/F/NG questions)
            const element = findQuestionElement(qNum);
            if (element) {
                const displaySpan = document.createElement('span');
                displaySpan.className = 'correct-answer-display';
                displaySpan.textContent = ` ✓ ${correctAnswer}`;
                const itemContainer = element.querySelector('.tf-question-text');
                if (itemContainer) {
                     itemContainer.appendChild(displaySpan);
                } else {
                     element.appendChild(displaySpan);
                }
            }
        }
        
        function findQuestionElement(qNum) {
             return document.querySelector(`[data-q-start="${qNum}"]`);
        }

        function addResultToModal(qNum, userAnswer, correctAnswer, isCorrect) {
            const resultsDetails = document.getElementById('results-details');
            const row = document.createElement('div');
            row.className = 'result-row';
            if (!isCorrect) {
                row.classList.add('incorrect');
            }
            row.innerHTML = `
                <span class="q-num">${qNum}</span>
                <span class="user-ans">${userAnswer}</span>
                <span class="correct-ans">${correctAnswer}</span>
            `;
            resultsDetails.appendChild(row);
        }

        function showResultsModal() {
            document.getElementById('results-modal').classList.remove('hidden');
        }

        window.closeResultsModal = function() {
            document.getElementById('results-modal').classList.add('hidden');
        }
        
        function disableInputs() {
            deliverButton.innerHTML = `<span>Checked! View Results.</span>`;
            deliverButton.removeEventListener('click', checkAnswers);
            deliverButton.onclick = showResultsModal;

            document.querySelectorAll('input, select').forEach(el => {
                el.disabled = true;
                 if (el.matches('input[type=radio], input[type=checkbox]')) {
                     el.style.cursor = 'not-allowed';
                     el.parentElement.style.cursor = 'not-allowed';
                 }
            });
            document.querySelectorAll('.drag-item').forEach(el => {
                el.setAttribute('draggable', 'false');
                el.style.cursor = 'default';
            });
            document.querySelectorAll('.drop-zone').forEach(el => {
                el.classList.add('disabled');
            });
        }

        function checkValue(userValue, correctValue) {
            if (userValue === null || userValue === undefined) return false;
            const formattedUserValue = userValue.trim().toLowerCase();
            if (Array.isArray(correctValue)) {
                return correctValue.map(v => v.toLowerCase()).includes(formattedUserValue);
            } else {
                return formattedUserValue === String(correctValue).toLowerCase();
            }
        }

        function markQuestion(qNum, isCorrect) {
            const subQuestionBtn = document.querySelector(`.subQuestion[onclick="goToQuestion(${qNum})"]`);
            subQuestionBtn?.classList.add(isCorrect ? 'correct' : 'incorrect');

            const elementsToMark = [
                document.querySelector(`.tf-question[data-q-start="${qNum}"]`),
                document.querySelector(`.multi-choice-question[data-q-start="${qNum}"]`),
                document.querySelector(`.matching-question-item[data-q-start="${qNum}"]`),
                document.querySelector(`.drop-zone[data-q-start="${qNum}"]`),
                document.getElementById(`q${qNum}`),
                document.querySelector(`input[name="q${qNum}"]:checked`)?.closest('.tf-option'),
                document.querySelector(`input[name="q${qNum}"]:checked`)?.closest('.multi-choice-option')
            ];
            
            elementsToMark.forEach(el => {
                if (el) el.classList.add(isCorrect ? 'correct' : 'incorrect');
            });

             if (qNum === 14 || qNum === 15) {
                const multiChoiceContainer = document.querySelector('.multi-choice-question[data-q-start="14"]');
                if (multiChoiceContainer) multiChoiceContainer.classList.add(isCorrect ? 'correct' : 'incorrect');
             } else if (qNum >= 1 && qNum <= 5) {
                const pMatchInput = document.getElementById(`q${qNum}`);
                if (pMatchInput) pMatchInput.classList.add(isCorrect ? 'correct' : 'incorrect');
             } else if (qNum >= 38 && qNum <= 40) {
                // For this group, individual options are marked, not the container.
             }
        }

        function switchToPart(partNumber, goToQ = null) {
            currentPassage = partNumber;

            // Hide all passages and questions
            document.querySelectorAll('.reading-passage, .question-set, .part-header').forEach(el => {
                el.classList.add('hidden');
            });

            // Show the correct passage, questions, and header
            document.getElementById(`passage-text-${partNumber}`).classList.remove('hidden');
            document.getElementById(`questions-${partNumber}`).classList.remove('hidden');
            document.getElementById(`part-header-${partNumber}`).classList.remove('hidden');

            // Update bottom navigation 'selected' state
            document.querySelectorAll('.footer__questionWrapper___1tZ46').forEach((wrapper, index) => {
                wrapper.classList.toggle('selected', (index + 1) === partNumber);
            });

            // Go to the specified question or the first question of the part
            const firstQuestionOfPart = {1: 1, 2: 14, 3: 27}[partNumber];
            goToQuestion(goToQ !== null ? goToQ : firstQuestionOfPart);
        }
        
        function goToQuestion(questionNumber) {
            // Prevent unnecessary recursion: if already at the right passage and question, do nothing
            if (currentQuestion === questionNumber) {
                let passageNumber = 1;
                if (questionNumber >= 14 && questionNumber <= 26) passageNumber = 2;
                else if (questionNumber >= 27) passageNumber = 3;
                if (currentPassage === passageNumber) {
                    return;
                }
            }

            currentQuestion = questionNumber;

            let passageNumber = 1;
            if (questionNumber >= 14 && questionNumber <= 26) passageNumber = 2;
            else if (questionNumber >= 27) passageNumber = 3;

            if (currentPassage !== passageNumber) {
                switchToPart(passageNumber, questionNumber);
                return;
            }

            if (activeQuestionElement) {
                activeQuestionElement.classList.remove('active-question', 'active-input');
            }

            let targetEl = document.querySelector(`[data-q-start="${questionNumber}"]`);

            if (targetEl) {
                activeQuestionElement = targetEl;
                 if (targetEl.matches('input[type="text"]') || targetEl.matches('select')) {
                     targetEl.classList.add('active-input');
                 } else {
                     targetEl.classList.add('active-question');
                 }
                 scrollIntoViewIfNeeded(targetEl);
            } else {
                 const pMatch = document.querySelector(`.paragraph-matching-question select[id="q${questionNumber}"]`);
                 if(pMatch) {
                    activeQuestionElement = pMatch;
                    pMatch.classList.add('active-input');
                    scrollIntoViewIfNeeded(pMatch);
                 }
            }

            updateNavigation();
        }
        
        // --- UI & NAVIGATION ---

        function updateNavigation() {
            const navButtons = document.querySelectorAll('.subQuestion');
            navButtons.forEach(btn => btn.classList.remove('active'));
            const activeNav = document.querySelector(`.subQuestion[onclick="goToQuestion(${currentQuestion})"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }

            const inputs = document.querySelectorAll('.answer-input, .drop-zone.filled, .summary-drop-zone.filled');
            inputs.forEach(input => input.classList.remove('active-input'));
            
            const activeInput = document.getElementById(`q${currentQuestion}`);
            if (activeInput) {
                activeInput.classList.add('active-input');
                if (typeof activeInput.focus === 'function') {
                    activeInput.focus();
                }
            } else {
                const activeQuestionBlock = document.querySelector(`[data-q-start="${currentQuestion}"]`);
                if (activeQuestionBlock) {
                    const firstInput = activeQuestionBlock.querySelector('input, select');
                    if(firstInput) {
                        firstInput.classList.add('active-input');
                         if (typeof firstInput.focus === 'function') {
                            firstInput.focus();
                        }
                    }
                }
            }
        }
        
        function selectDragItem(item) {
            if (selectedDragItem) {
                selectedDragItem.classList.remove('selected');
            }
            selectedDragItem = item;
            if (selectedDragItem) {
                selectedDragItem.classList.add('selected');
            }
        }
        
        window.nextQuestion = () => currentQuestion < 40 && goToQuestion(currentQuestion + 1);
        window.previousQuestion = () => currentQuestion > 1 && goToQuestion(currentQuestion - 1);

        function updateAllIndicators() {
            updateAttemptedCount(1, 1, 13);
            updateAttemptedCount(2, 14, 26);
            updateAttemptedCount(3, 27, 40);
            updateAnsweredNav();
        }
        
        function updateAnsweredNav() {
            const navButtons = document.querySelectorAll('.subQuestion');
            navButtons.forEach(btn => {
                const qNum = parseInt(btn.textContent, 10);
                if (isQuestionAnswered(qNum)) {
                    btn.classList.add('answered');
                } else {
                    btn.classList.remove('answered');
                }
            });
        }
        
        function isQuestionAnswered(qNum) {
            // Special handling for questions 21-22 checkbox group
            if (qNum === 21 || qNum === 22) {
                const checkedBoxes = document.querySelectorAll('input[name="q21-22"]:checked');
                return checkedBoxes.length > 0;
            }
            
            const textInput = document.getElementById(`q${qNum}`);
            if (textInput && (textInput.value.trim() !== '' || (textInput.classList.contains('drop-zone') && textInput.children.length > 0))) {
                return true;
            }
            const radio = document.querySelector(`input[name="q${qNum}"]:checked`);
            if (radio) {
                return true;
            }
            const checkbox = document.querySelector(`input[name="q${qNum}"]:checked`);
            if (checkbox) {
                return true;
            }
            return false;
        }

        function scrollIntoViewIfNeeded(element) {
            const panel = element.closest('.questions-panel, .passage-panel');
            const panelRect = panel.getBoundingClientRect();
            const elementRect = element.getBoundingClientRect();
            if (elementRect.top < panelRect.top || elementRect.bottom > panelRect.bottom) {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        // --- DRAG AND DROP ---
        
        function initializeDragAndDrop() {
            document.querySelectorAll('.drag-item').forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
                item.addEventListener('click', () => selectDragItem(item));
            });
            document.querySelectorAll('.drop-zone, .drag-options-container').forEach(zone => {
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('dragleave', handleDragLeave);
                zone.addEventListener('drop', handleDrop);
            });
        }

        function handleDragStart(e) {
            draggedItem = e.target;
            setTimeout(() => e.target.classList.add('dragging'), 0);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            draggedItem = null;
        }

        function handleDragOver(e) {
            e.preventDefault();
            const targetZone = e.currentTarget;
            if (draggedItem && draggedItem.dataset.dndGroup === targetZone.dataset.dndGroup) {
                targetZone.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            const targetZone = e.currentTarget;
            targetZone.classList.remove('drag-over');

            if (!draggedItem || draggedItem.dataset.dndGroup !== targetZone.dataset.dndGroup) {
                return;
            }

            const sourceZone = draggedItem.parentElement;
            if (sourceZone === targetZone) return; // Prevent dropping on itself

            const existingItemInTarget = targetZone.classList.contains('drop-zone') 
                ? targetZone.querySelector('.drag-item') 
                : null;

            // First, clear the target drop-zone of any text (like question numbers) before adding the new item.
            if (targetZone.classList.contains('drop-zone')) {
                Array.from(targetZone.childNodes).forEach(node => {
                    if (node.nodeType === Node.TEXT_NODE) {
                        node.remove();
                    }
                });
            }

            // Move the item that was in the target (if any) to the source zone.
            if (existingItemInTarget) {
                sourceZone.appendChild(existingItemInTarget);
            }
            
            // Finally, move the dragged item to the target zone.
            targetZone.appendChild(draggedItem);
            targetZone.classList.add('filled');

            // After the move, clean up the source zone if it's a drop-zone and is now empty.
            if (sourceZone.classList.contains('drop-zone') && !sourceZone.querySelector('.drag-item')) {
                 sourceZone.classList.remove('filled');
                 const qNum = sourceZone.dataset.qStart;
                 sourceZone.innerText = qNum; // Restore the question number
            }
            
            updateAllIndicators();
        }
        
        // --- MISC HELPERS ---
        
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval); // Ensure no multiple intervals
            timerInterval = setInterval(() => {
                timeInSeconds--;
                const minutes = Math.floor(timeInSeconds / 60);
                const seconds = timeInSeconds % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                if (timeInSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "Time's up!";
                    // checkAnswers(); // Disabled to prevent modal from opening automatically.
                }
            }, 1000);
            timerToggleButton.innerHTML = pauseIcon;
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            timerToggleButton.innerHTML = playIcon;
        }

        function toggleTimer() {
            // Check based on the icon currently displayed
            if (timerToggleButton.innerHTML.includes('M6 19h4V5H6v14z')) { // Check for pause icon shape
                pauseTimer();
            } else {
                startTimer();
            }
        }

        function resetTimer() {
            timeInSeconds = 3600;
            updateTimerDisplay();
            startTimer();
            timerToggleButton.innerHTML = pauseIcon;
        }
        
        function setupCheckboxLimits() {
            const checkboxGroups = [
                { name: 'q21-22', limit: 2 },
                { name: 'q38-40', limit: 3 }
            ];
            checkboxGroups.forEach(group => {
                const checkboxes = document.querySelectorAll(`input[name="${group.name}"]`);
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        const checkedCount = document.querySelectorAll(`input[name="${group.name}"]:checked`).length;
                        if (checkedCount > group.limit) checkbox.checked = false;
                        updateAllIndicators();
                    });
                });
            });
        }

        function setupExampleHeading() {
            const exampleBox = document.querySelector('.example-box');
            if(exampleBox){
                const title = document.createElement('p');
                title.style.fontWeight = 'bold';
                title.textContent = 'List of Statements';
                // exampleBox.insertBefore(title, exampleBox.firstChild);
            }
        }
        
        function initResize(e) {
            e.preventDefault();
            const startX = e.clientX;
            const startWidth = passagePanel.offsetWidth;
            
            const doDrag = (e) => {
                const newWidth = startWidth + e.clientX - startX;
                if (newWidth > 200 && (document.body.clientWidth - newWidth - resizer.offsetWidth) > 200) {
                    passagePanel.style.flex = `0 0 ${newWidth}px`;
                }
            };
            const stopDrag = () => {
                window.removeEventListener('mousemove', doDrag, false);
                window.removeEventListener('mouseup', stopDrag, false);
            };
            
            window.addEventListener('mousemove', doDrag, false);
            window.addEventListener('mouseup', stopDrag, false);
        }
        
        // --- CONTEXT MENU (Highlighting) ---
        
        // --- HIGHLIGHT FEATURE ---
        function initializeContextMenu() {
            const panels = [passagePanel, questionsPanel];
            let highlightBtn = null;
            let removeHighlightBtn = null;
            let highlightTarget = null;

            // Helper to remove floating buttons
            function removeFloatingButtons() {
                if (highlightBtn && highlightBtn.parentNode) highlightBtn.parentNode.removeChild(highlightBtn);
                if (removeHighlightBtn && removeHighlightBtn.parentNode) removeHighlightBtn.parentNode.removeChild(removeHighlightBtn);
                highlightBtn = null;
                removeHighlightBtn = null;
                highlightTarget = null;
            }

            // Show highlight button near selection
            document.addEventListener('mouseup', (e) => {
                setTimeout(() => { // Wait for selection to update
                    const selection = window.getSelection();
                    if (selection && !selection.isCollapsed && selection.toString().trim().length > 0) {
                        const range = selection.getRangeAt(0);
                        if (panels.some(panel => panel.contains(range.commonAncestorContainer))) {
                            // Don't show highlight button if selection is within an existing highlight that has a remove button
                            const selectionParentHighlight = range.commonAncestorContainer.nodeType === Node.TEXT_NODE 
                                ? range.commonAncestorContainer.parentElement?.closest('.highlight')
                                : range.commonAncestorContainer.closest?.('.highlight');
                            
                            if (selectionParentHighlight && removeHighlightBtn && highlightTarget === selectionParentHighlight) {
                                // Selection is within the highlight that already has a remove button, don't interfere
                                return;
                            }
                            
                            removeFloatingButtons();
                            highlightBtn = document.createElement('button');
                            highlightBtn.textContent = 'Highlight';
                            highlightBtn.style.position = 'absolute';
                            highlightBtn.style.zIndex = 9999;
                            highlightBtn.style.background = '#ffe066';
                            highlightBtn.style.border = '1px solid #aaa';
                            highlightBtn.style.padding = '2px 10px';
                            highlightBtn.style.borderRadius = '4px';
                            highlightBtn.style.cursor = 'pointer';
                            // Position button near selection
                            const rect = range.getBoundingClientRect();
                            highlightBtn.style.left = `${window.scrollX + rect.left}px`;
                            highlightBtn.style.top = `${window.scrollY + rect.top - 30}px`;
                            document.body.appendChild(highlightBtn);
                            highlightBtn.onclick = function() {
                                const span = document.createElement('span');
                                span.className = 'highlight';
                                span.style.background = '#ffe066';
                                span.appendChild(range.extractContents());
                                range.insertNode(span);
                                removeFloatingButtons();
                                window.getSelection().removeAllRanges();
                            };
                        } else {
                            removeFloatingButtons();
                        }
                    } else {
                        removeFloatingButtons();
                    }
                }, 10);
            });

            // Use event delegation for highlight removal
            panels.forEach(panel => {
                panel.addEventListener('click', (e) => {
                    const highlightEl = e.target.closest('.highlight');
                    if (highlightEl) {
                        // Prevent double creation
                        if (removeHighlightBtn && highlightTarget === highlightEl) return;
                        removeFloatingButtons();
                        removeHighlightBtn = document.createElement('button');
                        removeHighlightBtn.textContent = 'Remove Highlight';
                        removeHighlightBtn.style.position = 'absolute';
                        removeHighlightBtn.style.zIndex = 9999;
                        removeHighlightBtn.style.background = '#ffb3b3';
                        removeHighlightBtn.style.border = '1px solid #aaa';
                        removeHighlightBtn.style.padding = '2px 10px';
                        removeHighlightBtn.style.borderRadius = '4px';
                        removeHighlightBtn.style.cursor = 'pointer';
                        const rect = highlightEl.getBoundingClientRect();
                        removeHighlightBtn.style.left = `${window.scrollX + rect.left}px`;
                        removeHighlightBtn.style.top = `${window.scrollY + rect.top - 30}px`;
                        document.body.appendChild(removeHighlightBtn);
                        highlightTarget = highlightEl;
                        removeHighlightBtn.addEventListener('click', function(ev) {
                            ev.stopPropagation();
                            // Unwrap highlight
                            const parent = highlightTarget.parentNode;
                            while (highlightTarget.firstChild) {
                                parent.insertBefore(highlightTarget.firstChild, highlightTarget);
                            }
                            parent.removeChild(highlightTarget);
                            parent.normalize();
                            removeFloatingButtons();
                        });
                    }
                });
            });

            // Remove floating buttons on scroll or click elsewhere
            document.addEventListener('scroll', removeFloatingButtons, true);
            document.addEventListener('mousedown', (e) => {
                // Delay removal so highlight click handler can run first
                setTimeout(() => {
                    if ((removeHighlightBtn && removeHighlightBtn.contains(e.target)) || (highlightBtn && highlightBtn.contains(e.target))) {
                        return;
                    }
                    if (e.target.closest('.highlight')) return;
                    removeFloatingButtons();
                }, 0);
            });
        }

        function closeContextMenu() {
            contextMenu.style.display = 'none';
            selectedRange = null; // Clear range after menu closes
        }

        function unwrapElement(element) {
            const parent = element.parentNode;
            if (!parent) return;
            while (element.firstChild) {
                parent.insertBefore(element.firstChild, element);
            }
            parent.removeChild(element);
            parent.normalize();
        }

        window.highlightText = () => {
            if (selectedRange && !selectedRange.collapsed) {
                const span = document.createElement('span');
                span.className = 'highlight';
                span.appendChild(selectedRange.extractContents());
                selectedRange.insertNode(span);
            }
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        window.addNote = () => {
            const note = prompt('Enter your note:');
            if (note && selectedRange && !selectedRange.collapsed) {
                const span = document.createElement('span');
                span.className = 'comment-highlight';
                const tooltip = document.createElement('span');
                tooltip.className = 'comment-tooltip';
                tooltip.textContent = note;
                span.appendChild(selectedRange.extractContents());
                span.appendChild(tooltip);
                selectedRange.insertNode(span);
            }
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        window.clearHighlight = () => {
             const elementToClear = contextMenu.targetElementForClear;
             if (elementToClear) {
                 unwrapElement(elementToClear);
             }
             closeContextMenu();
             window.getSelection().removeAllRanges();
        };
        
        window.clearAllHighlights = () => {
            document.querySelectorAll('.highlight, .comment-highlight').forEach(unwrapElement);
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        function updateAttemptedCount(part, startQ, endQ) {
            let answeredCount = 0;
            for (let i = startQ; i <= endQ; i++) {
                if (isQuestionAnswered(i)) {
                    answeredCount++;
                }
            }
            const partHeader = document.querySelector(`.footer__questionNo___3WNct[onclick="switchToPart(${part})"]`);
            if (partHeader) {
                const countSpan = partHeader.querySelector('.attemptedCount');
                if (countSpan) {
                     countSpan.textContent = `${answeredCount} of ${endQ - startQ + 1}`;
                }
            }
        }

        // --- GLOBAL FUNCTION EXPOSURE ---
        window.nextQuestion = nextQuestion;
        window.previousQuestion = previousQuestion;
        window.goToQuestion = goToQuestion;
        window.switchToPart = switchToPart;
        window.closeResultsModal = closeResultsModal;
        window.highlightText = highlightText;
        window.addNote = addNote;
        window.clearHighlight = clearHighlight;
        window.clearAllHighlights = clearAllHighlights;

        // --- START THE APP ---
        initialize();
    });
    </script>

</body></html>