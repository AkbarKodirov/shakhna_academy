<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Full Reading Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            line-height: 1.4;
            font-size: 16px;
        }



        .header {
            background-color: #ffffff;
            padding: 12px 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            height: 60px;
        }

        .ielts-logo {
            display: none;
        }

        .test-info {
            display: flex;
            align-items: center;
            gap: 30px;
            font-size: 14px;
            color: #333;
        }

        .audio-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
        }

        .audio-icon {
            width: 16px;
            height: 16px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg>') no-repeat center;
        }

        .header-icons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .telegram-link {
            color: #0088cc;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .telegram-link:hover {
            text-decoration: underline;
        }

        .telegram-link::before {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: currentColor;
            -webkit-mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-1.37.2-1.64l16.56-6.4c.75-.29 1.4.22 1.2.94l-2.67 12.61c-.22.95-1.13 1.18-1.78.73l-4.5-3.32l-2.23 2.15c-.47.44-1.29.21-1.48-.37z"/></svg>');
            mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-1.37.2-1.64l16.56-6.4c.75-.29 1.4.22 1.2.94l-2.67 12.61c-.22.95-1.13 1.18-1.78.73l-4.5-3.32l-2.23 2.15c-.47.44-1.29.21-1.48-.37z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
        }

        #volume-slider {
            -webkit-appearance: none;
            width: 80px;
            height: 4px;
            background: #ddd;
            outline: none;
            border-radius: 2px;
            cursor: pointer;
        }

        #volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #333;
            cursor: pointer;
        }

        #volume-slider::-moz-range-thumb {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #333;
            cursor: pointer;
            border: none;
        }

        .icon {
            width: 20px;
            height: 20px;
            cursor: pointer;
            opacity: 0.7;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .icon:hover {
            opacity: 1;
        }
        
        #play-pause-btn {
            background: none;
            border: none;
            padding: 0;
        }

        .main-container {
            margin-top: 60px;
            display: flex;
            flex-direction: column;
            background: #ffffff;
            height: calc(100vh - 60px); /* Full height minus header */
        }

        .panels-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .passage-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
        }

        /* Passage Content */
        .text-center {
            text-align: center;
        }
        .reading-passage h4 {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
       
        .reading-passage p {
            margin-bottom: 1.2em;
        }

        .question ul li label {
            display: block;
            margin-top: 8px;
            cursor: pointer;
        }

        .questions-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
            border-left: 1px solid #e0e0e0;
        }

        .resizer {
            width: 10px;
            cursor: col-resize;
            background-color: #f0f0f0;
            background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="30" viewBox="0 0 10 30"><path d="M4 11h2v2H4zM4 15h2v2H4zM4 19h2v2H4z" fill="%23888"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
            flex-shrink: 0;
            flex-grow: 0;
        }

        /* Left Panel */
        .left-panel {
            width: 100%;
            padding: 20px;
        }

        /* Right Panel */
        .right-panel {
            display: none;
            width: 50%;
            padding: 20px;
            position: relative;
        }

        .help-button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 20px;
        }

        .help-button:hover {
            background: #357abd;
        }

        .section-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .people-section {
            margin-bottom: 30px;
        }

        .people-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #ccc;
        }

        .people-table th {
            text-align: left;
            padding: 10px;
            font-weight: bold;
            border: 1px solid #ddd;
        }

        .people-table td {
            padding: 8px 10px;
            border: 1px solid #ddd;
        }

        .person-name {
            font-size: 16px;
        }

        .question-number {
            background: white;
            border: 1px solid #4a90e2;
            padding: 4px 8px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 14px;
            color: #4a90e2;
            min-width: 30px;
            text-align: center;
        }

        .assigned-responsibility {
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 14px;
            border: 1px solid #ddd;
        }

        .responsibilities-section {
            margin-bottom: 30px;
        }

        .responsibility-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .responsibility-item {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            text-align: center;
            transition: all 0.2s;
        }

        .responsibility-item:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .responsibility-item.dragging {
            opacity: 0.5;
        }

        .questions-section {
            margin-bottom: 20px;
        }

        .question-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .instruction {
            margin-bottom: 20px;
            font-size: 16px;
            color: #666;
        }

        /* Map Styles */
        .map-container {
            position: relative;
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }

        .map-svg {
            border: 2px solid #333;
            background: white;
        }

        .map-room {
            fill: #f9f9f9;
            stroke: #333;
            stroke-width: 1;
        }

        .map-text {
            font-family: Arial, sans-serif;
            font-size: 13px;
            text-anchor: middle;
            fill: #333;
        }

        .map-number {
            font-family: Arial, sans-serif;
            font-size: 16px;
            font-weight: bold;
            text-anchor: middle;
            fill: #333;
        }

        .room-labels {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .room-label {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            text-align: center;
            transition: all 0.2s;
        }

        .room-label:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .room-label.dragging {
            opacity: 0.5;
        }

        /* Navigation Arrows */
        .nav-arrows {
            position: fixed;
            bottom: 100px;
            right: 20px;
            display: flex;
            gap: 5px;
            z-index: 101;
        }

        .nav-arrow {
            width: 50px;
            height: 50px;
            background: #333;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
        }

        .nav-arrow:hover {
            background: #555;
        }

        .nav-arrow:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Bottom Navigation - Exact Match */
        .nav-row {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #ffffff;
        
            padding: 0;
            display: flex;
            align-items: center;
            height: 80px;
            z-index: 100;
        }

        .footer__questionWrapper___1tZ46 {
            display: flex;
            align-items: center;
            margin-right: 20px;
        }


        .footer__questionNo___3WNct {
            background: none;
            border: none;
            padding: 10px 15px;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: background-color 0.2s;
        }

        .footer__questionNo___3WNct:hover {
            background-color: #f8f9fa;
        }

        .section-prefix {
            font-size: 16px;
        }

        .sectionNr {
            font-size: 16px;
            font-weight: bold;
        }

        .attemptedCount {
            font-size: 14px;
            color: #666;
            margin-left: 5px;
            font-weight: 400; /* Normal weight */
        }

        @media (max-width: 768px) {
            .attemptedCount {
                display: none;
            }
        }

        .footer__questionWrapper___1tZ46.selected .attemptedCount {
            display: none;
        }

        .footer__subquestionWrapper___9GgoP {
            display: none;
            gap: 2px;
            margin-left: 10px;
        }

        .footer__questionWrapper___1tZ46.selected .footer__subquestionWrapper___9GgoP {
            display: flex;
        }

        .subQuestion {
            width: 32px;
            height: 32px;
            border: 1px solid #ccc;
            background: white;
            color: #333;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            border-radius: 2px;
        }

        .subQuestion.answered {
            background-color: #e9ecef;
            border-color: #ddd;
        }
        .subQuestion.correct {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }
        .subQuestion.incorrect {
            background-color: #dc3545;
            color: white;
            border-color: #dc3545;
        }

        .subQuestion:hover {
            background-color: #f0f0f0;
            border-color: #999;
        }

        .subQuestion.active {
            background-color: #4a90e2;
            color: white;
            border-color: #4a90e2;
        }

        .subQuestion.completed {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .footer__deliverButton___3FM07 {
            margin-left: auto;
            margin-right: 20px;
            background-color: #f0f0f0;
            color: #333;
            border: 1px solid #ccc;
            padding: 12px 20px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s, border-color 0.2s;
            min-width: 170px;
            justify-content: center;
        }

        .footer__deliverButton___3FM07:hover {
            background-color: #e0e0e0;
            border-color: #bbb;
        }

        .footer__deliverButton___3FM07:disabled {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
            border-color: #ddd;
        }

        .fa-check::before {
            content: "✓";
        }

        .hidden {
            display: none !important;
        }

        /* Context Menu */
        .context-menu {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
            min-width: 140px;
        }

        .context-menu-item {
            padding: 12px 16px;
            cursor: pointer;
            font-size: 16px;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .context-menu-item:hover {
            background-color: #f8f9fa;
        }

        .context-menu-item:last-child {
            border-bottom: none;
        }

        .highlight {
            background-color: #ffff00;
        }

        .comment-highlight {
            background-color: #90EE90;
            position: relative;
            cursor: help;
        }

        .comment-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            white-space: nowrap;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .comment-highlight:hover .comment-tooltip {
            opacity: 1;
        }

        .question {
            margin-bottom: 40px;
        }
        .question p {
            margin-bottom: 10px;
        }
        .question ul, .question .people-table {
            margin-top: 0;
        }
        .question-prompt {
            margin-bottom: 20px;
        }
        .question ul {
            list-style: none;
            padding-left: 0;
        }
        .question ul li {
            margin-bottom: 5px;
        }
        .answer-input {
            border: 1px solid #888;
            border-radius: 4px;
            background-color: #fff;
            padding: 2px 5px;
            font-size: 16px;
            text-align: center;
            margin-right: 4px;
            margin-left: 4px;
            transition: border-color 0.3s, box-shadow 0.3s;
            height: 28px; /* Standard height */
            width: 150px; /* Standard width */
        }
        .answer-input.active-input {
            border-color: #4a90e2;
            box-shadow: 0 0 3px 1px rgba(74, 144, 226, 0.5);
        }
        .answer-input::placeholder {
            color: #999;
            font-weight: bold;
            text-align: center;
        }
        .answer-input.correct {
            border-color: #28a745;
            background-color: #e9f7ef;
        }
        .answer-input.incorrect {
            border-color: #dc3545;
            background-color: #f8d7da;
            color: #721c24;
        }
        .answer-input {
    z-index: 10;
    position: relative;
    pointer-events: auto;
}
        .drag-drop-container {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            align-items: flex-start;
        }
        .recommendations-box {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
            min-height: 200px;
        }
        .drag-item {
            background: white;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            transition: all 0.2s;
            user-select: none;
        }
        .drag-item:hover {
            background: #e9ecef;
        }
        .drag-item.dragging {
            opacity: 0.5;
        }
        .drag-item.selected {
            border-color: #4a90e2;
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.5);
        }
        .drop-zone {
            border: 2px dashed #aaa;
            border-radius: 4px;
            width: 50%;
            margin-top: 19px;
            margin-bottom: 5px;
            transition: background-color 0.2s, border-color 0.2s;
            padding: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .drop-zone.drag-over {
            background-color: #e6f4ff;
            border-color: #4a90e2;
        }
        .drop-zone.correct {
            background-color: #e9f7ef;
            border-color: #28a745;
            border-style: solid;
        }
        .drop-zone.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            border-style: solid;
        }
        .drop-zone.disabled {
            pointer-events: none;
        }
        .drop-zone .drag-item {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            padding: 2px;
        }
        .drag-options-container {
            margin-top: 10px;
        }
        .drag-options-container .drag-item {
            display: block;
            width: fit-content;
            font-size: 15px;
            padding: 0.5px 10px;
            margin-bottom: 5px;
        }
        .drag-options-container .drag-item:last-child {
            margin-bottom: 0;
        }
        .q-number {
            color: #888;
            font-size: 14px;
            font-weight: bold;
        }
        .questions-container {
            width: 100%;
        }
        audio {
            width: 100%;
            margin-bottom: 20px;
        }
        .part-header {
            background-color: #f1f2ec;
            padding: 15px 20px;
            border: 1px solid #e0e0e0;
            text-align: left;
            margin: 10px 20px;
            border-radius: 5px;
        }
        .part-header p {
            margin: 0;
        }
        .part-header p:first-child {
            margin-bottom: 5px;
        }

        .question li.correct {
            color: #155724;
            font-weight: bold;
        }
        .question li.incorrect {
            color: #721c24;
        }
        .question li.correct::before {
            content: '✔ ';
            color: #28a745;
        }
        .question li.incorrect::before {
            content: '✖ ';
            color: #dc3545;
        }

        .example-box {
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .timer-container {
            display: flex;
            position: relative;
            cursor: default;
            color: #333;
            font-size: 16px;
            font-weight: 500;
            align-items: center;
        }
        .timer-container .timer-tooltip {
            display: none;
        }

        .timer-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 15px;
        }

        .timer-controls button {
            background: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 50%;
            padding: 0;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        .timer-controls button:hover {
            background: #e0e0e0;
        }

        .timer-controls button svg {
            width: 20px;
            height: 20px;
            fill: #333;
        }

        .audio-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(40, 40, 40, 0.9);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }
        .audio-modal-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            max-width: 500px;
            padding: 20px;
        }
        .audio-modal-content p {
            font-size: 16px;
            line-height: 1.5;
            color: #eee;
        }
        .audio-modal-icon {
            margin-bottom: 20px;
        }
        .modal-play-btn {
            background-color: #000;
            color: white;
            border: 1px solid white;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }
        .modal-play-btn:hover {
            background-color: #333;
        }
        #goto-widget {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #goto-input {
            width: 80px;
            padding: 4px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #goto-btn {
            padding: 4px 10px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Styles for TRUE/FALSE/NOT GIVEN questions */
        .tf-question {
            margin-bottom: 25px;
            padding: 10px 0px;
            border-radius: 4px;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .tf-question-line {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 5px 0px;
            border-radius: 4px;
        }
        .tf-question-number, .question-number-box {
            border: 2px solid #ccc;
            padding: 2px 8px;
            margin-right: 10px;
            border-radius: 3px;
            font-weight: bold;
            transition: border-color 0.3s;
            display: inline-block;
        }
        .tf-question-text {
            padding-top: 3px;
        }
        .tf-options {
            padding-left: 5px;
        }
        .tf-option {
            display: block;
            margin-bottom: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        .tf-option input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        .tf-question.correct .tf-question-line {
            background-color: #e9f7ef;
        }
        .tf-question.incorrect .tf-question-line {
            background-color: #f8d7da;
        }
        .matching-question-container {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        .matching-options-bank {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .matching-questions {
            flex: 1.5;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .matching-question-item {
            display: flex;
            align-items: center;
            gap: 15px;

            border: 2px solid transparent;
            border-radius: 4px;
            transition: border-color 0.3s;
        }
        .matching-question-item > span {
            flex: 1;
        }
        .matching-question-item.correct {
            background-color: #e9f7ef;
            border-color: #28a745 !important;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .matching-question-item .drop-zone {
            width: 200px;
            flex-shrink: 0;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #aaa;
        }
        .matching-options-bank .drag-item {
            font-size: 15px;
            text-align: center;
            border: 1px solid #ccc;
            background: #f9f9f9;
        }

        .questions-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
            border-left: 1px solid #e0e0e0;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .summary-completion-container {
            margin-top: 20px;
        }
        .summary-text p {
            line-height: 2.5;
            font-size: 16px;
        }
        .summary-drop-zone {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            vertical-align: middle;
            max-width:200px;
            height: 25px;
            border: 2px dashed #999;
            border-radius: 4px;
            margin: 0 5px;
            padding: 0 5px;
            transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s;
            color: #aaa;
            font-weight: bold;
        }
        .summary-drop-zone.filled {
            border-color: #4a90e2;
        }
        .summary-drop-zone.active-input {
             border-color: #4a90e2;
             box-shadow: none;
        }
        .summary-drop-zone .drag-item {
            font-size: 15px;
            font-weight: bold;
            background-color: transparent;
            border: none;
            padding: 0;
            text-align: center;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .summary-options-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .summary-options-bank .drag-item {
            flex-grow: 1;
            min-width: 100px;
            text-align: center;
        }
        .multi-choice-question {
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 4px;
            border: 3px solid transparent;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .multi-choice-option {
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .multi-choice-option label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 16px;
        }
        .multi-choice-option input[type="checkbox"],
        .multi-choice-option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.3);
            accent-color: #4a90e2;
        }
        .multi-choice-option.correct {
            background-color: #e9f7ef;
        }
        .multi-choice-option.incorrect {
            background-color: #f8d7da;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .matching-question-item .drop-zone.filled {
            border-color: #4a90e2;
        }
        .matching-question-item .drop-zone {
            width: 200px;
            height: 40px;
        }
        .paragraph-matching-question {
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 12px;
        }
        .paragraph-matching-question .answer-input {
            width: 80px;
            flex-shrink: 0;
        }

        .matching-form-container {
            margin-top: 20px;
        }
        .matching-form-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        .matching-form-label {
            width: 180px;
            flex-shrink: 0;
        }

        /* Results Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .modal-overlay.hidden {
            display: none;
        }
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .modal-close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #888;
        }
        .modal-content h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #333;
        }
        .results-summary {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        .results-details-container {
            overflow-y: auto;
            padding-right: 10px; /* For scrollbar */
        }
        .result-row {
            display: grid;
            grid-template-columns: 40px 1fr 1fr;
            gap: 15px;
            padding: 8px 5px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 15px;
        }
        .result-row.incorrect {
            background-color: #f8d7da;
        }
        .result-row .q-num {
            font-weight: bold;
        }
        .result-row .user-ans {
            color: #555;
        }
        .result-row .correct-ans {
            color: #155724;
            font-weight: 500;
        }
        .correct-answer-display {
            font-weight: bold;
            color: #28a745;
            margin-left: 10px;
            font-size: 14px;
        }
        .correct-answer-highlight, .tf-option.correct-answer-highlight, .multi-choice-option.correct-answer-highlight {
            background-color: #d4edda !important;
            border: 1px solid #c3e6cb !important;
            border-radius: 4px;
            padding: 4px;
        }
        .correct-answer-highlight {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
        }
        .centered-title {
    text-align: center;
    font-size: 50px;
    font-weight: bold;
    margin-bottom: 15px;
}
    </style>
</head>
<body>
    <div class="header">
        <div style="margin-bottom: 15px;">
    <label for="studentName"><strong>Enter Your Name:</strong></label>
    <input type="text" id="studentName" placeholder="Your name here" style="padding: 5px; width: 250px;">
</div>
        <div class="timer-container">
            <span class="timer-display">61:50</span>
            <div class="timer-controls">
                <button id="timer-toggle-btn" title="Pause/Resume Timer"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg></button>
                <button id="timer-reset-btn" title="Reset Timer">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"></path></svg>
                </button>
            </div>
        </div>
        <a href="https://t.me/shakhnozanorova" target="_blank" class="telegram-link">
            Shakhna Academy
        </a>

        
    </div>

    <div class="main-container" id="main-container">
        <div id="passage-header-container">
            <div id="part-header-1" class="part-header">
                <p><strong>Part 1</strong></p>
                <p>Read the text and answer <strong>Questions 1-13.</strong></p>
            </div>
            <div id="part-header-2" class="part-header hidden">
                <p><strong>Part 2</strong></p>
                <p>Read the text and answer <strong>Questions 14-26.</strong></p>
            </div>
            <div id="part-header-3" class="part-header hidden">
                <p><strong>Part 3</strong></p>
                <p>Read the text and answer <strong>Questions 27-40.</strong></p>
            </div>
        </div>
        <div class="panels-container">
         <div class="passage-panel" id="passage-panel">
            <div id="passage-text-1" class="reading-passage">
  <h2 class="text-center">Sleeping on the Job</h2>
  <p>Can curling up under your desk, or in a purpose-built sleep pod, for a 10-minute sleep improve your performance at work?</p>
  <p>There are times, typically in the afternoon, when many office workers experience a feeling of tiredness and may even drift off to sleep in front of their computers. Many workplaces consider artificial stimulation, provided by coffee or a chocolate bar, more acceptable than a short sleep when attempting to combat this daytime sleepiness. However, there is considerable evidence that trying to work during a spell of daytime drowsiness can be costly. "Workplace accidents and errors peak at the same time that our circadian rhythms (sleep wake cycle) cause a drop in alertness," says Dr, Gerard Kennedy, a sleep specialist based in Melbourne, Australia. "That's between about two and five pm," he says. These biologically based downturns in alertness are natural and occur even if you've had a good night's sleep. Most workers simply continue during the after lunch decline or reach for the nearest energiser: a strong coffee, a can of high caffeine soft drink, a cigarette or some secretly stored chocolate in the top drawer.</p>
  <p>However, a growing number of workers are taking very short sleeps, or "power naps" instead. "Research shows that a nap can improve your mood and productivity, alleviate tiredness, increase alertness and reduce errors at work," says Kennedy. "A nap as brief as 10 minutes will produce these results." It seems that the length of the nap is significant. Professor Leon Lack, from the School of Psychology at Adelaide's Flinders University, has compared 5-, 10-, 20- and 30-minute naps; he measured sleepiness, reaction time and cognitive performance before and immediately after a nap and again during the next three hours. "The 5-minute nap delivered very few benefits," says Lack. "The 20- and 30-minute naps produced improvements but the subjects took at least half an hour to wake up completely." Lack explains that the longer the sleep, the deeper it is, which can lead to a feeling called sleep inertia. "The 10-minute nap delivered immediate benefits that lasted for two to three hours, including a small but significant increase in alertness."</p>
  <p>But how can just 10 minutes of sleep be ensured, when not in lab conditions? Most people take 5 to 10 minutes to fall asleep so they need to lie down for a total of 20 minutes to allow for 10 to 15 minutes of sleep. First, we need to change our attitudes to rest.</p>
  <p>Australians work an average of 1811 hours each year, according to 2005 figures from the Organisation for Economic Co-operation and Development (OECD). This is the fifth highest figure from 20 nations surveyed. In addition, Dr. Kennedy stated that 9% of 20- to 30-year-olds and 16% of 30- to 50-year-olds are reporting sleeping problems. But in Australia, a culture where doing anything at all is considered better than doing nothing, lying down for a while—in the face of deadlines and urgent requests—is regarded as unacceptable by most companies. Some companies, however, are listening to experts who advise on ways to help employees take quick naps.</p>
  <p>Both low- and high-tech napping methods are available for those who want to try. Low-tech napping can include the use of a basic relaxation room, or, in the case of the strategic public relations firm Wordplay, a 'CushoBed'. This combination of a very large cushion and a couch provides Wordplay's staff with a comfortable place to curl up for a short sleep. Then there's the high-tech 'TechnoSnooze,' an up-market sleeping pod that arrived in Australia from New York earlier this year, and which has been leased out to several companies on trial, including advertising agencies State Right Australia and Instant Publicity. Looking like a space-age reclining armchair, the TechnoSnooze has a rounded hood that lowers over the head and headphones that play relaxation music. The pod inclines forward to allow for easy entry, then reclines so that the user's feet are slightly elevated. This promotes blood circulation and reduces pressure on the lower back. After 20 minutes, the pod vibrates gently to wake you.</p>
  <p>Harry Baker, the managing director of another large company, doesn't need such a high-tech approach. He makes good use of his media company's meditation room, which includes quiet music, candles, and incense. He encourages his staff to use it too. 'Napping is a good idea,' says Baker. 'It's like a traffic signal that slows down your brain.'</p>
  <p>However, employees need strong workplace support from their bosses and co-workers to feel they have permission for a mini-sleep as a regular part of their working day. 'Workplace napping made a huge amount of sense to me very quickly, and I assumed the idea would sell itself, but that wasn't always the case,' says Kevin Hopkins from State Right Australia, which trialled pod-style napping for a month. 'For napping to be beneficial, you need to ensure good briefing of the managers so they are clear about the positive outcomes and are equipped to endorse, role-model, and support staff, since staff will usually take their lead from managers.' He says staff response was positive: 43% of those who booked themselves in for a pod nap said they felt 'good' and 21% 'excellent' afterwards.</p>
</div>



               <div id="passage-text-2" class="reading-passage hidden"> 
    <h4 class="text-center">Reducing the effects of jet lag</h4>

    <div class="drop-zone" data-section="A" data-q-start="14">
  <b>14</b>
  <span class="drag-item" style="display: none;"></span>
  <input type="hidden" name="q14" id="q14">
</div>

    <p>We like to think we have control over our bodies, but the opposite is often true. Such is the case with 'circadian desynchrony', a condition more commonly known as jet lag. Exhaustion, headaches, difficulty concentrating, light-headedness, trouble falling asleep or staying asleep; these are common effects of jet lag. They have the power to ruin a vacation or business trip unless you learn how to trick your own body.</p>

   <div class="drop-zone" data-section="B" data-q-start="15">
      <b>15</b>
      <span class="drag-item" style="display:none;"></span>
      <input type="hidden" name="q15" id="q15">
    </div>
    <p>Experimental psychologist John Caldwell has spent most of his career researching the effects of sleep deprivation and sleep restriction, while also studying countermeasures that sleep-deprived people can use to function better. Much of his research was conducted within the military community. Caldwell explains that while our bodies are able to adjust to about one time zone change per day, jet lag sets in when we cross three or more of them because it creates chaos in circadian rhythms (otherwise known as our body clock). That's a fairly new phenomenon, historically speaking. "People now can fly from New York to Paris in nine, ten hours, whereas in 1923 you did it on a ship and it took you six days to get over to Europe," Caldwell says. "We just haven't evolved to the point where we can rapidly change those rhythms, because it's a relatively recent thing."</p>

     <div class="drop-zone" data-section="C" data-q-start="16">
      <b>16</b>
      <span class="drag-item" style="display:none;"></span>
      <input type="hidden" name="q16" id="q16">
    </div>
    <p>Because of the problems your body has naturally adapting to time-zone changes, you need to manually adjust your body clock, and that means changing your bedtime to be better matched with the destination to which you're traveling. Ranit Mishori, a professor of family medicine at Georgetown University School of Medicine, travels frequently to Europe, Africa, and the Middle East. To be ready to work when she arrives, she starts adjusting her bedtime two to five days in advance to match the local time at her destination. "That means going to bed earlier when going east and waking up much earlier," she says. When she returns to the US, she does the same but in reverse.</p>
    <p>John Caldwell creates a timetable that includes meetings, bedtimes, and social activities so that he can easily see what time it is at home and at his destination and plan accordingly. "A lot of times, when you look at that table, right away you're going to see where you're going to have your biggest problems," he says. If he's just traveling for a quick business trip and will only be gone a couple of days, he avoids gradual adjustment. Instead, he tries to schedule any meetings at a time when he would be awake and focused back home.</p>

    <div class="drop-zone" data-section="D" data-q-start="17">
      <b>17</b>
      <span class="drag-item" style="display:none;"></span>
      <input type="hidden" name="q17" id="q17">
    </div>
    <p>Circadian rhythms are influenced by natural light. While travel may disrupt those rhythms, you can help get them on track by regulating the amount of light that your body encounters, says Pradeep Bollu, associate director of the University of Missouri Health Care Sleep Disorders Center. When traveling east, your biological clock will be behind: avoiding bright light in the evening can help with advancing our biological clock," he says. "Similarly, bright light after waking up also will help advance our biological clock to suit the new time zone." When traveling westward, he adds, the biological clock is ahead of the latest time zone. He suggests gravitating toward bright light in the evening, if possible, and exercising to stay awake later and sleep longer.</p>

    <div class="drop-zone" data-section="E" data-q-start="18">
      <b>18</b>
      <span class="drag-item" style="display:none;"></span>
      <input type="hidden" name="q18" id="q18">
    </div>
    <p>One suggestion that is sometimes made is taking the hormone melatonin, which is a substance that is produced every night by the human body and helps you sleep. "Taking a very small dose helps to recalibrate its release so that it is in sync with the time zone of your destination," says Kern Singh, a spine surgeon in Chicago with Midwest Orthopaedics at Rush. Singh says he takes five milligrams of melatonin — which you can buy in pill form in supermarkets and many main street stores in the US — on the plane and then again when he lands.</p>

   <div class="drop-zone" data-section="F" data-q-start="19">
      <b>19</b>
      <span class="drag-item" style="display:none;"></span>
      <input type="hidden" name="q19" id="q19">
    </div>
    <p>Having a glass of wine on the plane may sound tempting, but it could negatively impact your sleep, which could worsen jet lag, says Quay Snyder, president and CEO of Aviation Medicine Advisory Service of Centennial, who advises pilots on staying in top condition while in the air. "It definitely has a sedating effect as far as getting someone to sleep, but it destroys their rapid eye movement (REM) sleep so their actual mental recovery is reduced," he says. Instead, he says, be sure and have plenty of water so that you stay hydrated while traveling.</p>

     <div class="drop-zone" data-section="G" data-q-start="20">
      <b>20</b>
      <span class="drag-item" style="display:none;"></span>
      <input type="hidden" name="q20" id="q20">
    </div>
    <p>Bruce Stephen Rashbaum, owner and medical director of Capital Center for Travel and Tropical Medicine in the District of Columbia, regularly advises patients on jet lag. He considers prednisone, which is a powerful prescription medication, to be the most effective tool for jet lag recovery. He instructs patients to take the medication when they land, which is typically early in the morning, and again in the late afternoon and the next day. "It is this simple ritual that works nearly every time," he says. So if in doubt, you can always ask your doctor for some assistance.</p>

    <p>Everyone responds to jet lag differently. For those who suffer, the first week will be the most challenging, but after that, your body should start to recover.</p>
</div>



              <div id="passage-text-3" class="reading-passage">
  <h2 class="text-center">Research into Taming a Fox</h2>

  <p><em>How to Tame a Fox (and Build a Dog)</em> is written by Lee Alan Dugatkin, an American evolutionary biologist, and Lyudmila Trut, a Russian professor of evolutionary genetics. The book describes the scientific effort to domesticate Siberian silver foxes—a project that Trut has been involved in as lead researcher for more than 50 years. When the project began, its purpose was to shed light on how dogs had gradually evolved from wolves, and silver foxes were chosen because they are the wolf's close genetic cousins.</p>

  <p>There is much material to cover in the book, but the authors condense this without sacrificing any significant details of the project. The introduction reveals the end product of the experiment by describing the behavior of some very tame foxes that willingly interact with humans. This revelation, however, does nothing to lessen the reader's fascination. Indeed, the authors do an excellent job of expressing the joy of discovery of those early years of genetic research.</p>

  <p>Interwoven with descriptions of the project and the astonishing changes in the foxes are the personal stories of the people involved, an approach rarely taken in scientific books, but one which works extremely well here. A major figure to appear in the book is geneticist Dmitri Belyaev, who first set up the domestication experiment in 1952, and who invited Trut to join the project in 1959. Trut continues his work today at their research facility in Siberia, where winter temperatures reach -40°C. Her team endures the harsh conditions because they obviously care deeply for the science and the animals they are in charge of.</p>

  <p>The evolution of the wolf into a dog has long puzzled scientists. How did wolves first come in contact with humans? Why were some wolves less averse to humans than others? To answer these questions, Belyaev devised an experiment to “breed the wild out of the animal” on an accelerated timeline.</p>

  <p>As lead scientist at the Central Research Laboratory on Fur Breeding Animals in Moscow, Belyaev was less interested in the official line of research and more interested in the impact of domestication on animal genomes. After moving to Siberia, he obtained some foxes from a fox farm for a breeding experiment. He chose less aggressive foxes that did not immediately try to bite their caretakers. At the earliest stage of the experiment, he felt it was necessary to hide his activities from his superiors at the Central Research Laboratory.</p>

  <p>Initially, 12 foxes were chosen, and within three breeding seasons the pilot study produced preliminary results. Some pups were not consistently aggressive; sometimes they even appeared indifferent toward people. These results were enough for Belyaev to hire Trut, then studying animal behavior at Moscow State University. Her job was to select the foxes for breeding and record details of changes. Among the eighth-generation foxes, a couple were calm enough for Trut to pick up. These, along with others that were slightly calmer than the rest, were selected for breeding as part of a larger project.</p>

  <p>Repeating the selection for the tamest foxes in each succeeding generation, Trut and Belyaev noticed new behaviors. The first milestone occurred with a fox named Ember. Tail wagging had never been recorded in foxes in the wild or captivity; it is the behavior of dogs signaling happiness. One day Ember wagged his tail when Trut approached. He was the only pup of his generation to do so, but this generation was also markedly calmer than any previous one.</p>

  <p>By the sixth generation of the larger project, pups displayed new behaviors. They pressed against the front of their crates seeking human contact, licked hands, and whined when people left. Fox pups whine for food from their mothers but had never done so for humans. Nor had they been documented licking hands. The pups exhibiting these behaviors were put in an elite group for breeding. Pups that did not exhibit these behaviors, or only occasionally exhibited a few, were maintained as a control group.</p>

  <p>Belyaev and Trut made further observations. Instead of standing straight up, the elite pups’ ears flopped over. Their snouts shortened, and some developed curly tails. These traits made them more visually appealing to humans. In short, over the generations, the foxes began to resemble dogs. It was then discovered that domestication creates complex interactions between genes that influence physical traits and genes that influence behavior. But how did this domestication happen with ancient wolves? Belyaev theorized that naturally calmer wolves approached people in search of pieces of animal meat and bone they had discarded. As these calmer wolves interbred, the animals were no longer aggressive towards humans.</p>

  <p>This theory makes more sense than older ideas, which proposed that Neolithic people stole wolf cubs so they could be trained to assist with practical tasks such as shepherding, guarding, and hunting. For Belyaev and Trut, their new theory answered the question of how we got from wolf to dog, but not how we then got to a faithful four-legged family member.</p>

  <p>Trut proposed to further chart the domestication of foxes by raising a fox called Pushinka at home. In time, Pushinka began differentiating between Trut and her colleagues, and other people who only seldom called at the house. Pushinka and her pups announced strangers’ arrival with a bark no other fox had exhibited. So far, 57 generations of foxes have been bred, and researchers have begun recording and decoding the vocalisations they have developed.</p>
</div>


    </div>
            <div class="resizer" id="resizer"></div>
            <div class="questions-panel" id="questions-panel">
              <div id="questions-1" class="question-set hidden">
  <div class="questions-container">

    <!-- Questions 1–4: True / False / Not Given -->
    <div class="question" data-q-start="1" data-q-end="4">
      <div class="question-prompt">
        <p><strong>Questions 1–4</strong>: Do the following statements agree with the information given in Reading Passage 1?</p>
        <p>Write:</p>
        <ul>
          <li><strong>TRUE</strong> – if the statement agrees with the information</li>
          <li><strong>FALSE</strong> – if the statement contradicts the information</li>
          <li><strong>NOT GIVEN</strong> – if there is no information on this</li>
        </ul>
      </div>

      <div class="tf-question">
        <div class="tf-question-line"><span class="tf-question-number">1</span><span class="tf-question-text">The majority of mistakes in the workplace happen in the afternoon.</span></div>
        <div class="tf-options">
          <label><input type="radio" name="q1" value="TRUE"> TRUE</label>
          <label><input type="radio" name="q1" value="FALSE"> FALSE</label>
          <label><input type="radio" name="q1" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question">
        <div class="tf-question-line"><span class="tf-question-number">2</span><span class="tf-question-text">A short nap of five minutes is enough to reduce errors at work.</span></div>
        <div class="tf-options">
          <label><input type="radio" name="q2" value="TRUE"> TRUE</label>
          <label><input type="radio" name="q2" value="FALSE"> FALSE</label>
          <label><input type="radio" name="q2" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question">
        <div class="tf-question-line"><span class="tf-question-number">3</span><span class="tf-question-text">People who work long hours are more likely to have sleeping problems.</span></div>
        <div class="tf-options">
          <label><input type="radio" name="q3" value="TRUE"> TRUE</label>
          <label><input type="radio" name="q3" value="FALSE"> FALSE</label>
          <label><input type="radio" name="q3" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>

      <div class="tf-question">
        <div class="tf-question-line"><span class="tf-question-number">4</span><span class="tf-question-text">Doing nothing is acceptable in Australian culture.</span></div>
        <div class="tf-options">
          <label><input type="radio" name="q4" value="TRUE"> TRUE</label>
          <label><input type="radio" name="q4" value="FALSE"> FALSE</label>
          <label><input type="radio" name="q4" value="NOT GIVEN"> NOT GIVEN</label>
        </div>
      </div>
    </div>

    <!-- Questions 5–10: Table Completion -->
    <div class="question" data-q-start="5" data-q-end="10">
      <div class="question-prompt">
        <p><strong>Questions 5–10</strong>: Complete the table below.</p>
        <p>Choose <strong>Write no more than two words</strong> from the passage for each answer.</p>
      </div>

      <table border="1" cellpadding="8" cellspacing="0" style="border-collapse: collapse; width: 100%; text-align: left;">
        <thead>
          <tr>
            <th>Where nap takes place</th>
            <th>Used by</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>CushoBed</td>
            <td>Wordplay</td>
            <td>Blends features of a giant <input type="text" class="answer-input" id="q5" placeholder="5"> and a sofa.</td>
          </tr>
          <tr>
            <td>TechnoSnooze</td>
            <td>State Right Australia</td>
            <td>An ultra-modern lounger with a <input type="text" class="answer-input" id="q6" placeholder="6"> at the top.</td>
          </tr>
          <tr>
            <td></td>
            <td>Instant Publicity</td>
            <td>Lessens stress on the <input type="text" class="answer-input" id="q7" placeholder="7"></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td>Allows you to sleep for a maximum of <input type="text" class="answer-input" id="q8" placeholder="8"></td>
          </tr>
          <tr>
            <td><input type="text" class="answer-input" id="q9" placeholder="9"></td>
            <td>Harry Baker</td>
            <td>A sweet-smelling room with subtle lighting and background <input type="text" class="answer-input" id="q10" placeholder="10"></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Questions 11–13: Short Answer Questions -->
    <div class="question" data-q-start="11" data-q-end="13">
      <div class="question-prompt">
        <p><strong>Questions 11–13</strong>: Answer the questions below.</p>
        <p>Choose <strong>NO MORE THAN THREE WORDS</strong> from the passage for each answer.</p>
      </div>

      <div class="saq">
        <p><span class="saq-number">11</span> To what does Harry Baker compare napping?</p>
        <input type="text" class="answer-input" id="q11" placeholder="11">
      </div>

      <div class="saq">
        <p><span class="saq-number">12</span> Apart from their superiors, who do workers need consent from if they are to feel comfortable taking a nap at work?</p>
        <input type="text" class="answer-input" id="q12" placeholder="12">
      </div>

      <div class="saq">
        <p><span class="saq-number">13</span> What do managers need to understand before they can support their staff in 'sleeping on the job'?</p>
        <input type="text" class="answer-input" id="q13" placeholder="13">
      </div>
    </div>

  </div>
</div>


               <div id="questions-2" class="question-set hidden">
  <div class="questions-container">

    <!-- Questions 14–20: List of Headings -->
    <div class="question" data-q-start="14" data-q-end="20">
      <div class="question-prompt">
        <p><strong>Questions 14–20</strong></p>
        <p>The Reading Passage has seven paragraphs, A–G. Choose the correct heading for each paragraph from the list of headings below.</p>
        <p>There are more headings than paragraphs, so you will not use all of them. Write the correct number, <strong>i–ix</strong>, in boxes 14–20 on your answer sheet.</p>
      </div>

      <div class="drag-options-container">
        <p><strong>List of Headings:</strong></p>
        <div class="drag-item" data-value="i" draggable="true">i. Requesting help from professionals</div>
        <div class="drag-item" data-value="ii" draggable="true">ii. Types of meals and beverages that help</div>
        <div class="drag-item" data-value="iii" draggable="true">iii. What not to do on a flight</div>
        <div class="drag-item" data-value="iv" draggable="true">iv. Symptoms of jet lag</div>
        <div class="drag-item" data-value="v" draggable="true">v. Altering your sleep schedules</div>
        <div class="drag-item" data-value="vi" draggable="true">vi. Types of exercise to do</div>
        <div class="drag-item" data-value="vii" draggable="true">vii. A problem of the modern age</div>
        <div class="drag-item" data-value="viii" draggable="true">viii. A remedy available from ordinary shops</div>
        <div class="drag-item" data-value="ix" draggable="true">ix. Timing exposure to sunshine</div>
      </div>
    </div>

    <!-- Questions 21–23: Matching Experts -->
    <div class="question" data-q-start="21" data-q-end="23">
  <div class="question-prompt">
    <p><strong>List of Experts</strong></p>
    <p>A John Caldwell<br>
       B Ranit Mishori<br>
       C Pradeep Bollu<br>
       D Kern Singh<br>
       E Quay Snyder<br>
       F Bruce Stephen Rashbaum</p>

    <p><strong>Questions 21–23</strong></p>
    <p>Write the correct letter, A–F, in the box.</p>

    <p>21. Using strong medicine is the most efficient way to get over jet lag. 
       <input type="text" id="q21" maxlength="1" class="answer-box">
    </p>
    <p>22. Using natural supplements to reset biological processes can help travelers. 
       <input type="text" id="q22" maxlength="1" class="answer-box">
    </p>
    <p>23. Having certain types of drinks lessens the quality of sleep. 
       <input type="text" id="q23" maxlength="1" class="answer-box">
    </p>
  </div>
</div>


    <!-- Questions 24–26: Summary Completion -->
    <div class="question" data-q-start="24" data-q-end="26">
      <div class="question-prompt">
        <p><strong>Questions 24–26</strong></p>
        <p>Complete the summary below.</p>
        <p>Choose <strong>ONE WORD ONLY</strong> from the passage for each answer.</p>
        <p>Write your answers in boxes 24–26 on your answer sheet.</p>
      </div>

      <div class="summary-text">
        <p>Why we experience jet lag</p>
        <p>John Caldwell has studied sleep issues among <input type="text" class="answer-input" id="q24" placeholder="24"> personnel. 
        He explains that jet lag is an issue because the human body can only naturally adapt to one change in time zones per day; 
        traveling over more than that causes <input type="text" class="answer-input" id="q25" placeholder="25"> for our bodies. 
        Unlike when traveling by <input type="text" class="answer-input" id="q26" placeholder="26">, flying has resulted in us being able 
        to change many time zones quickly. As this is a fairly new form of travel, the human body hasn't yet evolved to be able to cope with this.</p>
      </div>
    </div>

  </div>
</div>


               <div id="questions-3" class="question-set">
  <div class="questions-container">

    <!-- Questions 27–31 -->
    <div class="question active-question" data-q-start="27" data-q-end="31">
     <div class="question-prompt">
  <p><strong>Questions 27–31</strong><br>
  Do the following statements agree with the claims of the writer in Reading Passage 3?<br>
  In boxes <b>27–31</b> on your answer sheet, write:</p>
  <ul style="list-style: none; padding-left: 0;">
    <li><b>YES</b> – if the statement agrees with the claims of the writer</li>
    <li><b>NO</b> – if the statement contradicts the claims of the writer</li>
    <li><b>NOT GIVEN</b> – if it is impossible to say what the writer thinks about this</li>
  </ul>
</div>

<div class="tf-question">
  <div class="tf-question-line">
    <span class="tf-question-number">27</span>
    <span class="tf-question-text">Trut could never have imagined that the project would continue for over 50 years.</span>
  </div>
  <div class="tf-options">
    <label><input type="radio" name="q27" value="YES"> <span class="tf-option-text">YES</span></label>
    <label><input type="radio" name="q27" value="NO"> <span class="tf-option-text">NO</span></label>
    <label><input type="radio" name="q27" value="NOT GIVEN"> <span class="tf-option-text">NOT GIVEN</span></label>
  </div>
</div>

<div class="tf-question">
  <div class="tf-question-line">
    <span class="tf-question-number">28</span>
    <span class="tf-question-text">The authors have successfully conveyed all the key facts and important data associated with the research.</span>
  </div>
  <div class="tf-options">
    <label><input type="radio" name="q28" value="YES"> <span class="tf-option-text">YES</span></label>
    <label><input type="radio" name="q28" value="NO"> <span class="tf-option-text">NO</span></label>
    <label><input type="radio" name="q28" value="NOT GIVEN"> <span class="tf-option-text">NOT GIVEN</span></label>
  </div>
</div>

<div class="tf-question">
  <div class="tf-question-line">
    <span class="tf-question-number">29</span>
    <span class="tf-question-text">It is a shame that the outcome of the experiment is revealed in the book's introduction.</span>
  </div>
  <div class="tf-options">
    <label><input type="radio" name="q29" value="YES"> <span class="tf-option-text">YES</span></label>
    <label><input type="radio" name="q29" value="NO"> <span class="tf-option-text">NO</span></label>
    <label><input type="radio" name="q29" value="NOT GIVEN"> <span class="tf-option-text">NOT GIVEN</span></label>
  </div>
</div>

<div class="tf-question">
  <div class="tf-question-line">
    <span class="tf-question-number">30</span>
    <span class="tf-question-text">The authors made a mistake by including personal stories in the book.</span>
  </div>
  <div class="tf-options">
    <label><input type="radio" name="q30" value="YES"> <span class="tf-option-text">YES</span></label>
    <label><input type="radio" name="q30" value="NO"> <span class="tf-option-text">NO</span></label>
    <label><input type="radio" name="q30" value="NOT GIVEN"> <span class="tf-option-text">NOT GIVEN</span></label>
  </div>
</div>

<div class="tf-question">
  <div class="tf-question-line">
    <span class="tf-question-number">31</span>
    <span class="tf-question-text">It is clear that the staff in the Siberian research facility have genuine concern for their foxes.</span>
  </div>
  <div class="tf-options">
    <label><input type="radio" name="q31" value="YES"> <span class="tf-option-text">YES</span></label>
    <label><input type="radio" name="q31" value="NO"> <span class="tf-option-text">NO</span></label>
    <label><input type="radio" name="q31" value="NOT GIVEN"> <span class="tf-option-text">NOT GIVEN</span></label>
  </div>
</div>

</div>

<div class="mcq-question">
    <p><strong>Questions 32–34</strong><br>
    Choose the correct letter, A, B, C, or D.<br>
    Write the correct letter in boxes <b>32–34</b> on your answer sheet.</p>

    <!-- Question 32 -->
    <div class="question" id="q32">
        <p><span class="mcq-question-text">32. What is the writer doing in the fourth paragraph?</span></p>
        <label><input type="radio" name="q32" value="A"> <span class="mcq-option-text">A. examining Belyaev's approach to proving a theory</span></label><br>
        <label><input type="radio" name="q32" value="B"> <span class="mcq-option-text">B. comparing the behavioural traits of wolves to foxes</span></label><br>
        <label><input type="radio" name="q32" value="C"> <span class="mcq-option-text">C. giving the background to Belyaev's research project</span></label><br>
        <label><input type="radio" name="q32" value="D"> <span class="mcq-option-text">D. challenging traditional views on how species evolved</span></label>
    </div>

    <!-- Question 33 -->
    <div class="question" id="q33">
        <p><span class="mcq-question-text">33. After being assigned a project by the Central Research Laboratory, Belyaev responded by</span></p>
        <label><input type="radio" name="q33" value="A"> <span class="mcq-option-text">A. resigning and applying for work in another institution.</span></label><br>
        <label><input type="radio" name="q33" value="B"> <span class="mcq-option-text">B. keeping secret the work he was actually carrying out.</span></label><br>
        <label><input type="radio" name="q33" value="C"> <span class="mcq-option-text">C. choosing subjects that were hostile to people.</span></label><br>
        <label><input type="radio" name="q33" value="D"> <span class="mcq-option-text">D. seeking alternative means of funding for his scheme.</span></label>
    </div>

    <!-- Question 34 -->
    <div class="question" id="q34">
        <p><span class="mcq-question-text">34. What are we told about Lyudmila Trut in the sixth paragraph?</span></p>
        <label><input type="radio" name="q34" value="A"> <span class="mcq-option-text">A. Two of Belyaev's foxes seemed willing to let her handle them.</span></label><br>
        <label><input type="radio" name="q34" value="B"> <span class="mcq-option-text">B. She disagreed with Belyaev about the future direction of the project.</span></label><br>
        <label><input type="radio" name="q34" value="C"> <span class="mcq-option-text">C. She had worked with foxes before being employed by Belyaev.</span></label><br>
        <label><input type="radio" name="q34" value="D"> <span class="mcq-option-text">D. Belyaev had been an influence on her during her degree course.</span></label>
    </div>
</div>

    <!-- Questions 35–40 -->
   <div class="question" data-q-start="35" data-q-end="40">
  <div class="question-prompt">
    <p><strong>Questions 35–40</strong></p>
    <p>Complete the sentences below. Choose the correct answer from the list <b>A–I</b> below and write the correct letter <b>A–I</b> in boxes <b>35–40</b> on your answer sheet.</p>
  </div>
  <div class="options">
    <p>
      Belyaev and Trut observed that the elite group of foxes started to have a range of 
      <b>35</b> <input type="text" id="q35" class="answer-box"> in common with dogs. 
      Believing that domestication was responsible for this, Belyaev then proposed a theory about domestication in ancient wolves. 
      Whereas other researchers had suggested early man had taken wolf cubs to turn them into 
      <b>36</b> <input type="text" id="q36" class="answer-box">, Belyaev thought the wolves had associated human groups with 
      <b>37</b> <input type="text" id="q37" class="answer-box">. 
      This would explain the initial contact that wolves had with humans, but not how dogs eventually developed as 
      <b>38</b> <input type="text" id="q38" class="answer-box">. 
      To see how this might have occurred, Trut raised a fox called Pushinka and her pups in her own home. 
      In time, when 
      <b>39</b> <input type="text" id="q39" class="answer-box"> came to Trut's house, Pushinka and the pups could tell the difference between them and those they were more familiar with. 
      Currently, Trut and her team are analysing the 
      <b>40</b> <input type="text" id="q40" class="answer-box"> produced by the latest generation of foxes.
    </p>
    <p><strong>Options</strong></p>
    <p>
      <b>A.</b> strangers
      <b>B.</b> helpers
      <b>C.</b> physical traits
      <b>D.</b> vocalisations
      <b>E.</b> companions
      <b>F.</b> discarded meat
      <b>G.</b> family members
      <b>H.</b> behaviours
      <b>I.</b> hunters
    </p>
  </div>
</div>



  </div>
</div>


    <!-- Navigation Arrows -->
    <div class="nav-arrows">
        <button class="nav-arrow" onclick="previousQuestion()" id="prevBtn">‹</button>
        <button class="nav-arrow" onclick="nextQuestion()" id="nextBtn">›</button>
    </div>

    <!-- Bottom Navigation -->
    <nav class="nav-row perScorableItem" aria-label="Questions">
        <div class="footer__questionWrapper___1tZ46 multiple selected" role="tablist">
            <button role="tab" class="footer__questionNo___3WNct" onclick="switchToPart(1)">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">1</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 13</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(1)"><span class="sr-only">Question 1</span><span aria-hidden="true">1</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(2)"><span class="sr-only">Question 2</span><span aria-hidden="true">2</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(3)"><span class="sr-only">Question 3</span><span aria-hidden="true">3</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(4)"><span class="sr-only">Question 4</span><span aria-hidden="true">4</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(5)"><span class="sr-only">Question 5</span><span aria-hidden="true">5</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(6)"><span class="sr-only">Question 6</span><span aria-hidden="true">6</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(7)"><span class="sr-only">Question 7</span><span aria-hidden="true">7</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(8)"><span class="sr-only">Question 8</span><span aria-hidden="true">8</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(9)"><span class="sr-only">Question 9</span><span aria-hidden="true">9</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(10)"><span class="sr-only">Question 10</span><span aria-hidden="true">10</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(11)"><span class="sr-only">Question 11</span><span aria-hidden="true">11</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(12)"><span class="sr-only">Question 12</span><span aria-hidden="true">12</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(13)"><span class="sr-only">Question 13</span><span aria-hidden="true">13</span></button>
            </div>
        </div>
        
        <div class="footer__questionWrapper___1tZ46 multiple" role="tablist">
            <button role="tab" class="footer__questionNo___3WNct" onclick="switchToPart(2)">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">2</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 13</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(14)"><span class="sr-only">Question 14</span><span aria-hidden="true">14</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(15)"><span class="sr-only">Question 15</span><span aria-hidden="true">15</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(16)"><span class="sr-only">Question 16</span><span aria-hidden="true">16</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(17)"><span class="sr-only">Question 17</span><span aria-hidden="true">17</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(18)"><span class="sr-only">Question 18</span><span aria-hidden="true">18</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(19)"><span class="sr-only">Question 19</span><span aria-hidden="true">19</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(20)"><span class="sr-only">Question 20</span><span aria-hidden="true">20</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(21)"><span class="sr-only">Question 21</span><span aria-hidden="true">21</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(22)"><span class="sr-only">Question 22</span><span aria-hidden="true">22</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(23)"><span class="sr-only">Question 23</span><span aria-hidden="true">23</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(24)"><span class="sr-only">Question 24</span><span aria-hidden="true">24</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(25)"><span class="sr-only">Question 25</span><span aria-hidden="true">25</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(26)"><span class="sr-only">Question 26</span><span aria-hidden="true">26</span></button>
            </div>
        </div>
        
        <div class="footer__questionWrapper___1tZ46 multiple" role="tablist">
            <button role="tab" class="footer__questionNo___3WNct" onclick="switchToPart(3)">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">3</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 14</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(27)"><span class="sr-only">Question 27</span><span aria-hidden="true">27</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(28)"><span class="sr-only">Question 28</span><span aria-hidden="true">28</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(29)"><span class="sr-only">Question 29</span><span aria-hidden="true">29</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(30)"><span class="sr-only">Question 30</span><span aria-hidden="true">30</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(31)"><span class="sr-only">Question 31</span><span aria-hidden="true">31</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(32)"><span class="sr-only">Question 32</span><span aria-hidden="true">32</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(33)"><span class="sr-only">Question 33</span><span aria-hidden="true">33</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(34)"><span class="sr-only">Question 34</span><span aria-hidden="true">34</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(35)"><span class="sr-only">Question 35</span><span aria-hidden="true">35</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(36)"><span class="sr-only">Question 36</span><span aria-hidden="true">36</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(37)"><span class="sr-only">Question 37</span><span aria-hidden="true">37</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(38)"><span class="sr-only">Question 38</span><span aria-hidden="true">38</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(39)"><span class="sr-only">Question 39</span><span aria-hidden="true">39</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(40)"><span class="sr-only">Question 40</span><span aria-hidden="true">40</span></button>
            </div>
        </div>
        
        <button id="deliver-button" aria-label="Review your answers" class="footer__deliverButton___3FM07">
            <i class="fa fa fa-check" aria-hidden="true"></i>
            <span>Check Answers</span>
        </button>
    </nav>

    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu">
        <div id="menu-highlight" class="context-menu-item" onclick="highlightText()">
            Highlight
        </div>
        <div id="menu-note" class="context-menu-item" onclick="addNote()">
            Note
        </div>
        <div id="menu-clear" class="context-menu-item" onclick="clearHighlight()">
            Clear
        </div>
        <div id="menu-clear-all" class="context-menu-item" onclick="clearAllHighlights()">
            Clear All
        </div>
    </div>

   <div id="results-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <button class="modal-close-btn" onclick="closeResultsModal()">×</button>
        <div id="results-header"></div> <!-- This will show {Name} Your Results -->
        <div class="results-summary">
            <p>Score: <span id="results-score"></span> / 40</p>
            <p>IELTS Band: <span id="results-band"></span></p>
        </div>
        <div id="results-details" class="results-details-container"></div>
    </div>
</div>
<script>
// Allow dragging
document.querySelectorAll('.drag-item').forEach(item => {
  item.addEventListener('dragstart', function (event) {
    event.dataTransfer.setData("text/plain", this.dataset.value);
  });
});

// Allow dropping into zones
document.querySelectorAll('.drop-zone').forEach(zone => {
  zone.addEventListener('dragover', function (event) {
    event.preventDefault();
  });

  zone.addEventListener('drop', function (event) {
    event.preventDefault();
    const value = event.dataTransfer.getData("text/plain");
    const hiddenInput = this.querySelector('input[type="hidden"]');
    const span = this.querySelector('span');

    if (hiddenInput) {
      hiddenInput.value = value;   // ✅ Save answer
    }
    if (span) {
      span.textContent = value;    // Show chosen heading
      span.style.display = "inline";
    }
  });
});
</script>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- STATE VARIABLES ---
        let currentPassage = 1;
        let currentQuestion = 1;
        let selectedRange = null;
        let timeInSeconds = 3600;
        let timerInterval;
        let draggedItem = null;
        let activeQuestionElement = null;
        let selectedDragItem = null;

        // --- DOM ELEMENTS ---
        const timerDisplay = document.querySelector('.timer-display');
        const timerToggleButton = document.getElementById('timer-toggle-btn');
        const timerResetButton = document.getElementById('timer-reset-btn');
        const deliverButton = document.getElementById('deliver-button');
        const resizer = document.getElementById('resizer');
        const passagePanel = document.getElementById('passage-panel');
        const questionsPanel = document.getElementById('questions-panel');
        const contextMenu = document.getElementById('contextMenu');

        // --- ICON SVGs ---
        const playIcon = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M8 5v14l11-7L8 5z"/></svg>';
        const pauseIcon = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>';

        // --- ANSWERS ---
       const correctAnswers = {
  '1': 'TRUE',
  '2': 'FALSE',
  '3': 'NOT GIVEN',
  '4': 'FALSE',
  '5': 'cushion',
  '6': 'rounded hood',
  '7': 'lower back',
  '8': '20 minutes',
  '9': 'meditation room',
  '10': 'music',
  '11': 'traffic signal',
  '12': 'co-workers',
  '13': 'positive outcomes',

  '14': 'iv',
  '15': 'vii',
  '16': 'v',
  '17': 'ix',
  '18': 'viii',
  '19': 'iii',
  '20': 'i',
  '21': 'F',
  '22': 'D',
  '23': 'E',
  '24': 'military',
  '25': 'chaos',
  '26': 'ship',

  '27': 'NOT GIVEN',
  '28': 'YES',
  '29': 'NO',
  '30': 'NO',
  '31': 'YES',
  '32': 'C',
  '33': 'B',
  '34': 'A',
  '35': 'E',
  '36': 'A',
  '37': 'I',
  '38': 'B',
  '39': 'G',
  '40': 'F'
};




        // --- INITIALIZATION ---
        function initialize() {
            startTimer();
            initializeDragAndDrop();
            setupCheckboxLimits();
            setupExampleHeading();
            switchToPart(1); // Also calls goToQuestion(1) and updateNavigation
            
            document.body.addEventListener('input', updateAllIndicators);
            document.body.addEventListener('change', updateAllIndicators);
            deliverButton.addEventListener('click', checkAnswers);
            timerToggleButton.addEventListener('click', toggleTimer);
            timerResetButton.addEventListener('click', resetTimer);

            // Add click listeners to question containers for navigation
            document.querySelectorAll('[data-q-start]').forEach(el => {
                el.addEventListener('click', () => {
                    const qNum = parseInt(el.dataset.qStart, 10);
                    if (currentQuestion !== qNum) {
                        goToQuestion(qNum);
                    }
                });
            });

            resizer.addEventListener('mousedown', initResize, false);
            initializeContextMenu();
        }

        // --- CORE TEST LOGIC ---

        function checkAnswers() {
            // Disable all inputs to prevent changes
            const allInputs = document.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                input.disabled = true;
            });

            // Disable submit button
            deliverButton.disabled = true;
            deliverButton.style.cursor = 'not-allowed';
            
            clearInterval(timerInterval);
            let score = 0;
            const studentName = document.getElementById('studentName')?.value.trim() || "No Name Given";
            const totalQuestions = 40;
            const resultsDetailsContainer = document.getElementById('results-details');
            resultsDetailsContainer.innerHTML = '';

            document.querySelectorAll('.correct, .incorrect, .correct-answer-highlight').forEach(el => {
                el.classList.remove('correct', 'incorrect', 'correct-answer-highlight');
            });
            document.querySelectorAll('.correct-answer-display').forEach(el => el.remove());

            for (let i = 1; i <= totalQuestions; i++) {
                const questionKey = String(i);
                const correctAnswer = correctAnswers[questionKey];
                let userAnswer = '';
                let isCorrect = false;
                
                let userAnswerDisplay = 'Not Answered';
                const correctAnswerText = Array.isArray(correctAnswer) ? correctAnswer.join(' / ') : correctAnswer;

                const textInput = document.getElementById(`q${i}`);
                const radioGroup = document.querySelectorAll(`input[name="q${i}"][type="radio"]`);
                
                // Handle Text and Select Inputs
                if (textInput && (textInput.tagName === 'INPUT' || textInput.tagName === 'SELECT')) {
                    const element = textInput.closest('.matching-form-row') || textInput;
                    userAnswer = textInput.value.trim();
                    userAnswerDisplay = userAnswer || 'Not Answered';

                    if (textInput.tagName === 'SELECT') {
                        isCorrect = userAnswer === correctAnswer;
                    } else {
                        isCorrect = Array.isArray(correctAnswer) ?
                            correctAnswer.some(ans => userAnswer.toLowerCase() === ans.toLowerCase()) :
                            userAnswer.toLowerCase() === correctAnswer.toLowerCase();
                    }
                    
                    if (isCorrect) {
                        score++;
                        element.classList.add('correct');
                    } else {
                        element.classList.add('incorrect');
                        const correctAnswerSpan = document.createElement('span');
                        correctAnswerSpan.className = 'correct-answer-display';
                        correctAnswerSpan.innerHTML = `&nbsp;➜&nbsp;<span class="correct-answer-highlight">${correctAnswerText}</span>`;
                        textInput.parentNode.insertBefore(correctAnswerSpan, textInput.nextSibling);
                    }
                }
                // Handle Radio Button Inputs (T/F, MCQs)
                else if (radioGroup.length > 0) {
                    const questionContainer = radioGroup[0].closest('.tf-question') || radioGroup[0].closest('.multi-choice-question');
                    const checkedRadio = document.querySelector(`input[name="q${i}"]:checked`);

                    if (checkedRadio) {
                        userAnswer = checkedRadio.value;
                        userAnswerDisplay = userAnswer;
                        isCorrect = userAnswer === correctAnswer;

                        const userLabel = checkedRadio.closest('.tf-option, .multi-choice-option');
                        if (userLabel) {
                            userLabel.classList.add(isCorrect ? 'correct' : 'incorrect');
                        }
                    }

                    if (isCorrect) {
                        score++;
                    } else {
                        if (questionContainer){
                            const correctOptionEl = questionContainer.querySelector(`input[value="${correctAnswerText}"]`);
                            if (correctOptionEl) {
                                const correctLabel = correctOptionEl.closest('.tf-option, .multi-choice-option');
                                if (correctLabel) {
                                    correctLabel.classList.add('correct-answer-highlight');
                                }
                            }
                        }
                    }
                }
                // Handle Checkbox Groups (e.g., questions 21-22)
                else if (i === 21 || i === 22) {
                    // For questions 21-22, check if the user selected the correct combination
                    const checkedBoxes = document.querySelectorAll('input[name="q21-22"]:checked');
                    const userAnswers = Array.from(checkedBoxes).map(cb => cb.value).sort();
                    const correctAnswers21_22 = ['B', 'D']; // The default answers for questions 21-22
                    
                    if (i === 21) {
                        // Only check once for the pair
                        userAnswerDisplay = userAnswers.length > 0 ? userAnswers.join(', ') : 'Not Answered';
                        isCorrect = userAnswers.length === 2 && 
                                   userAnswers.every(ans => correctAnswers21_22.includes(ans)) &&
                                   correctAnswers21_22.every(ans => userAnswers.includes(ans));
                        
                        if (isCorrect) {
                            score += 2; // Both questions are correct
                            // Mark both questions as correct in nav
                            const nav21 = document.querySelector(`.subQuestion[onclick="goToQuestion(21)"]`);
                            const nav22 = document.querySelector(`.subQuestion[onclick="goToQuestion(22)"]`);
                            if (nav21) nav21.classList.add('correct');
                            if (nav22) nav22.classList.add('correct');
                        } else {
                            // Mark both as incorrect in nav
                            const nav21 = document.querySelector(`.subQuestion[onclick="goToQuestion(21)"]`);
                            const nav22 = document.querySelector(`.subQuestion[onclick="goToQuestion(22)"]`);
                            if (nav21) nav21.classList.add('incorrect');
                            if (nav22) nav22.classList.add('incorrect');
                        }
                        
                        // Visual feedback on checkboxes
                        checkedBoxes.forEach(cb => {
                            const option = cb.closest('.multi-choice-option');
                            if (correctAnswers21_22.includes(cb.value)) {
                                option.classList.add('correct');
                            } else {
                                option.classList.add('incorrect');
                            }
                        });
                        
                        // Show correct answers if user got it wrong
                        if (!isCorrect) {
                            correctAnswers21_22.forEach(correctVal => {
                                const correctCheckbox = document.querySelector(`input[name="q21-22"][value="${correctVal}"]`);
                                if (correctCheckbox && !correctCheckbox.checked) {
                                    correctCheckbox.closest('.multi-choice-option').classList.add('correct-answer-highlight');
                                }
                            });
                        }
                    } else if (i === 22) {
                        // Skip individual processing for question 22 since it's handled with 21
                        userAnswerDisplay = 'See Q21';
                        const nav21 = document.querySelector(`.subQuestion[onclick="goToQuestion(21)"]`);
                        isCorrect = nav21 && nav21.classList.contains('correct');
                        continue; // Skip the rest of processing for Q22
                    }
                }
                 
                // For showing results in the modal
                 const resultRow = `
                    <div class="result-row ${isCorrect ? '' : 'incorrect'}">
                        <span class="q-num">${i}</span>
                        <span class="user-ans">${userAnswerDisplay}</span>
                        <span class="correct-ans">${correctAnswerText}</span>
                    </div>`;
                resultsDetailsContainer.innerHTML += resultRow;
                
                // Update nav button color
                const navButton = document.querySelector(`.subQuestion[onclick="goToQuestion(${i})"]`);
                if (navButton) {
                    navButton.classList.remove('answered', 'active');
                    navButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
            }

 const bandScore = calculateBandScore(score);
document.getElementById('results-header').innerHTML = `<strong>${studentName}</strong> — Your Results<br>
You scored ${score} out of 40 (Band ${bandScore}).`;

document.getElementById('results-modal').classList.remove('hidden');

        }

        function calculateBandScore(score) {
            if (score >= 39) return '9.0';
            const mapping = {
                40: 9.0, 39: 9.0, 38: 8.5, 37: 8.5, 36: 8.0, 35: 8.0, 34: 7.5,
                33: 7.5, 32: 7.0, 31: 7.0, 30: 7.0, 29: 6.5, 28: 6.5, 27: 6.5,
                26: 6.0, 25: 6.0, 24: 6.0, 23: 5.5, 22: 5.5, 21: 5.5, 20: 5.5,
                19: 5.0, 18: 5.0, 17: 5.0, 16: 5.0, 15: 5.0, 14: 4.5, 13: 4.5,
                12: 4.0, 11: 4.0, 10: 4.0, 9: 3.5, 8: 3.5, 7: 3.0, 6: 3.0,
                5: 2.5, 4: 2.5
            };
            if (score <= 0) return 0.0;
            if (score === 1) return 1.0;
            if (score <= 3) return 2.0;
            if (score <= 5) return 2.5;
            return mapping[score] || 0.0;
        }

        function getUserAnswer(qNum) {
            const textInput = document.getElementById(`q${qNum}`);
            const radioInput = document.querySelector(`input[name="q${qNum}"]:checked`);
            const dropZone = document.querySelector(`.drop-zone[data-q-start="${qNum}"]`);

            if (textInput) { // Handles <input type="text"> and <select>
                return { value: textInput.value, text: textInput.value || 'N/A' };
            }
            if (radioInput) {
                return { value: radioInput.value, text: radioInput.value };
            }
            if (dropZone) {
                const droppedItem = dropZone.querySelector('.drag-item');
                return { 
                    value: droppedItem ? droppedItem.dataset.value : null, 
                    text: droppedItem ? droppedItem.textContent.trim() : 'N/A' 
                };
            }
            return { value: null, text: 'N/A' };
        }

        function displayCorrectAnswer(qNum, correctAnswer) {
            // Handle multi-choice group questions (e.g., 38-40)
            if (qNum >= 38 && qNum <= 40) {
                 const correctAnswersArr = Array.isArray(correctAnswer) ? correctAnswer : [correctAnswer];
                 correctAnswersArr.forEach(ansValue => {
                    const correctInput = document.querySelector(`input[name="q38-40"][value="${ansValue}"]`);
                    correctInput?.closest('.multi-choice-option')?.classList.add('correct-answer-highlight');
                 });
                 return;
            }

            // Handle radio button questions by highlighting the correct label
            const correctRadioInput = document.querySelector(`input[name="q${qNum}"][value="${correctAnswer}"]`);
            if (correctRadioInput) {
                const parentOption = correctRadioInput.closest('.tf-option, .multi-choice-option');
                if (parentOption) {
                    parentOption.classList.add('correct-answer-highlight');
                    return;
                }
            }

            // Handle text inputs, select dropdowns, and others by showing the answer next to them
            const inputEl = document.getElementById(`q${qNum}`);
            if (inputEl) {
                const displaySpan = document.createElement('span');
                displaySpan.className = 'correct-answer-display';
                displaySpan.textContent = ` ✓ ${correctAnswer}`;
                inputEl.insertAdjacentElement('afterend', displaySpan);
                return; // Done
            }
            
            // Fallback for questions identified by a container (e.g., some T/F/NG questions)
            const element = findQuestionElement(qNum);
            if (element) {
                const displaySpan = document.createElement('span');
                displaySpan.className = 'correct-answer-display';
                displaySpan.textContent = ` ✓ ${correctAnswer}`;
                const itemContainer = element.querySelector('.tf-question-text');
                if (itemContainer) {
                     itemContainer.appendChild(displaySpan);
                } else {
                     element.appendChild(displaySpan);
                }
            }
        }
        
        function findQuestionElement(qNum) {
             return document.querySelector(`[data-q-start="${qNum}"]`);
        }

        function addResultToModal(qNum, userAnswer, correctAnswer, isCorrect) {
            const resultsDetails = document.getElementById('results-details');
            const row = document.createElement('div');
            row.className = 'result-row';
            if (!isCorrect) {
                row.classList.add('incorrect');
            }
            row.innerHTML = `
                <span class="q-num">${qNum}</span>
                <span class="user-ans">${userAnswer}</span>
                <span class="correct-ans">${correctAnswer}</span>
            `;
            resultsDetails.appendChild(row);
        }

        function showResultsModal() {
            document.getElementById('results-modal').classList.remove('hidden');
        }

        window.closeResultsModal = function() {
            document.getElementById('results-modal').classList.add('hidden');
        }
        
        function disableInputs() {
            deliverButton.innerHTML = `<span>Checked! View Results.</span>`;
            deliverButton.removeEventListener('click', checkAnswers);
            deliverButton.onclick = showResultsModal;

            document.querySelectorAll('input, select').forEach(el => {
                el.disabled = true;
                 if (el.matches('input[type=radio], input[type=checkbox]')) {
                     el.style.cursor = 'not-allowed';
                     el.parentElement.style.cursor = 'not-allowed';
                 }
            });
            document.querySelectorAll('.drag-item').forEach(el => {
                el.setAttribute('draggable', 'false');
                el.style.cursor = 'default';
            });
            document.querySelectorAll('.drop-zone').forEach(el => {
                el.classList.add('disabled');
            });
        }

        function checkValue(userValue, correctValue) {
            if (userValue === null || userValue === undefined) return false;
            const formattedUserValue = userValue.trim().toLowerCase();
            if (Array.isArray(correctValue)) {
                return correctValue.map(v => v.toLowerCase()).includes(formattedUserValue);
            } else {
                return formattedUserValue === String(correctValue).toLowerCase();
            }
        }

        function markQuestion(qNum, isCorrect) {
            const subQuestionBtn = document.querySelector(`.subQuestion[onclick="goToQuestion(${qNum})"]`);
            subQuestionBtn?.classList.add(isCorrect ? 'correct' : 'incorrect');

            const elementsToMark = [
                document.querySelector(`.tf-question[data-q-start="${qNum}"]`),
                document.querySelector(`.multi-choice-question[data-q-start="${qNum}"]`),
                document.querySelector(`.matching-question-item[data-q-start="${qNum}"]`),
                document.querySelector(`.drop-zone[data-q-start="${qNum}"]`),
                document.getElementById(`q${qNum}`),
                document.querySelector(`input[name="q${qNum}"]:checked`)?.closest('.tf-option'),
                document.querySelector(`input[name="q${qNum}"]:checked`)?.closest('.multi-choice-option')
            ];
            
            elementsToMark.forEach(el => {
                if (el) el.classList.add(isCorrect ? 'correct' : 'incorrect');
            });

             if (qNum === 14 || qNum === 15) {
                const multiChoiceContainer = document.querySelector('.multi-choice-question[data-q-start="14"]');
                if (multiChoiceContainer) multiChoiceContainer.classList.add(isCorrect ? 'correct' : 'incorrect');
             } else if (qNum >= 1 && qNum <= 5) {
                const pMatchInput = document.getElementById(`q${qNum}`);
                if (pMatchInput) pMatchInput.classList.add(isCorrect ? 'correct' : 'incorrect');
             } else if (qNum >= 38 && qNum <= 40) {
                // For this group, individual options are marked, not the container.
             }
        }

        function switchToPart(partNumber, goToQ = null) {
            currentPassage = partNumber;

            // Hide all passages and questions
            document.querySelectorAll('.reading-passage, .question-set, .part-header').forEach(el => {
                el.classList.add('hidden');
            });

            // Show the correct passage, questions, and header
            document.getElementById(`passage-text-${partNumber}`).classList.remove('hidden');
            document.getElementById(`questions-${partNumber}`).classList.remove('hidden');
            document.getElementById(`part-header-${partNumber}`).classList.remove('hidden');

            // Update bottom navigation 'selected' state
            document.querySelectorAll('.footer__questionWrapper___1tZ46').forEach((wrapper, index) => {
                wrapper.classList.toggle('selected', (index + 1) === partNumber);
            });

            // Go to the specified question or the first question of the part
            const firstQuestionOfPart = {1: 1, 2: 14, 3: 27}[partNumber];
            goToQuestion(goToQ !== null ? goToQ : firstQuestionOfPart);
        }
        
        function goToQuestion(questionNumber) {
            // Prevent unnecessary recursion: if already at the right passage and question, do nothing
            if (currentQuestion === questionNumber) {
                let passageNumber = 1;
                if (questionNumber >= 14 && questionNumber <= 26) passageNumber = 2;
                else if (questionNumber >= 27) passageNumber = 3;
                if (currentPassage === passageNumber) {
                    return;
                }
            }

            currentQuestion = questionNumber;

            let passageNumber = 1;
            if (questionNumber >= 14 && questionNumber <= 26) passageNumber = 2;
            else if (questionNumber >= 27) passageNumber = 3;

            if (currentPassage !== passageNumber) {
                switchToPart(passageNumber, questionNumber);
                return;
            }

            if (activeQuestionElement) {
                activeQuestionElement.classList.remove('active-question', 'active-input');
            }

            let targetEl = document.querySelector(`[data-q-start="${questionNumber}"]`);

            if (targetEl) {
                activeQuestionElement = targetEl;
                 if (targetEl.matches('input[type="text"]') || targetEl.matches('select')) {
                     targetEl.classList.add('active-input');
                 } else {
                     targetEl.classList.add('active-question');
                 }
                 scrollIntoViewIfNeeded(targetEl);
            } else {
                 const pMatch = document.querySelector(`.paragraph-matching-question select[id="q${questionNumber}"]`);
                 if(pMatch) {
                    activeQuestionElement = pMatch;
                    pMatch.classList.add('active-input');
                    scrollIntoViewIfNeeded(pMatch);
                 }
            }

            updateNavigation();
        }
        
        // --- UI & NAVIGATION ---

        function updateNavigation() {
            const navButtons = document.querySelectorAll('.subQuestion');
            navButtons.forEach(btn => btn.classList.remove('active'));
            const activeNav = document.querySelector(`.subQuestion[onclick="goToQuestion(${currentQuestion})"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }

            const inputs = document.querySelectorAll('.answer-input, .drop-zone.filled, .summary-drop-zone.filled');
            inputs.forEach(input => input.classList.remove('active-input'));
            
            const activeInput = document.getElementById(`q${currentQuestion}`);
            if (activeInput) {
                activeInput.classList.add('active-input');
                if (typeof activeInput.focus === 'function') {
                    activeInput.focus();
                }
            } else {
                const activeQuestionBlock = document.querySelector(`[data-q-start="${currentQuestion}"]`);
                if (activeQuestionBlock) {
                    const firstInput = activeQuestionBlock.querySelector('input, select');
                    if(firstInput) {
                        firstInput.classList.add('active-input');
                         if (typeof firstInput.focus === 'function') {
                            firstInput.focus();
                        }
                    }
                }
            }
        }
        
        function selectDragItem(item) {
            if (selectedDragItem) {
                selectedDragItem.classList.remove('selected');
            }
            selectedDragItem = item;
            if (selectedDragItem) {
                selectedDragItem.classList.add('selected');
            }
        }
        
        window.nextQuestion = () => currentQuestion < 40 && goToQuestion(currentQuestion + 1);
        window.previousQuestion = () => currentQuestion > 1 && goToQuestion(currentQuestion - 1);

        function updateAllIndicators() {
            updateAttemptedCount(1, 1, 13);
            updateAttemptedCount(2, 14, 26);
            updateAttemptedCount(3, 27, 40);
            updateAnsweredNav();
        }
        
        function updateAnsweredNav() {
            const navButtons = document.querySelectorAll('.subQuestion');
            navButtons.forEach(btn => {
                const qNum = parseInt(btn.textContent, 10);
                if (isQuestionAnswered(qNum)) {
                    btn.classList.add('answered');
                } else {
                    btn.classList.remove('answered');
                }
            });
        }
        
        function isQuestionAnswered(qNum) {
            // Special handling for questions 21-22 checkbox group
            if (qNum === 21 || qNum === 22) {
                const checkedBoxes = document.querySelectorAll('input[name="q21-22"]:checked');
                return checkedBoxes.length > 0;
            }
            
            const textInput = document.getElementById(`q${qNum}`);
            if (textInput && (textInput.value.trim() !== '' || (textInput.classList.contains('drop-zone') && textInput.children.length > 0))) {
                return true;
            }
            const radio = document.querySelector(`input[name="q${qNum}"]:checked`);
            if (radio) {
                return true;
            }
            const checkbox = document.querySelector(`input[name="q${qNum}"]:checked`);
            if (checkbox) {
                return true;
            }
            return false;
        }

        function scrollIntoViewIfNeeded(element) {
            const panel = element.closest('.questions-panel, .passage-panel');
            const panelRect = panel.getBoundingClientRect();
            const elementRect = element.getBoundingClientRect();
            if (elementRect.top < panelRect.top || elementRect.bottom > panelRect.bottom) {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        // --- DRAG AND DROP ---
        
        function initializeDragAndDrop() {
            document.querySelectorAll('.drag-item').forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
                item.addEventListener('click', () => selectDragItem(item));
            });
            document.querySelectorAll('.drop-zone, .drag-options-container').forEach(zone => {
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('dragleave', handleDragLeave);
                zone.addEventListener('drop', handleDrop);
            });
        }

        function handleDragStart(e) {
            draggedItem = e.target;
            setTimeout(() => e.target.classList.add('dragging'), 0);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            draggedItem = null;
        }

        function handleDragOver(e) {
            e.preventDefault();
            const targetZone = e.currentTarget;
            if (draggedItem && draggedItem.dataset.dndGroup === targetZone.dataset.dndGroup) {
                targetZone.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            const targetZone = e.currentTarget;
            targetZone.classList.remove('drag-over');

            if (!draggedItem || draggedItem.dataset.dndGroup !== targetZone.dataset.dndGroup) {
                return;
            }

            const sourceZone = draggedItem.parentElement;
            if (sourceZone === targetZone) return; // Prevent dropping on itself

            const existingItemInTarget = targetZone.classList.contains('drop-zone') 
                ? targetZone.querySelector('.drag-item') 
                : null;

            // First, clear the target drop-zone of any text (like question numbers) before adding the new item.
            if (targetZone.classList.contains('drop-zone')) {
                Array.from(targetZone.childNodes).forEach(node => {
                    if (node.nodeType === Node.TEXT_NODE) {
                        node.remove();
                    }
                });
            }

            // Move the item that was in the target (if any) to the source zone.
            if (existingItemInTarget) {
                sourceZone.appendChild(existingItemInTarget);
            }
            
            // Finally, move the dragged item to the target zone.
            targetZone.appendChild(draggedItem);
            targetZone.classList.add('filled');

            // After the move, clean up the source zone if it's a drop-zone and is now empty.
            if (sourceZone.classList.contains('drop-zone') && !sourceZone.querySelector('.drag-item')) {
                 sourceZone.classList.remove('filled');
                 const qNum = sourceZone.dataset.qStart;
                 sourceZone.innerText = qNum; // Restore the question number
            }
            
            updateAllIndicators();
        }
        
        // --- MISC HELPERS ---
        
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval); // Ensure no multiple intervals
            timerInterval = setInterval(() => {
                timeInSeconds--;
                const minutes = Math.floor(timeInSeconds / 60);
                const seconds = timeInSeconds % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                if (timeInSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "Time's up!";
                    // checkAnswers(); // Disabled to prevent modal from opening automatically.
                }
            }, 1000);
            timerToggleButton.innerHTML = pauseIcon;
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            timerToggleButton.innerHTML = playIcon;
        }

        function toggleTimer() {
            // Check based on the icon currently displayed
            if (timerToggleButton.innerHTML.includes('M6 19h4V5H6v14z')) { // Check for pause icon shape
                pauseTimer();
            } else {
                startTimer();
            }
        }

        function resetTimer() {
            timeInSeconds = 3600;
            updateTimerDisplay();
            startTimer();
            timerToggleButton.innerHTML = pauseIcon;
        }
        
        function setupCheckboxLimits() {
            const checkboxGroups = [
                { name: 'q21-22', limit: 2 },
                { name: 'q38-40', limit: 3 }
            ];
            checkboxGroups.forEach(group => {
                const checkboxes = document.querySelectorAll(`input[name="${group.name}"]`);
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        const checkedCount = document.querySelectorAll(`input[name="${group.name}"]:checked`).length;
                        if (checkedCount > group.limit) checkbox.checked = false;
                        updateAllIndicators();
                    });
                });
            });
        }

        function setupExampleHeading() {
            const exampleBox = document.querySelector('.example-box');
            if(exampleBox){
                const title = document.createElement('p');
                title.style.fontWeight = 'bold';
                title.textContent = 'List of Statements';
                // exampleBox.insertBefore(title, exampleBox.firstChild);
            }
        }
        
        function initResize(e) {
            e.preventDefault();
            const startX = e.clientX;
            const startWidth = passagePanel.offsetWidth;
            
            const doDrag = (e) => {
                const newWidth = startWidth + e.clientX - startX;
                if (newWidth > 200 && (document.body.clientWidth - newWidth - resizer.offsetWidth) > 200) {
                    passagePanel.style.flex = `0 0 ${newWidth}px`;
                }
            };
            const stopDrag = () => {
                window.removeEventListener('mousemove', doDrag, false);
                window.removeEventListener('mouseup', stopDrag, false);
            };
            
            window.addEventListener('mousemove', doDrag, false);
            window.addEventListener('mouseup', stopDrag, false);
        }
        
        // --- CONTEXT MENU (Highlighting) ---
        
        // --- HIGHLIGHT FEATURE ---
        function initializeContextMenu() {
            const panels = [passagePanel, questionsPanel];
            let highlightBtn = null;
            let removeHighlightBtn = null;
            let highlightTarget = null;

            // Helper to remove floating buttons
            function removeFloatingButtons() {
                if (highlightBtn && highlightBtn.parentNode) highlightBtn.parentNode.removeChild(highlightBtn);
                if (removeHighlightBtn && removeHighlightBtn.parentNode) removeHighlightBtn.parentNode.removeChild(removeHighlightBtn);
                highlightBtn = null;
                removeHighlightBtn = null;
                highlightTarget = null;
            }

            // Show highlight button near selection
            document.addEventListener('mouseup', (e) => {
                setTimeout(() => { // Wait for selection to update
                    const selection = window.getSelection();
                    if (selection && !selection.isCollapsed && selection.toString().trim().length > 0) {
                        const range = selection.getRangeAt(0);
                        if (panels.some(panel => panel.contains(range.commonAncestorContainer))) {
                            // Don't show highlight button if selection is within an existing highlight that has a remove button
                            const selectionParentHighlight = range.commonAncestorContainer.nodeType === Node.TEXT_NODE 
                                ? range.commonAncestorContainer.parentElement?.closest('.highlight')
                                : range.commonAncestorContainer.closest?.('.highlight');
                            
                            if (selectionParentHighlight && removeHighlightBtn && highlightTarget === selectionParentHighlight) {
                                // Selection is within the highlight that already has a remove button, don't interfere
                                return;
                            }
                            
                            removeFloatingButtons();
                            highlightBtn = document.createElement('button');
                            highlightBtn.textContent = 'Highlight';
                            highlightBtn.style.position = 'absolute';
                            highlightBtn.style.zIndex = 9999;
                            highlightBtn.style.background = '#ffe066';
                            highlightBtn.style.border = '1px solid #aaa';
                            highlightBtn.style.padding = '2px 10px';
                            highlightBtn.style.borderRadius = '4px';
                            highlightBtn.style.cursor = 'pointer';
                            // Position button near selection
                            const rect = range.getBoundingClientRect();
                            highlightBtn.style.left = `${window.scrollX + rect.left}px`;
                            highlightBtn.style.top = `${window.scrollY + rect.top - 30}px`;
                            document.body.appendChild(highlightBtn);
                            highlightBtn.onclick = function() {
                                const span = document.createElement('span');
                                span.className = 'highlight';
                                span.style.background = '#ffe066';
                                span.appendChild(range.extractContents());
                                range.insertNode(span);
                                removeFloatingButtons();
                                window.getSelection().removeAllRanges();
                            };
                        } else {
                            removeFloatingButtons();
                        }
                    } else {
                        removeFloatingButtons();
                    }
                }, 10);
            });

            // Use event delegation for highlight removal
            panels.forEach(panel => {
                panel.addEventListener('click', (e) => {
                    const highlightEl = e.target.closest('.highlight');
                    if (highlightEl) {
                        // Prevent double creation
                        if (removeHighlightBtn && highlightTarget === highlightEl) return;
                        removeFloatingButtons();
                        removeHighlightBtn = document.createElement('button');
                        removeHighlightBtn.textContent = 'Remove Highlight';
                        removeHighlightBtn.style.position = 'absolute';
                        removeHighlightBtn.style.zIndex = 9999;
                        removeHighlightBtn.style.background = '#ffb3b3';
                        removeHighlightBtn.style.border = '1px solid #aaa';
                        removeHighlightBtn.style.padding = '2px 10px';
                        removeHighlightBtn.style.borderRadius = '4px';
                        removeHighlightBtn.style.cursor = 'pointer';
                        const rect = highlightEl.getBoundingClientRect();
                        removeHighlightBtn.style.left = `${window.scrollX + rect.left}px`;
                        removeHighlightBtn.style.top = `${window.scrollY + rect.top - 30}px`;
                        document.body.appendChild(removeHighlightBtn);
                        highlightTarget = highlightEl;
                        removeHighlightBtn.addEventListener('click', function(ev) {
                            ev.stopPropagation();
                            // Unwrap highlight
                            const parent = highlightTarget.parentNode;
                            while (highlightTarget.firstChild) {
                                parent.insertBefore(highlightTarget.firstChild, highlightTarget);
                            }
                            parent.removeChild(highlightTarget);
                            parent.normalize();
                            removeFloatingButtons();
                        });
                    }
                });
            });

            // Remove floating buttons on scroll or click elsewhere
            document.addEventListener('scroll', removeFloatingButtons, true);
            document.addEventListener('mousedown', (e) => {
                // Delay removal so highlight click handler can run first
                setTimeout(() => {
                    if ((removeHighlightBtn && removeHighlightBtn.contains(e.target)) || (highlightBtn && highlightBtn.contains(e.target))) {
                        return;
                    }
                    if (e.target.closest('.highlight')) return;
                    removeFloatingButtons();
                }, 0);
            });
        }

        function closeContextMenu() {
            contextMenu.style.display = 'none';
            selectedRange = null; // Clear range after menu closes
        }

        function unwrapElement(element) {
            const parent = element.parentNode;
            if (!parent) return;
            while (element.firstChild) {
                parent.insertBefore(element.firstChild, element);
            }
            parent.removeChild(element);
            parent.normalize();
        }

        window.highlightText = () => {
            if (selectedRange && !selectedRange.collapsed) {
                const span = document.createElement('span');
                span.className = 'highlight';
                span.appendChild(selectedRange.extractContents());
                selectedRange.insertNode(span);
            }
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        window.addNote = () => {
            const note = prompt('Enter your note:');
            if (note && selectedRange && !selectedRange.collapsed) {
                const span = document.createElement('span');
                span.className = 'comment-highlight';
                const tooltip = document.createElement('span');
                tooltip.className = 'comment-tooltip';
                tooltip.textContent = note;
                span.appendChild(selectedRange.extractContents());
                span.appendChild(tooltip);
                selectedRange.insertNode(span);
            }
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        window.clearHighlight = () => {
             const elementToClear = contextMenu.targetElementForClear;
             if (elementToClear) {
                 unwrapElement(elementToClear);
             }
             closeContextMenu();
             window.getSelection().removeAllRanges();
        };
        
        window.clearAllHighlights = () => {
            document.querySelectorAll('.highlight, .comment-highlight').forEach(unwrapElement);
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        function updateAttemptedCount(part, startQ, endQ) {
            let answeredCount = 0;
            for (let i = startQ; i <= endQ; i++) {
                if (isQuestionAnswered(i)) {
                    answeredCount++;
                }
            }
            const partHeader = document.querySelector(`.footer__questionNo___3WNct[onclick="switchToPart(${part})"]`);
            if (partHeader) {
                const countSpan = partHeader.querySelector('.attemptedCount');
                if (countSpan) {
                     countSpan.textContent = `${answeredCount} of ${endQ - startQ + 1}`;
                }
            }
        }

        // --- GLOBAL FUNCTION EXPOSURE ---
        window.nextQuestion = nextQuestion;
        window.previousQuestion = previousQuestion;
        window.goToQuestion = goToQuestion;
        window.switchToPart = switchToPart;
        window.closeResultsModal = closeResultsModal;
        window.highlightText = highlightText;
        window.addNote = addNote;
        window.clearHighlight = clearHighlight;
        window.clearAllHighlights = clearAllHighlights;

        // --- START THE APP ---
        initialize();
    });
    </script>

</body></html>