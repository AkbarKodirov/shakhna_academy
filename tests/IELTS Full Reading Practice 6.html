<!DOCTYPE html>
<!-- saved from url=(0068)file:///D:/downloads/Mock%20reading%20for%20Intensive%20Masters.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Full Reading Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            line-height: 1.4;
            font-size: 16px;
        }



        .header {
            background-color: #ffffff;
            padding: 12px 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            height: 60px;
        }

        .ielts-logo {
            display: none;
        }

        .test-info {
            display: flex;
            align-items: center;
            gap: 30px;
            font-size: 14px;
            color: #333;
        }

        .audio-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
        }

        .audio-icon {
            width: 16px;
            height: 16px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg>') no-repeat center;
        }

        .header-icons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .telegram-link {
            color: #0088cc;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .telegram-link:hover {
            text-decoration: underline;
        }

        .telegram-link::before {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: currentColor;
            -webkit-mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-1.37.2-1.64l16.56-6.4c.75-.29 1.4.22 1.2.94l-2.67 12.61c-.22.95-1.13 1.18-1.78.73l-4.5-3.32l-2.23 2.15c-.47.44-1.29.21-1.48-.37z"/></svg>');
            mask-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.78 18.65l.28-4.23l7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3L3.64 12c-.88-.25-.89-1.37.2-1.64l16.56-6.4c.75-.29 1.4.22 1.2.94l-2.67 12.61c-.22.95-1.13 1.18-1.78.73l-4.5-3.32l-2.23 2.15c-.47.44-1.29.21-1.48-.37z"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
        }

        #volume-slider {
            -webkit-appearance: none;
            width: 80px;
            height: 4px;
            background: #ddd;
            outline: none;
            border-radius: 2px;
            cursor: pointer;
        }

        #volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #333;
            cursor: pointer;
        }

        #volume-slider::-moz-range-thumb {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #333;
            cursor: pointer;
            border: none;
        }

        .icon {
            width: 20px;
            height: 20px;
            cursor: pointer;
            opacity: 0.7;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .icon:hover {
            opacity: 1;
        }
        
        #play-pause-btn {
            background: none;
            border: none;
            padding: 0;
        }

        .main-container {
            margin-top: 60px;
            display: flex;
            flex-direction: column;
            background: #ffffff;
            height: calc(100vh - 60px); /* Full height minus header */
        }

        .panels-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .passage-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
        }

        /* Passage Content */
        .text-center {
            text-align: center;
        }
        .reading-passage h4 {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }
       
        .reading-passage p {
            margin-bottom: 1.2em;
        }

        .question ul li label {
            display: block;
            margin-top: 8px;
            cursor: pointer;
        }

        .questions-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
            border-left: 1px solid #e0e0e0;
        }

        .resizer {
            width: 10px;
            cursor: col-resize;
            background-color: #f0f0f0;
            background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="30" viewBox="0 0 10 30"><path d="M4 11h2v2H4zM4 15h2v2H4zM4 19h2v2H4z" fill="%23888"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
            flex-shrink: 0;
            flex-grow: 0;
        }

        /* Left Panel */
        .left-panel {
            width: 100%;
            padding: 20px;
        }

        /* Right Panel */
        .right-panel {
            display: none;
            width: 50%;
            padding: 20px;
            position: relative;
        }

        .help-button {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 20px;
        }

        .help-button:hover {
            background: #357abd;
        }

        .section-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .people-section {
            margin-bottom: 30px;
        }

        .people-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #ccc;
        }

        .people-table th {
            text-align: left;
            padding: 10px;
            font-weight: bold;
            border: 1px solid #ddd;
        }

        .people-table td {
            padding: 8px 10px;
            border: 1px solid #ddd;
        }

        .person-name {
            font-size: 16px;
        }

        .question-number {
            background: white;
            border: 1px solid #4a90e2;
            padding: 4px 8px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 14px;
            color: #4a90e2;
            min-width: 30px;
            text-align: center;
        }

        .assigned-responsibility {
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 14px;
            border: 1px solid #ddd;
        }

        .responsibilities-section {
            margin-bottom: 30px;
        }

        .responsibility-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .responsibility-item {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            text-align: center;
            transition: all 0.2s;
        }

        .responsibility-item:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .responsibility-item.dragging {
            opacity: 0.5;
        }

        .questions-section {
            margin-bottom: 20px;
        }

        .question-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .instruction {
            margin-bottom: 20px;
            font-size: 16px;
            color: #666;
        }

        /* Map Styles */
        .map-container {
            position: relative;
            margin: 20px 0;
            display: flex;
            justify-content: center;
        }

        .map-svg {
            border: 2px solid #333;
            background: white;
        }

        .map-room {
            fill: #f9f9f9;
            stroke: #333;
            stroke-width: 1;
        }

        .map-text {
            font-family: Arial, sans-serif;
            font-size: 13px;
            text-anchor: middle;
            fill: #333;
        }

        .map-number {
            font-family: Arial, sans-serif;
            font-size: 16px;
            font-weight: bold;
            text-anchor: middle;
            fill: #333;
        }

        .room-labels {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .room-label {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            text-align: center;
            transition: all 0.2s;
        }

        .room-label:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }

        .room-label.dragging {
            opacity: 0.5;
        }

        /* Navigation Arrows */
        .nav-arrows {
            position: fixed;
            bottom: 100px;
            right: 20px;
            display: flex;
            gap: 5px;
            z-index: 101;
        }

        .nav-arrow {
            width: 50px;
            height: 50px;
            background: #333;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: bold;
        }

        .nav-arrow:hover {
            background: #555;
        }

        .nav-arrow:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* Bottom Navigation - Exact Match */
        .nav-row {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #ffffff;
        
            padding: 0;
            display: flex;
            align-items: center;
            height: 80px;
            z-index: 100;
        }

        .footer__questionWrapper___1tZ46 {
            display: flex;
            align-items: center;
            margin-right: 20px;
        }


        .footer__questionNo___3WNct {
            background: none;
            border: none;
            padding: 10px 15px;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: background-color 0.2s;
        }

        .footer__questionNo___3WNct:hover {
            background-color: #f8f9fa;
        }

        .section-prefix {
            font-size: 16px;
        }

        .sectionNr {
            font-size: 16px;
            font-weight: bold;
        }

        .attemptedCount {
            font-size: 14px;
            color: #666;
            margin-left: 5px;
            font-weight: 400; /* Normal weight */
        }

        @media (max-width: 768px) {
            .attemptedCount {
                display: none;
            }
        }

        .footer__questionWrapper___1tZ46.selected .attemptedCount {
            display: none;
        }

        .footer__subquestionWrapper___9GgoP {
            display: none;
            gap: 2px;
            margin-left: 10px;
        }

        .footer__questionWrapper___1tZ46.selected .footer__subquestionWrapper___9GgoP {
            display: flex;
        }

        .subQuestion {
            width: 32px;
            height: 32px;
            border: 1px solid #ccc;
            background: white;
            color: #333;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            border-radius: 2px;
        }

        .subQuestion.answered {
            background-color: #e9ecef;
            border-color: #ddd;
        }
        .subQuestion.correct {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }
        .subQuestion.incorrect {
            background-color: #dc3545;
            color: white;
            border-color: #dc3545;
        }

        .subQuestion:hover {
            background-color: #f0f0f0;
            border-color: #999;
        }

        .subQuestion.active {
            background-color: #4a90e2;
            color: white;
            border-color: #4a90e2;
        }

        .subQuestion.completed {
            background-color: #28a745;
            color: white;
            border-color: #28a745;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .footer__deliverButton___3FM07 {
            margin-left: auto;
            margin-right: 20px;
            background-color: #f0f0f0;
            color: #333;
            border: 1px solid #ccc;
            padding: 12px 20px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s, border-color 0.2s;
            min-width: 170px;
            justify-content: center;
        }

        .footer__deliverButton___3FM07:hover {
            background-color: #e0e0e0;
            border-color: #bbb;
        }

        .footer__deliverButton___3FM07:disabled {
            background: #e9ecef;
            color: #6c757d;
            cursor: not-allowed;
            border-color: #ddd;
        }

        .fa-check::before {
            content: "✓";
        }

        .hidden {
            display: none !important;
        }

        /* Context Menu */
        .context-menu {
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            display: none;
            min-width: 140px;
        }

        .context-menu-item {
            padding: 12px 16px;
            cursor: pointer;
            font-size: 16px;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .context-menu-item:hover {
            background-color: #f8f9fa;
        }

        .context-menu-item:last-child {
            border-bottom: none;
        }

        .highlight {
            background-color: #ffff00;
        }

        .comment-highlight {
            background-color: #90EE90;
            position: relative;
            cursor: help;
        }

        .comment-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            white-space: nowrap;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .comment-highlight:hover .comment-tooltip {
            opacity: 1;
        }

        .question {
            margin-bottom: 40px;
        }
        .question p {
            margin-bottom: 10px;
        }
        .question ul, .question .people-table {
            margin-top: 0;
        }
        .question-prompt {
            margin-bottom: 20px;
        }
        .question ul {
            list-style: none;
            padding-left: 0;
        }
        .question ul li {
            margin-bottom: 5px;
        }
        .answer-input {
            border: 1px solid #888;
            border-radius: 4px;
            background-color: #fff;
            padding: 2px 5px;
            font-size: 16px;
            text-align: center;
            margin-right: 4px;
            margin-left: 4px;
            transition: border-color 0.3s, box-shadow 0.3s;
            height: 28px; /* Standard height */
            width: 150px; /* Standard width */
        }
        .answer-input.active-input {
            border-color: #4a90e2;
            box-shadow: 0 0 3px 1px rgba(74, 144, 226, 0.5);
        }
        .answer-input::placeholder {
            color: #999;
            font-weight: bold;
            text-align: center;
        }
        .answer-input.correct {
            border-color: #28a745;
            background-color: #e9f7ef;
        }
        .answer-input.incorrect {
            border-color: #dc3545;
            background-color: #f8d7da;
            color: #721c24;
        }
        .answer-input {
    z-index: 10;
    position: relative;
    pointer-events: auto;
}
        .drag-drop-container {
            display: flex;
            gap: 30px;
            margin-top: 20px;
            align-items: flex-start;
        }
        .recommendations-box {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
            min-height: 200px;
        }
        .drag-item {
            background: white;
            border: 1px solid #ddd;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: move;
            font-size: 16px;
            transition: all 0.2s;
            user-select: none;
        }
        .drag-item:hover {
            background: #e9ecef;
        }
        .drag-item.dragging {
            opacity: 0.5;
        }
        .drag-item.selected {
            border-color: #4a90e2;
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.5);
        }
        .drop-zone {
            border: 2px dashed #aaa;
            border-radius: 4px;
            width: 50%;
            margin-top: 19px;
            margin-bottom: 5px;
            transition: background-color 0.2s, border-color 0.2s;
            padding: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .drop-zone.drag-over {
            background-color: #e6f4ff;
            border-color: #4a90e2;
        }
        .drop-zone.correct {
            background-color: #e9f7ef;
            border-color: #28a745;
            border-style: solid;
        }
        .drop-zone.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545;
            border-style: solid;
        }
        .drop-zone.disabled {
            pointer-events: none;
        }
        .drop-zone .drag-item {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            padding: 2px;
        }
        .drag-options-container {
            margin-top: 10px;
        }
        .drag-options-container .drag-item {
            display: block;
            width: fit-content;
            font-size: 15px;
            padding: 0.5px 10px;
            margin-bottom: 5px;
        }
        .drag-options-container .drag-item:last-child {
            margin-bottom: 0;
        }
        .q-number {
            color: #888;
            font-size: 14px;
            font-weight: bold;
        }
        .questions-container {
            width: 100%;
        }
        audio {
            width: 100%;
            margin-bottom: 20px;
        }
        .part-header {
            background-color: #f1f2ec;
            padding: 15px 20px;
            border: 1px solid #e0e0e0;
            text-align: left;
            margin: 10px 20px;
            border-radius: 5px;
        }
        .part-header p {
            margin: 0;
        }
        .part-header p:first-child {
            margin-bottom: 5px;
        }

        .question li.correct {
            color: #155724;
            font-weight: bold;
        }
        .question li.incorrect {
            color: #721c24;
        }
        .question li.correct::before {
            content: '✔ ';
            color: #28a745;
        }
        .question li.incorrect::before {
            content: '✖ ';
            color: #dc3545;
        }

        .example-box {
            border: 1px solid #ddd;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }

        .timer-container {
            display: flex;
            position: relative;
            cursor: default;
            color: #333;
            font-size: 16px;
            font-weight: 500;
            align-items: center;
        }
        .timer-container .timer-tooltip {
            display: none;
        }

        .timer-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-left: 15px;
        }

        .timer-controls button {
            background: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 50%;
            padding: 0;
            cursor: pointer;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        .timer-controls button:hover {
            background: #e0e0e0;
        }

        .timer-controls button svg {
            width: 20px;
            height: 20px;
            fill: #333;
        }

        .audio-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(40, 40, 40, 0.9);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
        }
        .audio-modal-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            max-width: 500px;
            padding: 20px;
        }
        .audio-modal-content p {
            font-size: 16px;
            line-height: 1.5;
            color: #eee;
        }
        .audio-modal-icon {
            margin-bottom: 20px;
        }
        .modal-play-btn {
            background-color: #000;
            color: white;
            border: 1px solid white;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }
        .modal-play-btn:hover {
            background-color: #333;
        }
        #goto-widget {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        #goto-input {
            width: 80px;
            padding: 4px 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #goto-btn {
            padding: 4px 10px;
            border: 1px solid #ccc;
            background-color: #f0f0f0;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Styles for TRUE/FALSE/NOT GIVEN questions */
        .tf-question {
            margin-bottom: 25px;
            padding: 10px 0px;
            border-radius: 4px;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .tf-question-line {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 5px 0px;
            border-radius: 4px;
        }
        .tf-question-number, .question-number-box {
            border: 2px solid #ccc;
            padding: 2px 8px;
            margin-right: 10px;
            border-radius: 3px;
            font-weight: bold;
            transition: border-color 0.3s;
            display: inline-block;
        }
        .tf-question-text {
            padding-top: 3px;
        }
        .tf-options {
            padding-left: 5px;
        }
        .tf-option {
            display: block;
            margin-bottom: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        .tf-option input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }
        .tf-question.correct .tf-question-line {
            background-color: #e9f7ef;
        }
        .tf-question.incorrect .tf-question-line {
            background-color: #f8d7da;
        }
        .matching-question-container {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        .matching-options-bank {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .matching-questions {
            flex: 1.5;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .matching-question-item {
            display: flex;
            align-items: center;
            gap: 15px;

            border: 2px solid transparent;
            border-radius: 4px;
            transition: border-color 0.3s;
        }
        .matching-question-item > span {
            flex: 1;
        }
        .matching-question-item.correct {
            background-color: #e9f7ef;
            border-color: #28a745 !important;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .matching-question-item .drop-zone {
            width: 200px;
            flex-shrink: 0;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #aaa;
        }
        .matching-options-bank .drag-item {
            font-size: 15px;
            text-align: center;
            border: 1px solid #ccc;
            background: #f9f9f9;
        }

        .questions-panel {
            flex: 1;
            padding: 20px 20px 100px;
            overflow-y: auto;
            min-width: 200px; /* Minimum width */
            border-left: 1px solid #e0e0e0;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .summary-completion-container {
            margin-top: 20px;
        }
        .summary-text p {
            line-height: 2.5;
            font-size: 16px;
        }
        .summary-drop-zone {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            vertical-align: middle;
            max-width:200px;
            height: 25px;
            border: 2px dashed #999;
            border-radius: 4px;
            margin: 0 5px;
            padding: 0 5px;
            transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s;
            color: #aaa;
            font-weight: bold;
        }
        .summary-drop-zone.filled {
            border-color: #4a90e2;
        }
        .summary-drop-zone.active-input {
             border-color: #4a90e2;
             box-shadow: none;
        }
        .summary-drop-zone .drag-item {
            font-size: 15px;
            font-weight: bold;
            background-color: transparent;
            border: none;
            padding: 0;
            text-align: center;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .summary-options-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .summary-options-bank .drag-item {
            flex-grow: 1;
            min-width: 100px;
            text-align: center;
        }
        .multi-choice-question {
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 4px;
            border: 3px solid transparent;
            transition: border-color 0.3s, background-color 0.3s;
        }
        .multi-choice-option {
            margin-bottom: 10px;
            padding: 8px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        .multi-choice-option label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-size: 16px;
        }
        .multi-choice-option input[type="checkbox"],
        .multi-choice-option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.3);
            accent-color: #4a90e2;
        }
        .multi-choice-option.correct {
            background-color: #e9f7ef;
        }
        .multi-choice-option.incorrect {
            background-color: #f8d7da;
        }
        .matching-question-item.incorrect {
            background-color: #f8d7da;
            border-color: #dc3545 !important;
        }
        .matching-question-item .drop-zone.filled {
            border-color: #4a90e2;
        }
        .matching-question-item .drop-zone {
            width: 200px;
            height: 40px;
        }
        .paragraph-matching-question {
            align-items: center;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 12px;
        }
        .paragraph-matching-question .answer-input {
            width: 80px;
            flex-shrink: 0;
        }

        .matching-form-container {
            margin-top: 20px;
        }
        .matching-form-row {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }
        .matching-form-label {
            width: 180px;
            flex-shrink: 0;
        }

        /* Results Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .modal-overlay.hidden {
            display: none;
        }
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .modal-close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #888;
        }
        .modal-content h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #333;
        }
        .results-summary {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        .results-details-container {
            overflow-y: auto;
            padding-right: 10px; /* For scrollbar */
        }
        .result-row {
            display: grid;
            grid-template-columns: 40px 1fr 1fr;
            gap: 15px;
            padding: 8px 5px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 15px;
        }
        .result-row.incorrect {
            background-color: #f8d7da;
        }
        .result-row .q-num {
            font-weight: bold;
        }
        .result-row .user-ans {
            color: #555;
        }
        .result-row .correct-ans {
            color: #155724;
            font-weight: 500;
        }
        .correct-answer-display {
            font-weight: bold;
            color: #28a745;
            margin-left: 10px;
            font-size: 14px;
        }
        .correct-answer-highlight, .tf-option.correct-answer-highlight, .multi-choice-option.correct-answer-highlight {
            background-color: #d4edda !important;
            border: 1px solid #c3e6cb !important;
            border-radius: 4px;
            padding: 4px;
        }
        .correct-answer-highlight {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
        }
        .centered-title {
    text-align: center;
    font-size: 50px;
    font-weight: bold;
    margin-bottom: 15px;
}
    </style>
</head>
<body>
    <div class="header">
        <div style="margin-bottom: 15px;">
    <label for="studentName"><strong>Enter Your Name:</strong></label>
    <input type="text" id="studentName" placeholder="Your name here" style="padding: 5px; width: 250px;">
</div>
        <div class="timer-container">
            <span class="timer-display">61:50</span>
            <div class="timer-controls">
                <button id="timer-toggle-btn" title="Pause/Resume Timer"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg></button>
                <button id="timer-reset-btn" title="Reset Timer">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"></path></svg>
                </button>
            </div>
        </div>
        <a href="https://t.me/shakhnozanorova" target="_blank" class="telegram-link">
            Shakhna Academy
        </a>

        
    </div>

    <div class="main-container" id="main-container">
        <div id="passage-header-container">
            <div id="part-header-1" class="part-header">
                <p><strong>Part 1</strong></p>
                <p>Read the text and answer <strong>Questions 1-13.</strong></p>
            </div>
            <div id="part-header-2" class="part-header hidden">
                <p><strong>Part 2</strong></p>
                <p>Read the text and answer <strong>Questions 14-26.</strong></p>
            </div>
            <div id="part-header-3" class="part-header hidden">
                <p><strong>Part 3</strong></p>
                <p>Read the text and answer <strong>Questions 27-40.</strong></p>
            </div>
        </div>
        <div class="panels-container">
         <div class="passage-panel" id="passage-panel">
            <div id="passage-text-1" class="reading-passage">
  <h2 class="text-center">Archaeologists Discover Evidence of Prehistoric Island Settlers</h2>
  <p>In early April 2019, Dr Ceri Shipton and his colleagues from Australian National University became the first archaeologists to explore Obi, one of many tropical islands in Indonesia’s Maluku Utara province. The research team’s discoveries suggest that the prehistoric people who lived on Obi were adept on both land and sea, hunting in the dense rainforest, foraging on the seashore, and possibly even voyaging between islands.</p>
  <p>The excavations were part of a project to learn more about how people first dispersed from mainland Asia, through the Indonesian archipelago and into the prehistoric continent that once connected Australia and New Guinea. The team’s earlier research suggested that the northernmost islands in the group, known as the Wallacean islands, including Obi, would have offered the easiest migration route. It also seemed likely that these islands were crucial “stepping stones” on humans’ island-hopping voyages through this region millennia ago. But to support this idea, they needed archaeological evidence for humans living in this remote area in the ancient past. So, they travelled to Obi to look for sites that might reveal evidence of early occupation.</p>
  <p>Just inland from the village of Kelo on Obi’s northern coast, Shipton and his colleagues found two caves containing prehistoric rock shelters that were suitable for excavation. With the permission and help of the local people of Kelo, they dug a small test excavation in each shelter. There they found numerous artefacts, including fragments of axes, some dating to about 14,000 years ago. The earliest axes at Kelo were made using clam shells. Axes made from clam shells from roughly the same time had also previously been found elsewhere in this region, including on the nearby island of Gebe to the northeast. As on Gebe, it is highly likely that Obi’s axes were used in the construction of canoes, thus allowing these early peoples to maintain connections between communities on neighbouring islands.</p>
  <p>The oldest cultural layers from the Kelo site provided the team with the earliest record for human occupation on Obi, dating back around 18,000 years. At this time the climate was drier and colder than today, and the island’s dense rainforests would likely have been much less impenetrable than they are now. Sea levels were about 120 metres lower, meaning Obi was a much larger island, encompassing what is today the separate island of Bisa, as well as several other small islands nearby.</p>
  <p>Roughly 11,700 years ago, as the most recent ice age ended, the climate became significantly warmer and wetter, no doubt making Obi’s jungle much thicker. According to the researchers, it is no coincidence that around this time the first axes crafted from stone rather than sea shells appear, likely in response to their increased, heavy-duty use for clearing and modification of the increasingly dense rainforest. While stone takes about twice as long to grind into an axe compared to shell, the harder material keeps its sharp edge for longer.</p>
  <p>Judging by the bones which the researchers unearthed in the Kelo caves, people living there mainly hunted the Rothschild’s cuscus, a possum-like creature that still lives on Obi today. As the forest grew more dense, people probably used axes to clear patches of forest and make hunting easier.</p>
  <p>Shipton’s team’s excavation of the shelters at the Kelo site unearthed a volcanic glass substance called obsidian, which must have been brought over from another island, as there is no known source on Obi. It also revealed particular types of beads, similar to those previously found on islands in southern Wallacea. These finds again support the idea that Obi islanders routinely travelled to other islands.</p>
  <p>The excavations suggest people successfully lived in the two Kelo shelters for about 10,000 years. But then, about 8,000 years ago, both were abandoned. Did the residents leave Obi completely, or move elsewhere on the island? Perhaps the jungle had grown so thick that axes were no longer a match for the dense undergrowth. Perhaps people simply moved to the coast and turned to fishing rather than hunting as a means of survival. </p> 
  <p>Whatever the reason for the departure, there is no evidence for use of the Kelo shelters after this time, until about 1,000 years ago, when they were re-occupied by people who owned items made out of gold, silver and pottery. It seems likely, in view of Obi’s location, that this final phase of occupation also saw the Kelo shelters used by people involved in the historic trade in spices between the Maluku islands and the rest of the world.</p>
</div>




               <div id="passage-text-2" class="reading-passage">
  <h2 class="text-center">The Global Importance of Wetlands</h2>

  <p><strong>A</strong> Wetlands are areas where water covers the soil, or is present either at or near the surface of the soil, for all or part of the year. These are complex ecosystems, rich in unique plant and animal life. But according to the World Wide Fund for Nature (WWFN), half of the world's wetlands have disappeared since 1990 — converted or destroyed for commercial development, drainage schemes, and the extraction of minerals and peat. Many of those that remain have been damaged by agricultural pesticides and fertilisers, industrial pollutants, and construction works.</p>

  <p><strong>B</strong> Throughout history, humans have gathered around wetlands, and their fertile ecosystems have played an important part in human development. Consequently, they are of considerable religious, historical, and archaeological value to many communities around the world. "Wetlands directly support the livelihoods and well-being of millions of people," says Dr Matthew McCartney, principal researcher and hydrologist at the International Water Management Institute (IWMI). In many developing countries, large numbers of people are dependent on wetland agriculture for their livelihoods.</p>

  <p><strong>C</strong> They also serve a crucial environmental purpose. "Wetlands are one of the key tools in mitigating climate change across the planet," says Pieter van Eijk, head of Climate Adaptation at Wetlands International (WI), pointing to their use as buffers that protect coastal areas from sea-level rise and extreme weather events such as hurricanes and flooding. Wetland coastal forests provide food and water, as well as shelter from storms, and WI and other agencies are working to restore those forests which have been lost. "It can be as simple as planting a few trees per hectare to create shade and substantially change a microclimate," he says. "Implementing climate change projects isn’t so much about money."</p>

  <p><strong>D</strong> The world's wetlands are, unfortunately, rich sources for in-demand commodities, such as palm oil and pulpwood. Peatlands — wetlands with a waterlogged organic soil layer — are particularly targeted. When peatlands are drained for cultivation, they become net carbon emitters instead of active carbon stores, and, according to Marcel Silvius, head of Climate-smart Land-use at WI, this practice causes six percent of all global carbon emissions. The clearance of peatlands for planting also increases the risk of forest fires, which release huge amounts of CO₂. "We’re seeing huge peatland forests with extremely high biodiversity value being lost for a few decades of oil palm revenues," says Silvius.</p>

  <p><strong>E</strong> The damage starts when logging companies arrive to clear the trees. They dig ditches to enter the peat swamps by boat and then float the logs out the same way. These are then used to drain water out of the peatlands to allow for the planting of corn, oil palms, or pulpwood trees. Once the water has drained away, bacteria and fungi break down the carbon in the peat and turn it into CO₂ and methane. Meanwhile, the remainder of the solid matter in the peat starts to move downwards, in a process known as subsidence. Peat comprises 90 percent water, so this is one of the most alarming consequences of peatland clearances. "In the tropics, peat subsides at about four centimetres a year, so within half a century, very large landscapes on Sumatra and Borneo will become flooded as the peat drops below water level," says Silvius. "It's a huge catastrophe that's in preparation. Some provinces will lose 40 percent of their landmass."</p>

  <p><strong>F</strong> And while these industries affect wetlands in ways that can easily be documented, Dr Dave Tickner of the WWFN believes that more subtle impacts can be even more devastating. "Sediment run-off and fertilisers can be pretty invisible," says Tickner. "Over-extraction of water is equally invisible. You do get shock stories about rivers running red, or even catching fire, but there's seldom one big impact that really hurts a wetland." Tickner does not blame anyone for deliberate damage, however. "I've worked on wetland issues for 20 years and have never met anybody who wanted to damage a wetland," he says. "It isn't something that people generally set out to do. Quite often, the effects simply come from people trying to make a living."</p>

  <p><strong>G</strong> Silvius also acknowledges the importance of income generation. "It's not that we just want to restore the biodiversity of wetlands — which we do — but we recognise there's a need to provide an income for local people." This approach is supported by IWMI. "The idea is that people in a developing country will only protect wetlands if they value and profit from them," says McCartney. "For sustainability, it's essential that local people are involved in wetland planning and decision-making and have clear rights to use wetlands."</p>

  <p><strong>H</strong> The fortunes of wetlands would be improved, Silvius suggests, if more governments recognised their long-term value. "Different governments have different attitudes," he says, and goes on to explain that some countries place a high priority on restoring wetlands, while others still deny the issue. McCartney is cautiously optimistic, however. "Awareness of the importance of wetlands is growing," he says. "It's true that wetland degradation still continues at a rapid pace, but my impression is that things are slowly changing."</p>
</div>





              <div id="passage-text-3" class="reading-passage">
  <h2 class="text-center">The Ingenuity Gap</h2>

  <p class="text-center"> <em></em>In this book introduction, the author explains what he means by 'ingenuity' and discusses the factors that influence the requirement for and provision of new ideas in today's society. </em></p>

  <p>Ingenuity, as I define it here, consists not only of ideas for new technologies like computers or drought-resistant crops but, more fundamentally, of ideas for better institutions and social arrangements, like efficient markets and competent governments. How much and what kinds of ingenuity a society requires depend on a range of factors, including the society's goals and the circumstances within which it must achieve those goals — whether it has a young population or an aging one, an abundance of natural resources or a scarcity of them, an easy climate or a punishing one, whatever the case may be.</p>

  <p>How much and what kinds of ingenuity a society supplies also depend on many factors, such as the nature of human inventiveness and understanding, the rewards an economy gives to the producers of useful knowledge, and the strength of political opposition to social and institutional reforms.</p>

  <p>A good supply of the right kinds of ingenuity is essential, but it isn't, of course, enough by itself. We know that the creation of wealth, for example, depends not only on an adequate supply of useful ideas but also on the availability of other, more conventional factors of production, like capital and labor. Similarly, stability and justice usually depend on the resolution, or at least the containment, of major political struggles over wealth and power.</p>

  <p>The past century's countless incremental changes in our societies around the planet, in our technologies, and our interactions with our natural environment have created a qualitatively new world. Because these changes have accumulated slowly, it's often hard for us to recognize how profound and sweeping they have been. They include far larger and denser human populations, much higher per capita consumption of natural resources, and far better and more widely available technologies for the movement of people, materials, and especially information.</p>

  <p>In combination, these changes have sharply increased the density, intensity, and pace of our interactions with each other; they have greatly increased the burden we place on our natural environment; and they have helped shift power from national and international institutions to individuals and subgroups, such as political special interests and ethnic factions. The management of our relationship with the new world requires immense and ever-increasing amounts of social and technical ingenuity.</p>

  <p>When we enhance the performance of any system, from our cars to the planet's network of financial institutions, we tend to make it more complex. Many of the natural systems critical to our well-being, like the global climate and the oceans, are extraordinarily complex to begin with. We often can't predict or manage the behavior of complex systems with much precision because they are often very sensitive to the smallest of changes and perturbations, and their behavior can flip from one mode to another suddenly and dramatically.</p>

  <p>Over the last 100 years, as the human-made and natural systems we depend upon have become more complex, and as our demands on them have increased, the institutions and technologies we use to manage them must become more complex too, which further boosts our requirement for ingenuity.</p>

  <p>However, we should not jump to the conclusion that the supply of ingenuity always increases in lockstep with our ingenuity requirement: while it's true that necessity is often the mother of invention, we can't always rely on the right kind of ingenuity appearing when and where we need it. In many cases, the complexity and speed of operation of today's vital economic, social, and ecological systems exceed the human brain's grasp. Not many of us have more than a rudimentary grasp of how these systems work. They remain fraught with countless 'unknowns,' which makes it hard to supply the ingenuity we need to solve problems associated with these systems.</p>

  <p>In this book, I explore a wide range of other factors that will limit our ability to supply the ingenuity required in the coming century. For example, the crush of information in our everyday lives is shortening our attention span, limiting the time we have to reflect on critical matters of public policy, and making policy arguments more superficial.</p>

  <p>Modern markets and science are an important part of the story of how we supply ingenuity. Markets are critically important, because they give entrepreneurs an incentive to produce knowledge. As for science, although it seems to face no theoretical limits — at least in the foreseeable future — practical constraints often slow its progress. The cost of scientific research tends to increase as it delves deeper into nature. And science's rate of advance depends on the characteristics of the natural phenomena it investigates, simply because some phenomena are intrinsically harder to understand than others, so the production of useful new knowledge in these areas can be very slow.</p>

  <p>Consequently, there is often a critical time lag between the recognition of a problem and the delivery of sufficient ingenuity, in the form of technologies, to solve that problem. Progress in the social sciences is especially slow, for reasons we don't yet fully understand; but we desperately need better social scientific knowledge to build the sophisticated institutions today's world demands.</p>
</div>




</div>
            <div class="resizer" id="resizer"></div>
            <div class="questions-panel" id="questions-panel">
              <div id="questions-1" class="question-set hidden">
  <div class="questions-container">

    <!-- Questions 1–6: True / False / Not Given -->
    <!-- Questions 1–7: True / False / Not Given -->
<div class="question" data-q-start="1" data-q-end="7">
    <div class="question-prompt">
        <p><strong>Questions 1–7</strong><br>
        Do the following statements agree with the information given in Reading Passage 1?<br>
        In boxes <b>1–7</b> on your answer sheet, write</p>
        <ul>
            <li><strong>TRUE</strong> if the statement agrees with the information</li>
            <li><strong>FALSE</strong> if the statement contradicts the information</li>
            <li><strong>NOT GIVEN</strong> if there is no information on this</li>
        </ul>
    </div>

    <!-- Question 1 -->
    <div class="tf-question">
        <div class="tf-question-line">
            <span class="tf-question-number">1</span>
            <span class="tf-question-text">The archaeologists found evidence that the island had been settled around 7000 years ago.</span>
        </div>
        <div class="tf-options">
            <label class="tf-option"><input type="radio" name="q1" value="TRUE"><span class="tf-option-text">TRUE</span></label>
            <label class="tf-option"><input type="radio" name="q1" value="FALSE"><span class="tf-option-text">FALSE</span></label>
            <label class="tf-option"><input type="radio" name="q1" value="NOT GIVEN"><span class="tf-option-text">NOT GIVEN</span></label>
        </div>
    </div>

    <!-- Question 2 -->
    <div class="tf-question">
        <div class="tf-question-line">
            <span class="tf-question-number">2</span>
            <span class="tf-question-text">The settlers used locally available stone to make tools and weapons.</span>
        </div>
        <div class="tf-options">
            <label class="tf-option"><input type="radio" name="q2" value="TRUE"><span class="tf-option-text">TRUE</span></label>
            <label class="tf-option"><input type="radio" name="q2" value="FALSE"><span class="tf-option-text">FALSE</span></label>
            <label class="tf-option"><input type="radio" name="q2" value="NOT GIVEN"><span class="tf-option-text">NOT GIVEN</span></label>
        </div>
    </div>

    <!-- Question 3 -->
    <div class="tf-question">
        <div class="tf-question-line">
            <span class="tf-question-number">3</span>
            <span class="tf-question-text">The prehistoric settlers kept domesticated animals on the island.</span>
        </div>
        <div class="tf-options">
            <label class="tf-option"><input type="radio" name="q3" value="TRUE"><span class="tf-option-text">TRUE</span></label>
            <label class="tf-option"><input type="radio" name="q3" value="FALSE"><span class="tf-option-text">FALSE</span></label>
            <label class="tf-option"><input type="radio" name="q3" value="NOT GIVEN"><span class="tf-option-text">NOT GIVEN</span></label>
        </div>
    </div>

    <!-- Question 4 -->
    <div class="tf-question">
        <div class="tf-question-line">
            <span class="tf-question-number">4</span>
            <span class="tf-question-text">The researchers discovered pottery fragments among the excavation materials.</span>
        </div>
        <div class="tf-options">
            <label class="tf-option"><input type="radio" name="q4" value="TRUE"><span class="tf-option-text">TRUE</span></label>
            <label class="tf-option"><input type="radio" name="q4" value="FALSE"><span class="tf-option-text">FALSE</span></label>
            <label class="tf-option"><input type="radio" name="q4" value="NOT GIVEN"><span class="tf-option-text">NOT GIVEN</span></label>
        </div>
    </div>

    <!-- Question 5 -->
    <div class="tf-question">
        <div class="tf-question-line">
            <span class="tf-question-number">5</span>
            <span class="tf-question-text">Carbon dating was used to estimate the age of the settlement site.</span>
        </div>
        <div class="tf-options">
            <label class="tf-option"><input type="radio" name="q5" value="TRUE"><span class="tf-option-text">TRUE</span></label>
            <label class="tf-option"><input type="radio" name="q5" value="FALSE"><span class="tf-option-text">FALSE</span></label>
            <label class="tf-option"><input type="radio" name="q5" value="NOT GIVEN"><span class="tf-option-text">NOT GIVEN</span></label>
        </div>
    </div>

    <!-- Question 6 -->
    <div class="tf-question">
        <div class="tf-question-line">
            <span class="tf-question-number">6</span>
            <span class="tf-question-text">The island settlers were likely to have traded goods with communities on the mainland.</span>
        </div>
        <div class="tf-options">
            <label class="tf-option"><input type="radio" name="q6" value="TRUE"><span class="tf-option-text">TRUE</span></label>
            <label class="tf-option"><input type="radio" name="q6" value="FALSE"><span class="tf-option-text">FALSE</span></label>
            <label class="tf-option"><input type="radio" name="q6" value="NOT GIVEN"><span class="tf-option-text">NOT GIVEN</span></label>
        </div>
    </div>

    <!-- Question 7 -->
    <div class="tf-question">
        <div class="tf-question-line">
            <span class="tf-question-number">7</span>
            <span class="tf-question-text">The researchers concluded that the settlement was abandoned due to rising sea levels.</span>
        </div>
        <div class="tf-options">
            <label class="tf-option"><input type="radio" name="q7" value="TRUE"><span class="tf-option-text">TRUE</span></label>
            <label class="tf-option"><input type="radio" name="q7" value="FALSE"><span class="tf-option-text">FALSE</span></label>
            <label class="tf-option"><input type="radio" name="q7" value="NOT GIVEN"><span class="tf-option-text">NOT GIVEN</span></label>
        </div>
    </div>
</div>


    <hr>

    <!-- Questions 7–13: Complete the notes below -->
    <div class="question" data-q-start="7" data-q-end="13">
      <div class="question-prompt">
        <p><strong>Questions 7–13</strong>: Complete the notes below.</p>
        <p>Choose <strong>ONE WORD ONLY</strong> from the passage for each answer.</p>
        <p>Write your answers in boxes <b>7–13</b> on your answer sheet.</p>
      </div>

      <div class="note-section">
        <h2 class="text-center">Archaeological findings on Obi</h2>
        <p><strong>Excavations of rock shelters inside</strong> <b> 7 </b><input type="text" id="q7"> <strong>near the village of Kelo revealed:</strong></p>
        <ul>
          <li> <b>● </b>Axes from around 14,000 years ago, probably used to make <b> 8 </b> <input type="text" id="q8"></li>
          <li><b>● </b>Axes made out of <b> 9 </b><input type="text" id="q9"> dating from around 11,700 years ago</li>
          <li><b>● </b> <b> 10 </b> <input type="text" id="q10"> of an animal: evidence of what ancient islanders ate</li>
        </ul>

        <p><strong>Evidence of travel between islands:</strong></p>
        <ul>
          <li><b>● </b><b> 11 </b><input type="text" id="q11"><b>:</b> a material that is not found naturally on Obi</li>
          <li><b>● </b><b> 12 </b><input type="text" id="q12"> which resembled ones found on other islands</li>
        </ul>

        <p><strong>Evidence from around 8,000 to 1,000 years ago suggests that Obi islanders</strong></p>
        <ul>
          <li><b>● </b>May have switched from hunting to <u>fishing</u></li>
          <li><b>● </b>Used objects made of various materials, including metal and pottery</li>
          <li><b>● </b>Probably took part in the production and sale of <b> 13 </b><input type="text" id="q13"></li>
        </ul>
      </div>
    </div>
  </div>
</div>



               <div id="questions-2" class="question-set hidden">
  <div class="questions-container">

    <!-- Questions 14–18: Which Paragraph Contains This Information -->
    <div class="question" data-q-start="14" data-q-end="18">
      <div class="question-prompt">
        <p><strong>Questions 14–18</strong></p>
        <p>Reading Passage 2 has eight paragraphs, A–H.</p>
        <p>Which paragraph contains the following information?</p>
        <p>Write the correct letter, <strong>A–H</strong>, in boxes 14–18 on your answer sheet.</p>
        <p><em>NB You may use any letter more than once.</em></p>
      </div>

      <p>14. The role of wetlands in preventing natural disasters.
        <input type="text" id="q14" maxlength="1" class="answer-box">
      </p>
      <p>15. Reference to the need to ensure that inhabitants of wetland regions continue to benefit from them.
        <input type="text" id="q15" maxlength="1" class="answer-box">
      </p>
      <p>16. The proportion of wetlands which have already been lost.
        <input type="text" id="q16" maxlength="1" class="answer-box">
      </p>
      <p>17. Reference to the idea that people are beginning to appreciate the value of wetlands.
        <input type="text" id="q17" maxlength="1" class="answer-box">
      </p>
      <p>18. Mention of the cultural significance of wetlands.
        <input type="text" id="q18" maxlength="1" class="answer-box">
      </p>
    </div>

    <hr>

    <!-- Questions 19–22: Complete the Sentences -->
    <div class="question" data-q-start="19" data-q-end="22">
      <div class="question-prompt">
        <p><strong>Questions 19–22</strong></p>
        <p>Complete the sentences below.</p>
        <p>Choose <strong>ONE WORD ONLY</strong> from the passage for each answer.</p>
        <p>Write your answers in boxes 19–22 on your answer sheet.</p>
      </div>

      <p>19. Peatlands which have been drained begin to release 
        <input type="text" id="q19" class="answer-box" placeholder="19"> instead of storing it.
      </p>
      <p>20. Once peatland areas have been cleared, 
        <input type="text" id="q20" class="answer-box" placeholder="20"> are more likely to occur.
      </p>
      <p>21. Clearing peatland forests to make way for oil palm plantations destroys the 
        <input type="text" id="q21" class="answer-box" placeholder="21"> of the local environment.
      </p>
      <p>22. Water is drained out of peatlands through the 
        <input type="text" id="q22" class="answer-box" placeholder="22"> which are created by logging companies.
      </p>
    </div>

    <hr>

    <!-- Questions 23–26: Matching Experts -->
    <div class="question" data-q-start="23" data-q-end="26">
      <div class="question-prompt">
        <p><strong>List of Experts</strong></p>
        <p>
          A. Matthew McCartney<br>
          B. Pieter van Eijk<br>
          C. Marcel Silvius<br>
          D. Dave Tickner
        </p>
        <p><strong>Questions 23–26</strong></p>
        <p>Match each statement with the correct expert, A–D.</p>
        <p>Write the correct letter, <strong>A–D</strong>, in boxes 23–26 on your answer sheet.</p>
        <p><em>NB You may use any letter more than once.</em></p>
      </div>

      <p>23. Communities living in wetland regions must be included in discussions about the future of these areas.
        <input type="text" id="q23" maxlength="1" class="answer-box">
      </p>
      <p>24. Official policies towards wetlands vary from one nation to the next.
        <input type="text" id="q24" maxlength="1" class="answer-box">
      </p>
      <p>25. In a few decades' time, substantial areas of land will have disappeared into the sea.
        <input type="text" id="q25" maxlength="1" class="answer-box">
      </p>
      <p>26. Many of the practices which damage wetlands are almost impossible to see.
        <input type="text" id="q26" maxlength="1" class="answer-box">
      </p>
    </div>

  </div>
</div>



               <div id="questions-3" class="question-set">
  <div class="questions-container">

    <!-- Questions 27–30: Complete Each Sentence -->
    <div class="question" data-q-start="27" data-q-end="30">
      <div class="question-prompt">
        <p><strong>Questions 27–30</strong></p>
        <p>Complete each sentence with the correct ending, <strong>A–F</strong>, below.</p>
        <p>Write the correct letter, <strong>A–F</strong>, in boxes 27–30 on your answer sheet.</p>
      </div>

      <div class="people-list">
        <p><strong>List of Endings</strong></p>
        <p><b>A</b> does not depend on ingenuity alone.</p>
        <p><b>B</b> depends in part on the successful management of certain disputes.</p>
        <p><b>C</b> has often been misunderstood.</p>
        <p><b>D</b> is not limited to the creation of new inventions.</p>
        <p><b>E</b> frequently increases in accordance with the material successes achieved.</p>
        <p><b>F</b> is linked to factors such as the weather.</p>
      </div>

      <div class="question-item">
        <span class="q-number">27.</span>
        <span class="q-text">The author's definition of ingenuity</span>
        <input type="text" id="q27" class="answer-box" maxlength="1" placeholder="A–F">
      </div>

      <div class="question-item">
        <span class="q-number">28.</span>
        <span class="q-text">The type of ingenuity required by a society</span>
        <input type="text" id="q28" class="answer-box" maxlength="1" placeholder="A–F">
      </div>

      <div class="question-item">
        <span class="q-number">29.</span>
        <span class="q-text">The creation of wealth</span>
        <input type="text" id="q29" class="answer-box" maxlength="1" placeholder="A–F">
      </div>

      <div class="question-item">
        <span class="q-number">30.</span>
        <span class="q-text">The stability of a society</span>
        <input type="text" id="q30" class="answer-box" maxlength="1" placeholder="A–F">
      </div>
    </div>

    <hr>

    <!-- Questions 31–33: Multiple Choice -->
    <div class="question" data-q-start="31" data-q-end="33">
      <div class="question-prompt">
        <p><strong>Questions 31–33</strong></p>
        <p>Choose the correct letter, <strong>A, B, C</strong>, or <strong>D</strong>.</p>
        <p>Write the correct letter in boxes 31–33 on your answer sheet.</p>
      </div>

      <div class="question-item">
        <span class="q-number">31.</span>
        <span class="q-text">What point does the author make about the incremental changes of the last century?</span>
        <br>
        <label><input type="radio" name="q31" value="A"> A. Their effect on the environment has been positive.</label><br>
        <label><input type="radio" name="q31" value="B"> B. They have not affected all parts of the world.</label><br>
        <label><input type="radio" name="q31" value="C"> C. Their significance may not be noticed.</label><br>
        <label><input type="radio" name="q31" value="D"> D. They have had less impact than those of previous centuries.</label>
      </div>

      <div class="question-item">
        <span class="q-number">32.</span>
        <span class="q-text">According to the author, one effect of the combined changes is that life has become</span>
        <br>
        <label><input type="radio" name="q32" value="A"> A. easier.</label><br>
        <label><input type="radio" name="q32" value="B"> B. faster.</label><br>
        <label><input type="radio" name="q32" value="C"> C. more interesting.</label><br>
        <label><input type="radio" name="q32" value="D"> D. more enjoyable.</label>
      </div>

      <div class="question-item">
        <span class="q-number">33.</span>
        <span class="q-text">What observation does the author make about complex natural systems?</span>
        <br>
        <label><input type="radio" name="q33" value="A"> A. They can be greatly affected by minor alterations.</label><br>
        <label><input type="radio" name="q33" value="B"> B. They cannot be compared to human-made systems.</label><br>
        <label><input type="radio" name="q33" value="C"> C. Their performance cannot be improved by human intervention.</label><br>
        <label><input type="radio" name="q33" value="D"> D. Their behaviour is better understood than ever before.</label>
      </div>
    </div>

    <hr>

    <!-- Questions 34–40: Yes / No / Not Given -->
    <div class="question" data-q-start="34" data-q-end="40">
      <div class="question-prompt">
        <p><strong>Questions 34–40</strong></p>
        <p>Do the following statements agree with the claims of the writer in Reading Passage 3?</p>
        <p>In boxes <strong>34–40</strong> on your answer sheet, write:</p>
        <ul>
          <li><strong>YES</strong> if the statement agrees with the writer's claims</li>
          <li><strong>NO</strong> if the statement contradicts the writer's claims</li>
          <li><strong>NOT GIVEN</strong> if it is impossible to say what the writer thinks</li>
        </ul>
      </div>

      <div class="tf-question">
        <span class="tf-question-number">34.</span> Changes in the last 100 years have increased the need for human ingenuity.<br>
        <label><input type="radio" name="q34" value="YES"> YES</label>
        <label><input type="radio" name="q34" value="NO"> NO</label>
        <label><input type="radio" name="q34" value="NOT GIVEN"> NOT GIVEN</label>
      </div>

      <div class="tf-question">
        <span class="tf-question-number">35.</span> The amount of ingenuity available is strictly related to the demand which exists for it.<br>
        <label><input type="radio" name="q35" value="YES"> YES</label>
        <label><input type="radio" name="q35" value="NO"> NO</label>
        <label><input type="radio" name="q35" value="NOT GIVEN"> NOT GIVEN</label>
      </div>

      <div class="tf-question">
        <span class="tf-question-number">36.</span> Although ingenuity may be available, it may be inappropriate for the tasks that need solutions at the time.<br>
        <label><input type="radio" name="q36" value="YES"> YES</label>
        <label><input type="radio" name="q36" value="NO"> NO</label>
        <label><input type="radio" name="q36" value="NOT GIVEN"> NOT GIVEN</label>
      </div>

      <div class="tf-question">
        <span class="tf-question-number">37.</span> Few people today truly understand the way the modern world works.<br>
        <label><input type="radio" name="q37" value="YES"> YES</label>
        <label><input type="radio" name="q37" value="NO"> NO</label>
        <label><input type="radio" name="q37" value="NOT GIVEN"> NOT GIVEN</label>
      </div>

      <div class="tf-question">
        <span class="tf-question-number">38.</span> Access to more and more information is improving our grasp of current affairs.<br>
        <label><input type="radio" name="q38" value="YES"> YES</label>
        <label><input type="radio" name="q38" value="NO"> NO</label>
        <label><input type="radio" name="q38" value="NOT GIVEN"> NOT GIVEN</label>
      </div>

      <div class="tf-question">
        <span class="tf-question-number">39.</span> Future generations will be critical of the way today's governments have conducted themselves.<br>
        <label><input type="radio" name="q39" value="YES"> YES</label>
        <label><input type="radio" name="q39" value="NO"> NO</label>
        <label><input type="radio" name="q39" value="NOT GIVEN"> NOT GIVEN</label>
      </div>

      <div class="tf-question">
        <span class="tf-question-number">40.</span> It is inevitable that some areas of scientific study advance more quickly than others.<br>
        <label><input type="radio" name="q40" value="YES"> YES</label>
        <label><input type="radio" name="q40" value="NO"> NO</label>
        <label><input type="radio" name="q40" value="NOT GIVEN"> NOT GIVEN</label>
      </div>
    </div>
  </div>
</div>



    <!-- Navigation Arrows -->
    <div class="nav-arrows">
        <button class="nav-arrow" onclick="previousQuestion()" id="prevBtn">‹</button>
        <button class="nav-arrow" onclick="nextQuestion()" id="nextBtn">›</button>
    </div>

    <!-- Bottom Navigation -->
    <nav class="nav-row perScorableItem" aria-label="Questions">
        <div class="footer__questionWrapper___1tZ46 multiple selected" role="tablist">
            <button role="tab" class="footer__questionNo___3WNct" onclick="switchToPart(1)">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">1</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 13</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(1)"><span class="sr-only">Question 1</span><span aria-hidden="true">1</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(2)"><span class="sr-only">Question 2</span><span aria-hidden="true">2</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(3)"><span class="sr-only">Question 3</span><span aria-hidden="true">3</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(4)"><span class="sr-only">Question 4</span><span aria-hidden="true">4</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(5)"><span class="sr-only">Question 5</span><span aria-hidden="true">5</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(6)"><span class="sr-only">Question 6</span><span aria-hidden="true">6</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(7)"><span class="sr-only">Question 7</span><span aria-hidden="true">7</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(8)"><span class="sr-only">Question 8</span><span aria-hidden="true">8</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(9)"><span class="sr-only">Question 9</span><span aria-hidden="true">9</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(10)"><span class="sr-only">Question 10</span><span aria-hidden="true">10</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(11)"><span class="sr-only">Question 11</span><span aria-hidden="true">11</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(12)"><span class="sr-only">Question 12</span><span aria-hidden="true">12</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(13)"><span class="sr-only">Question 13</span><span aria-hidden="true">13</span></button>
            </div>
        </div>
        
        <div class="footer__questionWrapper___1tZ46 multiple" role="tablist">
            <button role="tab" class="footer__questionNo___3WNct" onclick="switchToPart(2)">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">2</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 13</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(14)"><span class="sr-only">Question 14</span><span aria-hidden="true">14</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(15)"><span class="sr-only">Question 15</span><span aria-hidden="true">15</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(16)"><span class="sr-only">Question 16</span><span aria-hidden="true">16</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(17)"><span class="sr-only">Question 17</span><span aria-hidden="true">17</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(18)"><span class="sr-only">Question 18</span><span aria-hidden="true">18</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(19)"><span class="sr-only">Question 19</span><span aria-hidden="true">19</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(20)"><span class="sr-only">Question 20</span><span aria-hidden="true">20</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(21)"><span class="sr-only">Question 21</span><span aria-hidden="true">21</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(22)"><span class="sr-only">Question 22</span><span aria-hidden="true">22</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(23)"><span class="sr-only">Question 23</span><span aria-hidden="true">23</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(24)"><span class="sr-only">Question 24</span><span aria-hidden="true">24</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(25)"><span class="sr-only">Question 25</span><span aria-hidden="true">25</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(26)"><span class="sr-only">Question 26</span><span aria-hidden="true">26</span></button>
            </div>
        </div>
        
        <div class="footer__questionWrapper___1tZ46 multiple" role="tablist">
            <button role="tab" class="footer__questionNo___3WNct" onclick="switchToPart(3)">
                <span>
                    <span aria-hidden="true" class="section-prefix">Part </span>
                    <span class="sectionNr" aria-hidden="true">3</span>
                    <span class="attemptedCount" aria-hidden="true">0 of 14</span>
                </span>
            </button>
            <div class="footer__subquestionWrapper___9GgoP">
                <button class="subQuestion scorable-item" onclick="goToQuestion(27)"><span class="sr-only">Question 27</span><span aria-hidden="true">27</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(28)"><span class="sr-only">Question 28</span><span aria-hidden="true">28</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(29)"><span class="sr-only">Question 29</span><span aria-hidden="true">29</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(30)"><span class="sr-only">Question 30</span><span aria-hidden="true">30</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(31)"><span class="sr-only">Question 31</span><span aria-hidden="true">31</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(32)"><span class="sr-only">Question 32</span><span aria-hidden="true">32</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(33)"><span class="sr-only">Question 33</span><span aria-hidden="true">33</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(34)"><span class="sr-only">Question 34</span><span aria-hidden="true">34</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(35)"><span class="sr-only">Question 35</span><span aria-hidden="true">35</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(36)"><span class="sr-only">Question 36</span><span aria-hidden="true">36</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(37)"><span class="sr-only">Question 37</span><span aria-hidden="true">37</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(38)"><span class="sr-only">Question 38</span><span aria-hidden="true">38</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(39)"><span class="sr-only">Question 39</span><span aria-hidden="true">39</span></button>
                <button class="subQuestion scorable-item" onclick="goToQuestion(40)"><span class="sr-only">Question 40</span><span aria-hidden="true">40</span></button>
            </div>
        </div>
        
        <button id="deliver-button" aria-label="Review your answers" class="footer__deliverButton___3FM07">
            <i class="fa fa fa-check" aria-hidden="true"></i>
            <span>Check Answers</span>
        </button>
    </nav>

    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu">
        <div id="menu-highlight" class="context-menu-item" onclick="highlightText()">
            Highlight
        </div>
        <div id="menu-note" class="context-menu-item" onclick="addNote()">
            Note
        </div>
        <div id="menu-clear" class="context-menu-item" onclick="clearHighlight()">
            Clear
        </div>
        <div id="menu-clear-all" class="context-menu-item" onclick="clearAllHighlights()">
            Clear All
        </div>
    </div>

   <div id="results-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <button class="modal-close-btn" onclick="closeResultsModal()">×</button>
        <div id="results-header"></div> <!-- This will show {Name} Your Results -->
        <div class="results-summary">
            <p>Score: <span id="results-score"></span> / 40</p>
            <p>IELTS Band: <span id="results-band"></span></p>
        </div>
        <div id="results-details" class="results-details-container"></div>
    </div>
</div>
<script>
// Allow dragging
document.querySelectorAll('.drag-item').forEach(item => {
  item.addEventListener('dragstart', function (event) {
    event.dataTransfer.setData("text/plain", this.dataset.value);
  });
});

// Allow dropping into zones
document.querySelectorAll('.drop-zone').forEach(zone => {
  zone.addEventListener('dragover', function (event) {
    event.preventDefault();
  });

  zone.addEventListener('drop', function (event) {
    event.preventDefault();
    const value = event.dataTransfer.getData("text/plain");
    const hiddenInput = this.querySelector('input[type="hidden"]');
    const span = this.querySelector('span');

    if (hiddenInput) {
      hiddenInput.value = value;   // ✅ Save answer
    }
    if (span) {
      span.textContent = value;    // Show chosen heading
      span.style.display = "inline";
    }
  });
});
</script>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- STATE VARIABLES ---
        let currentPassage = 1;
        let currentQuestion = 1;
        let selectedRange = null;
        let timeInSeconds = 3600;
        let timerInterval;
        let draggedItem = null;
        let activeQuestionElement = null;
        let selectedDragItem = null;

        // --- DOM ELEMENTS ---
        const timerDisplay = document.querySelector('.timer-display');
        const timerToggleButton = document.getElementById('timer-toggle-btn');
        const timerResetButton = document.getElementById('timer-reset-btn');
        const deliverButton = document.getElementById('deliver-button');
        const resizer = document.getElementById('resizer');
        const passagePanel = document.getElementById('passage-panel');
        const questionsPanel = document.getElementById('questions-panel');
        const contextMenu = document.getElementById('contextMenu');

        // --- ICON SVGs ---
        const playIcon = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M8 5v14l11-7L8 5z"/></svg>';
        const pauseIcon = '<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>';

        // --- ANSWERS ---
      const correctAnswers = {
  // Reading Passage 1: Questions 1–13
  '1': 'FALSE',
  '2': 'TRUE',
  '3': 'FALSE',
  '4': 'TRUE',
  '5': 'NOT GIVEN',
  '6': 'TRUE',
  '7': 'caves',
  '8': 'canoes',
  '9': 'stone',
  '10': 'bones',
  '11': 'obsidian',
  '12': 'beads',
  '13': 'spices',

  // Reading Passage 2: Questions 14–26
  '14': 'C',
  '15': 'G',
  '16': 'A',
  '17': 'H',
  '18': 'B',
  '19': 'carbon',
  '20': 'fires',
  '21': 'biodiversity',
  '22': 'ditches',
  '23': 'A',
  '24': 'C',
  '25': 'C',
  '26': 'D',

  // Reading Passage 3: Questions 27–40 (Updated)
  '27': 'D',
  '28': 'F',
  '29': 'A',
  '30': 'B',
  '31': 'C',
  '32': 'B',
  '33': 'A',
  '34': 'YES',
  '35': 'NO',
  '36': 'YES',
  '37': 'YES',
  '38': 'NO',
  '39': 'NOT GIVEN',
  '40': 'YES'
};




        // --- INITIALIZATION ---
        function initialize() {
            startTimer();
            initializeDragAndDrop();
            setupCheckboxLimits();
            setupExampleHeading();
            switchToPart(1); // Also calls goToQuestion(1) and updateNavigation
            
            document.body.addEventListener('input', updateAllIndicators);
            document.body.addEventListener('change', updateAllIndicators);
            deliverButton.addEventListener('click', checkAnswers);
            timerToggleButton.addEventListener('click', toggleTimer);
            timerResetButton.addEventListener('click', resetTimer);

            // Add click listeners to question containers for navigation
            document.querySelectorAll('[data-q-start]').forEach(el => {
                el.addEventListener('click', () => {
                    const qNum = parseInt(el.dataset.qStart, 10);
                    if (currentQuestion !== qNum) {
                        goToQuestion(qNum);
                    }
                });
            });

            resizer.addEventListener('mousedown', initResize, false);
            initializeContextMenu();
        }

        // --- CORE TEST LOGIC ---

        function checkAnswers() {
            // Disable all inputs to prevent changes
            const allInputs = document.querySelectorAll('input, select, textarea');
            allInputs.forEach(input => {
                input.disabled = true;
            });

            // Disable submit button
            deliverButton.disabled = true;
            deliverButton.style.cursor = 'not-allowed';
            
            clearInterval(timerInterval);
            let score = 0;
            const studentName = document.getElementById('studentName')?.value.trim() || "No Name Given";
            const totalQuestions = 40;
            const resultsDetailsContainer = document.getElementById('results-details');
            resultsDetailsContainer.innerHTML = '';

            document.querySelectorAll('.correct, .incorrect, .correct-answer-highlight').forEach(el => {
                el.classList.remove('correct', 'incorrect', 'correct-answer-highlight');
            });
            document.querySelectorAll('.correct-answer-display').forEach(el => el.remove());

            for (let i = 1; i <= totalQuestions; i++) {
                const questionKey = String(i);
                const correctAnswer = correctAnswers[questionKey];
                let userAnswer = '';
                let isCorrect = false;
                
                let userAnswerDisplay = 'Not Answered';
                const correctAnswerText = Array.isArray(correctAnswer) ? correctAnswer.join(' / ') : correctAnswer;

                const textInput = document.getElementById(`q${i}`);
                const radioGroup = document.querySelectorAll(`input[name="q${i}"][type="radio"]`);
                
                // Handle Text and Select Inputs
                if (textInput && (textInput.tagName === 'INPUT' || textInput.tagName === 'SELECT')) {
                    const element = textInput.closest('.matching-form-row') || textInput;
                    userAnswer = textInput.value.trim();
                    userAnswerDisplay = userAnswer || 'Not Answered';

                    if (textInput.tagName === 'SELECT') {
                        isCorrect = userAnswer === correctAnswer;
                    } else {
                        isCorrect = Array.isArray(correctAnswer) ?
                            correctAnswer.some(ans => userAnswer.toLowerCase() === ans.toLowerCase()) :
                            userAnswer.toLowerCase() === correctAnswer.toLowerCase();
                    }
                    
                    if (isCorrect) {
                        score++;
                        element.classList.add('correct');
                    } else {
                        element.classList.add('incorrect');
                        const correctAnswerSpan = document.createElement('span');
                        correctAnswerSpan.className = 'correct-answer-display';
                        correctAnswerSpan.innerHTML = `&nbsp;➜&nbsp;<span class="correct-answer-highlight">${correctAnswerText}</span>`;
                        textInput.parentNode.insertBefore(correctAnswerSpan, textInput.nextSibling);
                    }
                }
                // Handle Radio Button Inputs (T/F, MCQs)
                else if (radioGroup.length > 0) {
                    const questionContainer = radioGroup[0].closest('.tf-question') || radioGroup[0].closest('.multi-choice-question');
                    const checkedRadio = document.querySelector(`input[name="q${i}"]:checked`);

                    if (checkedRadio) {
                        userAnswer = checkedRadio.value;
                        userAnswerDisplay = userAnswer;
                        isCorrect = userAnswer === correctAnswer;

                        const userLabel = checkedRadio.closest('.tf-option, .multi-choice-option');
                        if (userLabel) {
                            userLabel.classList.add(isCorrect ? 'correct' : 'incorrect');
                        }
                    }

                    if (isCorrect) {
                        score++;
                    } else {
                        if (questionContainer){
                            const correctOptionEl = questionContainer.querySelector(`input[value="${correctAnswerText}"]`);
                            if (correctOptionEl) {
                                const correctLabel = correctOptionEl.closest('.tf-option, .multi-choice-option');
                                if (correctLabel) {
                                    correctLabel.classList.add('correct-answer-highlight');
                                }
                            }
                        }
                    }
                }
                // Handle Checkbox Groups (e.g., questions 21-22)
                else if (i === 21 || i === 22) {
                    // For questions 21-22, check if the user selected the correct combination
                    const checkedBoxes = document.querySelectorAll('input[name="q21-22"]:checked');
                    const userAnswers = Array.from(checkedBoxes).map(cb => cb.value).sort();
                    const correctAnswers21_22 = ['B', 'D']; // The correct answers for questions 21-22
                    
                    if (i === 21) {
                        // Only check once for the pair
                        userAnswerDisplay = userAnswers.length > 0 ? userAnswers.join(', ') : 'Not Answered';
                        isCorrect = userAnswers.length === 2 && 
                                   userAnswers.every(ans => correctAnswers21_22.includes(ans)) &&
                                   correctAnswers21_22.every(ans => userAnswers.includes(ans));
                        
                        if (isCorrect) {
                            score += 2; // Both questions are correct
                            // Mark both questions as correct in nav
                            const nav21 = document.querySelector(`.subQuestion[onclick="goToQuestion(21)"]`);
                            const nav22 = document.querySelector(`.subQuestion[onclick="goToQuestion(22)"]`);
                            if (nav21) nav21.classList.add('correct');
                            if (nav22) nav22.classList.add('correct');
                        } else {
                            // Mark both as incorrect in nav
                            const nav21 = document.querySelector(`.subQuestion[onclick="goToQuestion(21)"]`);
                            const nav22 = document.querySelector(`.subQuestion[onclick="goToQuestion(22)"]`);
                            if (nav21) nav21.classList.add('incorrect');
                            if (nav22) nav22.classList.add('incorrect');
                        }
                        
                        // Visual feedback on checkboxes
                        checkedBoxes.forEach(cb => {
                            const option = cb.closest('.multi-choice-option');
                            if (correctAnswers21_22.includes(cb.value)) {
                                option.classList.add('correct');
                            } else {
                                option.classList.add('incorrect');
                            }
                        });
                        
                        // Show correct answers if user got it wrong
                        if (!isCorrect) {
                            correctAnswers21_22.forEach(correctVal => {
                                const correctCheckbox = document.querySelector(`input[name="q21-22"][value="${correctVal}"]`);
                                if (correctCheckbox && !correctCheckbox.checked) {
                                    correctCheckbox.closest('.multi-choice-option').classList.add('correct-answer-highlight');
                                }
                            });
                        }
                    } else if (i === 22) {
                        // Skip individual processing for question 22 since it's handled with 21
                        userAnswerDisplay = 'See Q21';
                        const nav21 = document.querySelector(`.subQuestion[onclick="goToQuestion(21)"]`);
                        isCorrect = nav21 && nav21.classList.contains('correct');
                        continue; // Skip the rest of processing for Q22
                    }
                }
                 
                // For showing results in the modal
                 const resultRow = `
                    <div class="result-row ${isCorrect ? '' : 'incorrect'}">
                        <span class="q-num">${i}</span>
                        <span class="user-ans">${userAnswerDisplay}</span>
                        <span class="correct-ans">${correctAnswerText}</span>
                    </div>`;
                resultsDetailsContainer.innerHTML += resultRow;
                
                // Update nav button color
                const navButton = document.querySelector(`.subQuestion[onclick="goToQuestion(${i})"]`);
                if (navButton) {
                    navButton.classList.remove('answered', 'active');
                    navButton.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
            }

 const bandScore = calculateBandScore(score);
document.getElementById('results-header').innerHTML = `<strong>${studentName}</strong> — Your Results<br>
You scored ${score} out of 40 (Band ${bandScore}).`;

document.getElementById('results-modal').classList.remove('hidden');

        }

        function calculateBandScore(score) {
            if (score >= 39) return '9.0';
            const mapping = {
                40: 9.0, 39: 9.0, 38: 8.5, 37: 8.5, 36: 8.0, 35: 8.0, 34: 7.5,
                33: 7.5, 32: 7.0, 31: 7.0, 30: 7.0, 29: 6.5, 28: 6.5, 27: 6.5,
                26: 6.0, 25: 6.0, 24: 6.0, 23: 5.5, 22: 5.5, 21: 5.5, 20: 5.5,
                19: 5.0, 18: 5.0, 17: 5.0, 16: 5.0, 15: 5.0, 14: 4.5, 13: 4.5,
                12: 4.0, 11: 4.0, 10: 4.0, 9: 3.5, 8: 3.5, 7: 3.0, 6: 3.0,
                5: 2.5, 4: 2.5
            };
            if (score <= 0) return 0.0;
            if (score === 1) return 1.0;
            if (score <= 3) return 2.0;
            if (score <= 5) return 2.5;
            return mapping[score] || 0.0;
        }

        function getUserAnswer(qNum) {
            const textInput = document.getElementById(`q${qNum}`);
            const radioInput = document.querySelector(`input[name="q${qNum}"]:checked`);
            const dropZone = document.querySelector(`.drop-zone[data-q-start="${qNum}"]`);

            if (textInput) { // Handles <input type="text"> and <select>
                return { value: textInput.value, text: textInput.value || 'N/A' };
            }
            if (radioInput) {
                return { value: radioInput.value, text: radioInput.value };
            }
            if (dropZone) {
                const droppedItem = dropZone.querySelector('.drag-item');
                return { 
                    value: droppedItem ? droppedItem.dataset.value : null, 
                    text: droppedItem ? droppedItem.textContent.trim() : 'N/A' 
                };
            }
            return { value: null, text: 'N/A' };
        }

        function displayCorrectAnswer(qNum, correctAnswer) {
            // Handle multi-choice group questions (e.g., 38-40)
            if (qNum >= 38 && qNum <= 40) {
                 const correctAnswersArr = Array.isArray(correctAnswer) ? correctAnswer : [correctAnswer];
                 correctAnswersArr.forEach(ansValue => {
                    const correctInput = document.querySelector(`input[name="q38-40"][value="${ansValue}"]`);
                    correctInput?.closest('.multi-choice-option')?.classList.add('correct-answer-highlight');
                 });
                 return;
            }

            // Handle radio button questions by highlighting the correct label
            const correctRadioInput = document.querySelector(`input[name="q${qNum}"][value="${correctAnswer}"]`);
            if (correctRadioInput) {
                const parentOption = correctRadioInput.closest('.tf-option, .multi-choice-option');
                if (parentOption) {
                    parentOption.classList.add('correct-answer-highlight');
                    return;
                }
            }

            // Handle text inputs, select dropdowns, and others by showing the answer next to them
            const inputEl = document.getElementById(`q${qNum}`);
            if (inputEl) {
                const displaySpan = document.createElement('span');
                displaySpan.className = 'correct-answer-display';
                displaySpan.textContent = ` ✓ ${correctAnswer}`;
                inputEl.insertAdjacentElement('afterend', displaySpan);
                return; // Done
            }
            
            // Fallback for questions identified by a container (e.g., some T/F/NG questions)
            const element = findQuestionElement(qNum);
            if (element) {
                const displaySpan = document.createElement('span');
                displaySpan.className = 'correct-answer-display';
                displaySpan.textContent = ` ✓ ${correctAnswer}`;
                const itemContainer = element.querySelector('.tf-question-text');
                if (itemContainer) {
                     itemContainer.appendChild(displaySpan);
                } else {
                     element.appendChild(displaySpan);
                }
            }
        }
        
        function findQuestionElement(qNum) {
             return document.querySelector(`[data-q-start="${qNum}"]`);
        }

        function addResultToModal(qNum, userAnswer, correctAnswer, isCorrect) {
            const resultsDetails = document.getElementById('results-details');
            const row = document.createElement('div');
            row.className = 'result-row';
            if (!isCorrect) {
                row.classList.add('incorrect');
            }
            row.innerHTML = `
                <span class="q-num">${qNum}</span>
                <span class="user-ans">${userAnswer}</span>
                <span class="correct-ans">${correctAnswer}</span>
            `;
            resultsDetails.appendChild(row);
        }

        function showResultsModal() {
            document.getElementById('results-modal').classList.remove('hidden');
        }

        window.closeResultsModal = function() {
            document.getElementById('results-modal').classList.add('hidden');
        }
        
        function disableInputs() {
            deliverButton.innerHTML = `<span>Checked! View Results.</span>`;
            deliverButton.removeEventListener('click', checkAnswers);
            deliverButton.onclick = showResultsModal;

            document.querySelectorAll('input, select').forEach(el => {
                el.disabled = true;
                 if (el.matches('input[type=radio], input[type=checkbox]')) {
                     el.style.cursor = 'not-allowed';
                     el.parentElement.style.cursor = 'not-allowed';
                 }
            });
            document.querySelectorAll('.drag-item').forEach(el => {
                el.setAttribute('draggable', 'false');
                el.style.cursor = 'default';
            });
            document.querySelectorAll('.drop-zone').forEach(el => {
                el.classList.add('disabled');
            });
        }

        function checkValue(userValue, correctValue) {
            if (userValue === null || userValue === undefined) return false;
            const formattedUserValue = userValue.trim().toLowerCase();
            if (Array.isArray(correctValue)) {
                return correctValue.map(v => v.toLowerCase()).includes(formattedUserValue);
            } else {
                return formattedUserValue === String(correctValue).toLowerCase();
            }
        }

        function markQuestion(qNum, isCorrect) {
            const subQuestionBtn = document.querySelector(`.subQuestion[onclick="goToQuestion(${qNum})"]`);
            subQuestionBtn?.classList.add(isCorrect ? 'correct' : 'incorrect');

            const elementsToMark = [
                document.querySelector(`.tf-question[data-q-start="${qNum}"]`),
                document.querySelector(`.multi-choice-question[data-q-start="${qNum}"]`),
                document.querySelector(`.matching-question-item[data-q-start="${qNum}"]`),
                document.querySelector(`.drop-zone[data-q-start="${qNum}"]`),
                document.getElementById(`q${qNum}`),
                document.querySelector(`input[name="q${qNum}"]:checked`)?.closest('.tf-option'),
                document.querySelector(`input[name="q${qNum}"]:checked`)?.closest('.multi-choice-option')
            ];
            
            elementsToMark.forEach(el => {
                if (el) el.classList.add(isCorrect ? 'correct' : 'incorrect');
            });

             if (qNum === 14 || qNum === 15) {
                const multiChoiceContainer = document.querySelector('.multi-choice-question[data-q-start="14"]');
                if (multiChoiceContainer) multiChoiceContainer.classList.add(isCorrect ? 'correct' : 'incorrect');
             } else if (qNum >= 1 && qNum <= 5) {
                const pMatchInput = document.getElementById(`q${qNum}`);
                if (pMatchInput) pMatchInput.classList.add(isCorrect ? 'correct' : 'incorrect');
             } else if (qNum >= 38 && qNum <= 40) {
                // For this group, individual options are marked, not the container.
             }
        }

        function switchToPart(partNumber, goToQ = null) {
            currentPassage = partNumber;

            // Hide all passages and questions
            document.querySelectorAll('.reading-passage, .question-set, .part-header').forEach(el => {
                el.classList.add('hidden');
            });

            // Show the correct passage, questions, and header
            document.getElementById(`passage-text-${partNumber}`).classList.remove('hidden');
            document.getElementById(`questions-${partNumber}`).classList.remove('hidden');
            document.getElementById(`part-header-${partNumber}`).classList.remove('hidden');

            // Update bottom navigation 'selected' state
            document.querySelectorAll('.footer__questionWrapper___1tZ46').forEach((wrapper, index) => {
                wrapper.classList.toggle('selected', (index + 1) === partNumber);
            });

            // Go to the specified question or the first question of the part
            const firstQuestionOfPart = {1: 1, 2: 14, 3: 27}[partNumber];
            goToQuestion(goToQ !== null ? goToQ : firstQuestionOfPart);
        }
        
        function goToQuestion(questionNumber) {
            // Prevent unnecessary recursion: if already at the right passage and question, do nothing
            if (currentQuestion === questionNumber) {
                let passageNumber = 1;
                if (questionNumber >= 14 && questionNumber <= 26) passageNumber = 2;
                else if (questionNumber >= 27) passageNumber = 3;
                if (currentPassage === passageNumber) {
                    return;
                }
            }

            currentQuestion = questionNumber;

            let passageNumber = 1;
            if (questionNumber >= 14 && questionNumber <= 26) passageNumber = 2;
            else if (questionNumber >= 27) passageNumber = 3;

            if (currentPassage !== passageNumber) {
                switchToPart(passageNumber, questionNumber);
                return;
            }

            if (activeQuestionElement) {
                activeQuestionElement.classList.remove('active-question', 'active-input');
            }

            let targetEl = document.querySelector(`[data-q-start="${questionNumber}"]`);

            if (targetEl) {
                activeQuestionElement = targetEl;
                 if (targetEl.matches('input[type="text"]') || targetEl.matches('select')) {
                     targetEl.classList.add('active-input');
                 } else {
                     targetEl.classList.add('active-question');
                 }
                 scrollIntoViewIfNeeded(targetEl);
            } else {
                 const pMatch = document.querySelector(`.paragraph-matching-question select[id="q${questionNumber}"]`);
                 if(pMatch) {
                    activeQuestionElement = pMatch;
                    pMatch.classList.add('active-input');
                    scrollIntoViewIfNeeded(pMatch);
                 }
            }

            updateNavigation();
        }
        
        // --- UI & NAVIGATION ---

        function updateNavigation() {
            const navButtons = document.querySelectorAll('.subQuestion');
            navButtons.forEach(btn => btn.classList.remove('active'));
            const activeNav = document.querySelector(`.subQuestion[onclick="goToQuestion(${currentQuestion})"]`);
            if (activeNav) {
                activeNav.classList.add('active');
            }

            const inputs = document.querySelectorAll('.answer-input, .drop-zone.filled, .summary-drop-zone.filled');
            inputs.forEach(input => input.classList.remove('active-input'));
            
            const activeInput = document.getElementById(`q${currentQuestion}`);
            if (activeInput) {
                activeInput.classList.add('active-input');
                if (typeof activeInput.focus === 'function') {
                    activeInput.focus();
                }
            } else {
                const activeQuestionBlock = document.querySelector(`[data-q-start="${currentQuestion}"]`);
                if (activeQuestionBlock) {
                    const firstInput = activeQuestionBlock.querySelector('input, select');
                    if(firstInput) {
                        firstInput.classList.add('active-input');
                         if (typeof firstInput.focus === 'function') {
                            firstInput.focus();
                        }
                    }
                }
            }
        }
        
        function selectDragItem(item) {
            if (selectedDragItem) {
                selectedDragItem.classList.remove('selected');
            }
            selectedDragItem = item;
            if (selectedDragItem) {
                selectedDragItem.classList.add('selected');
            }
        }
        
        window.nextQuestion = () => currentQuestion < 40 && goToQuestion(currentQuestion + 1);
        window.previousQuestion = () => currentQuestion > 1 && goToQuestion(currentQuestion - 1);

        function updateAllIndicators() {
            updateAttemptedCount(1, 1, 13);
            updateAttemptedCount(2, 14, 26);
            updateAttemptedCount(3, 27, 40);
            updateAnsweredNav();
        }
        
        function updateAnsweredNav() {
            const navButtons = document.querySelectorAll('.subQuestion');
            navButtons.forEach(btn => {
                const qNum = parseInt(btn.textContent, 10);
                if (isQuestionAnswered(qNum)) {
                    btn.classList.add('answered');
                } else {
                    btn.classList.remove('answered');
                }
            });
        }
        
        function isQuestionAnswered(qNum) {
            // Special handling for questions 21-22 checkbox group
            if (qNum === 21 || qNum === 22) {
                const checkedBoxes = document.querySelectorAll('input[name="q21-22"]:checked');
                return checkedBoxes.length > 0;
            }
            
            const textInput = document.getElementById(`q${qNum}`);
            if (textInput && (textInput.value.trim() !== '' || (textInput.classList.contains('drop-zone') && textInput.children.length > 0))) {
                return true;
            }
            const radio = document.querySelector(`input[name="q${qNum}"]:checked`);
            if (radio) {
                return true;
            }
            const checkbox = document.querySelector(`input[name="q${qNum}"]:checked`);
            if (checkbox) {
                return true;
            }
            return false;
        }

        function scrollIntoViewIfNeeded(element) {
            const panel = element.closest('.questions-panel, .passage-panel');
            const panelRect = panel.getBoundingClientRect();
            const elementRect = element.getBoundingClientRect();
            if (elementRect.top < panelRect.top || elementRect.bottom > panelRect.bottom) {
                element.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        // --- DRAG AND DROP ---
        
        function initializeDragAndDrop() {
            document.querySelectorAll('.drag-item').forEach(item => {
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
                item.addEventListener('click', () => selectDragItem(item));
            });
            document.querySelectorAll('.drop-zone, .drag-options-container').forEach(zone => {
                zone.addEventListener('dragover', handleDragOver);
                zone.addEventListener('dragleave', handleDragLeave);
                zone.addEventListener('drop', handleDrop);
            });
        }

        function handleDragStart(e) {
            draggedItem = e.target;
            setTimeout(() => e.target.classList.add('dragging'), 0);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            draggedItem = null;
        }

        function handleDragOver(e) {
            e.preventDefault();
            const targetZone = e.currentTarget;
            if (draggedItem && draggedItem.dataset.dndGroup === targetZone.dataset.dndGroup) {
                targetZone.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            const targetZone = e.currentTarget;
            targetZone.classList.remove('drag-over');

            if (!draggedItem || draggedItem.dataset.dndGroup !== targetZone.dataset.dndGroup) {
                return;
            }

            const sourceZone = draggedItem.parentElement;
            if (sourceZone === targetZone) return; // Prevent dropping on itself

            const existingItemInTarget = targetZone.classList.contains('drop-zone') 
                ? targetZone.querySelector('.drag-item') 
                : null;

            // First, clear the target drop-zone of any text (like question numbers) before adding the new item.
            if (targetZone.classList.contains('drop-zone')) {
                Array.from(targetZone.childNodes).forEach(node => {
                    if (node.nodeType === Node.TEXT_NODE) {
                        node.remove();
                    }
                });
            }

            // Move the item that was in the target (if any) to the source zone.
            if (existingItemInTarget) {
                sourceZone.appendChild(existingItemInTarget);
            }
            
            // Finally, move the dragged item to the target zone.
            targetZone.appendChild(draggedItem);
            targetZone.classList.add('filled');

            // After the move, clean up the source zone if it's a drop-zone and is now empty.
            if (sourceZone.classList.contains('drop-zone') && !sourceZone.querySelector('.drag-item')) {
                 sourceZone.classList.remove('filled');
                 const qNum = sourceZone.dataset.qStart;
                 sourceZone.innerText = qNum; // Restore the question number
            }
            
            updateAllIndicators();
        }
        
        // --- MISC HELPERS ---
        
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval); // Ensure no multiple intervals
            timerInterval = setInterval(() => {
                timeInSeconds--;
                const minutes = Math.floor(timeInSeconds / 60);
                const seconds = timeInSeconds % 60;
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                if (timeInSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "Time's up!";
                    // checkAnswers(); // Disabled to prevent modal from opening automatically.
                }
            }, 1000);
            timerToggleButton.innerHTML = pauseIcon;
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            timerToggleButton.innerHTML = playIcon;
        }

        function toggleTimer() {
            // Check based on the icon currently displayed
            if (timerToggleButton.innerHTML.includes('M6 19h4V5H6v14z')) { // Check for pause icon shape
                pauseTimer();
            } else {
                startTimer();
            }
        }

        function resetTimer() {
            timeInSeconds = 3600;
            updateTimerDisplay();
            startTimer();
            timerToggleButton.innerHTML = pauseIcon;
        }
        
        function setupCheckboxLimits() {
            const checkboxGroups = [
                { name: 'q21-22', limit: 2 },
                { name: 'q38-40', limit: 3 }
            ];
            checkboxGroups.forEach(group => {
                const checkboxes = document.querySelectorAll(`input[name="${group.name}"]`);
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        const checkedCount = document.querySelectorAll(`input[name="${group.name}"]:checked`).length;
                        if (checkedCount > group.limit) checkbox.checked = false;
                        updateAllIndicators();
                    });
                });
            });
        }

        function setupExampleHeading() {
            const exampleBox = document.querySelector('.example-box');
            if(exampleBox){
                const title = document.createElement('p');
                title.style.fontWeight = 'bold';
                title.textContent = 'List of Statements';
                // exampleBox.insertBefore(title, exampleBox.firstChild);
            }
        }
        
        function initResize(e) {
            e.preventDefault();
            const startX = e.clientX;
            const startWidth = passagePanel.offsetWidth;
            
            const doDrag = (e) => {
                const newWidth = startWidth + e.clientX - startX;
                if (newWidth > 200 && (document.body.clientWidth - newWidth - resizer.offsetWidth) > 200) {
                    passagePanel.style.flex = `0 0 ${newWidth}px`;
                }
            };
            const stopDrag = () => {
                window.removeEventListener('mousemove', doDrag, false);
                window.removeEventListener('mouseup', stopDrag, false);
            };
            
            window.addEventListener('mousemove', doDrag, false);
            window.addEventListener('mouseup', stopDrag, false);
        }
        
        // --- CONTEXT MENU (Highlighting) ---
        
        // --- HIGHLIGHT FEATURE ---
        function initializeContextMenu() {
            const panels = [passagePanel, questionsPanel];
            let highlightBtn = null;
            let removeHighlightBtn = null;
            let highlightTarget = null;

            // Helper to remove floating buttons
            function removeFloatingButtons() {
                if (highlightBtn && highlightBtn.parentNode) highlightBtn.parentNode.removeChild(highlightBtn);
                if (removeHighlightBtn && removeHighlightBtn.parentNode) removeHighlightBtn.parentNode.removeChild(removeHighlightBtn);
                highlightBtn = null;
                removeHighlightBtn = null;
                highlightTarget = null;
            }

            // Show highlight button near selection
            document.addEventListener('mouseup', (e) => {
                setTimeout(() => { // Wait for selection to update
                    const selection = window.getSelection();
                    if (selection && !selection.isCollapsed && selection.toString().trim().length > 0) {
                        const range = selection.getRangeAt(0);
                        if (panels.some(panel => panel.contains(range.commonAncestorContainer))) {
                            // Don't show highlight button if selection is within an existing highlight that has a remove button
                            const selectionParentHighlight = range.commonAncestorContainer.nodeType === Node.TEXT_NODE 
                                ? range.commonAncestorContainer.parentElement?.closest('.highlight')
                                : range.commonAncestorContainer.closest?.('.highlight');
                            
                            if (selectionParentHighlight && removeHighlightBtn && highlightTarget === selectionParentHighlight) {
                                // Selection is within the highlight that already has a remove button, don't interfere
                                return;
                            }
                            
                            removeFloatingButtons();
                            highlightBtn = document.createElement('button');
                            highlightBtn.textContent = 'Highlight';
                            highlightBtn.style.position = 'absolute';
                            highlightBtn.style.zIndex = 9999;
                            highlightBtn.style.background = '#ffe066';
                            highlightBtn.style.border = '1px solid #aaa';
                            highlightBtn.style.padding = '2px 10px';
                            highlightBtn.style.borderRadius = '4px';
                            highlightBtn.style.cursor = 'pointer';
                            // Position button near selection
                            const rect = range.getBoundingClientRect();
                            highlightBtn.style.left = `${window.scrollX + rect.left}px`;
                            highlightBtn.style.top = `${window.scrollY + rect.top - 30}px`;
                            document.body.appendChild(highlightBtn);
                            highlightBtn.onclick = function() {
                                const span = document.createElement('span');
                                span.className = 'highlight';
                                span.style.background = '#ffe066';
                                span.appendChild(range.extractContents());
                                range.insertNode(span);
                                removeFloatingButtons();
                                window.getSelection().removeAllRanges();
                            };
                        } else {
                            removeFloatingButtons();
                        }
                    } else {
                        removeFloatingButtons();
                    }
                }, 10);
            });

            // Use event delegation for highlight removal
            panels.forEach(panel => {
                panel.addEventListener('click', (e) => {
                    const highlightEl = e.target.closest('.highlight');
                    if (highlightEl) {
                        // Prevent double creation
                        if (removeHighlightBtn && highlightTarget === highlightEl) return;
                        removeFloatingButtons();
                        removeHighlightBtn = document.createElement('button');
                        removeHighlightBtn.textContent = 'Remove Highlight';
                        removeHighlightBtn.style.position = 'absolute';
                        removeHighlightBtn.style.zIndex = 9999;
                        removeHighlightBtn.style.background = '#ffb3b3';
                        removeHighlightBtn.style.border = '1px solid #aaa';
                        removeHighlightBtn.style.padding = '2px 10px';
                        removeHighlightBtn.style.borderRadius = '4px';
                        removeHighlightBtn.style.cursor = 'pointer';
                        const rect = highlightEl.getBoundingClientRect();
                        removeHighlightBtn.style.left = `${window.scrollX + rect.left}px`;
                        removeHighlightBtn.style.top = `${window.scrollY + rect.top - 30}px`;
                        document.body.appendChild(removeHighlightBtn);
                        highlightTarget = highlightEl;
                        removeHighlightBtn.addEventListener('click', function(ev) {
                            ev.stopPropagation();
                            // Unwrap highlight
                            const parent = highlightTarget.parentNode;
                            while (highlightTarget.firstChild) {
                                parent.insertBefore(highlightTarget.firstChild, highlightTarget);
                            }
                            parent.removeChild(highlightTarget);
                            parent.normalize();
                            removeFloatingButtons();
                        });
                    }
                });
            });

            // Remove floating buttons on scroll or click elsewhere
            document.addEventListener('scroll', removeFloatingButtons, true);
            document.addEventListener('mousedown', (e) => {
                // Delay removal so highlight click handler can run first
                setTimeout(() => {
                    if ((removeHighlightBtn && removeHighlightBtn.contains(e.target)) || (highlightBtn && highlightBtn.contains(e.target))) {
                        return;
                    }
                    if (e.target.closest('.highlight')) return;
                    removeFloatingButtons();
                }, 0);
            });
        }

        function closeContextMenu() {
            contextMenu.style.display = 'none';
            selectedRange = null; // Clear range after menu closes
        }

        function unwrapElement(element) {
            const parent = element.parentNode;
            if (!parent) return;
            while (element.firstChild) {
                parent.insertBefore(element.firstChild, element);
            }
            parent.removeChild(element);
            parent.normalize();
        }

        window.highlightText = () => {
            if (selectedRange && !selectedRange.collapsed) {
                const span = document.createElement('span');
                span.className = 'highlight';
                span.appendChild(selectedRange.extractContents());
                selectedRange.insertNode(span);
            }
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        window.addNote = () => {
            const note = prompt('Enter your note:');
            if (note && selectedRange && !selectedRange.collapsed) {
                const span = document.createElement('span');
                span.className = 'comment-highlight';
                const tooltip = document.createElement('span');
                tooltip.className = 'comment-tooltip';
                tooltip.textContent = note;
                span.appendChild(selectedRange.extractContents());
                span.appendChild(tooltip);
                selectedRange.insertNode(span);
            }
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        window.clearHighlight = () => {
             const elementToClear = contextMenu.targetElementForClear;
             if (elementToClear) {
                 unwrapElement(elementToClear);
             }
             closeContextMenu();
             window.getSelection().removeAllRanges();
        };
        
        window.clearAllHighlights = () => {
            document.querySelectorAll('.highlight, .comment-highlight').forEach(unwrapElement);
            closeContextMenu();
            window.getSelection().removeAllRanges();
        };

        function updateAttemptedCount(part, startQ, endQ) {
            let answeredCount = 0;
            for (let i = startQ; i <= endQ; i++) {
                if (isQuestionAnswered(i)) {
                    answeredCount++;
                }
            }
            const partHeader = document.querySelector(`.footer__questionNo___3WNct[onclick="switchToPart(${part})"]`);
            if (partHeader) {
                const countSpan = partHeader.querySelector('.attemptedCount');
                if (countSpan) {
                     countSpan.textContent = `${answeredCount} of ${endQ - startQ + 1}`;
                }
            }
        }

        // --- GLOBAL FUNCTION EXPOSURE ---
        window.nextQuestion = nextQuestion;
        window.previousQuestion = previousQuestion;
        window.goToQuestion = goToQuestion;
        window.switchToPart = switchToPart;
        window.closeResultsModal = closeResultsModal;
        window.highlightText = highlightText;
        window.addNote = addNote;
        window.clearHighlight = clearHighlight;
        window.clearAllHighlights = clearAllHighlights;

        // --- START THE APP ---
        initialize();
    });
    </script>

</body></html>